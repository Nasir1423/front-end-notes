<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<link href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; --title-bar-height: 20px; }
.mac-os-11 { --title-bar-height: 28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
h1, h2, h3, h4, h5 { white-space: pre-wrap; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
thead, tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
svg { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; border-color: transparent !important; padding-top: 0px !important; padding-bottom: 0px !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  #write > p:nth-child(1) { margin-top: 0px; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
  figure { overflow-x: visible; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.reversefootnote { font-family: ui-monospace, sans-serif; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex: 2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; overflow-wrap: anywhere; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.42857rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left: 28px solid transparent; border-right: 28px solid transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right: 8px solid transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }
mjx-container { break-inside: avoid; }
.md-alert.md-alert-note { border-left-color: rgb(9, 105, 218); }
.md-alert.md-alert-important { border-left-color: rgb(130, 80, 223); }
.md-alert.md-alert-warning { border-left-color: rgb(154, 103, 0); }
.md-alert.md-alert-tip { border-left-color: rgb(31, 136, 61); }
.md-alert.md-alert-caution { border-left-color: rgb(207, 34, 46); }
.md-alert { padding: 0px 1em; margin-bottom: 16px; color: inherit; border-left: 0.25em solid rgb(0, 0, 0); }
.md-alert-text-note { color: rgb(9, 105, 218); }
.md-alert-text-important { color: rgb(130, 80, 223); }
.md-alert-text-warning { color: rgb(154, 103, 0); }
.md-alert-text-tip { color: rgb(31, 136, 61); }
.md-alert-text-caution { color: rgb(207, 34, 46); }
.md-alert-text { font-size: 0.9rem; font-weight: 700; }
.md-alert-text svg { fill: currentcolor; position: relative; top: 0.125em; margin-right: 1ch; overflow: visible; }
.md-alert-text-container::after { content: attr(data-text); text-transform: capitalize; pointer-events: none; margin-right: 1ch; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, 'Segoe UI Emoji', sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table th:first-child,
table td:first-child {
    margin-top: 0;
}
table th:last-child,
table td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    pre {
        page-break-inside: avoid;
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.mac-os #write{
    caret-color: AccentColor;
}

.md-lang {
    color: #b4654d;
}

/*.html-for-mac {
    --item-hover-bg-color: #E6F0FE;
}*/

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
    opacity: 0.4;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

.menu-item-container a.menu-style-btn {
    background-color: #f5f8fa;
    background-image: linear-gradient( 180deg , hsla(0, 0%, 100%, 0.8), hsla(0, 0%, 100%, 0)); 
}



mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
  min-height: 1px;
  min-width: 1px;
}

mjx-container[jax="SVG"] > svg a {
  fill: blue;
  stroke: blue;
}

mjx-assistive-mml {
  position: absolute !important;
  top: 0px;
  left: 0px;
  clip: rect(1px, 1px, 1px, 1px);
  padding: 1px 0px 0px 0px !important;
  border: 0px !important;
  display: block !important;
  width: auto !important;
  overflow: hidden !important;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

mjx-assistive-mml[display="block"] {
  width: 100% !important;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][display="true"][width="full"] {
  display: flex;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line], svg[data-table] > g > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame], svg[data-table] > g > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed, svg[data-table] > g > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted, svg[data-table] > g > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > g > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

mjx-container[jax="SVG2"] path[data-c], mjx-container[jax="SVG2"] use[data-c] {
  stroke-width: 3;
}

g[data-mml-node="xypic"] path {
  stroke-width: inherit;
}

.MathJax g[data-mml-node="xypic"] path {
  stroke-width: inherit;
}
mjx-container[jax="SVG"] path[data-c], mjx-container[jax="SVG"] use[data-c] {
							stroke-width: 0;
						}
</style><title>Node.js</title>
</head>
<body class='typora-export os-windows'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='nodejs'><span>Node.js</span></h1><p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="16.067ex" height="2.771ex" role="img" focusable="false" viewBox="0 -1205.8 7101.7 1224.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.043ex;"><defs><path id="MJX-1-TEX-B-1D402" d="M64 343Q64 502 174 599T468 697Q502 697 533 691T586 674T623 655T647 639T657 632L694 663Q703 670 711 677T723 687T730 692T735 695T740 696T746 697Q759 697 762 692T766 668V627V489V449Q766 428 762 424T742 419H732H720Q699 419 697 436Q690 498 657 545Q611 618 532 632Q522 634 496 634Q356 634 286 553Q232 488 232 343T286 133Q355 52 497 52Q597 52 650 112T704 237Q704 248 709 251T729 254H735Q750 254 755 253T763 248T766 234Q766 136 680 63T469 -11Q285 -11 175 86T64 343Z"></path><path id="MJX-1-TEX-B-1D428" d="M287 -5Q228 -5 182 10T109 48T63 102T39 161T32 219Q32 272 50 314T94 382T154 423T214 446T265 452H279Q319 452 326 451Q428 439 485 376T542 221Q542 156 514 108T442 33Q384 -5 287 -5ZM399 230V250Q399 280 398 298T391 338T372 372T338 392T282 401Q241 401 212 380Q190 363 183 334T175 230Q175 202 175 189T177 153T183 118T195 91T215 68T245 56T287 50Q348 50 374 84Q388 101 393 132T399 230Z"></path><path id="MJX-1-TEX-B-1D427" d="M40 442Q217 450 218 450H224V407L225 365Q233 378 245 391T289 422T362 448Q374 450 398 450Q428 450 448 447T491 434T529 402T551 346Q553 335 554 198V62H623V0H614Q596 3 489 3Q374 3 365 0H356V62H425V194V275Q425 348 416 373T371 399Q326 399 288 370T238 290Q236 281 235 171V62H304V0H295Q277 3 171 3Q64 3 46 0H37V62H106V210V303Q106 353 104 363T91 376Q77 380 50 380H37V442H40Z"></path><path id="MJX-1-TEX-B-1D42D" d="M272 49Q320 49 320 136V145V177H382V143Q382 106 380 99Q374 62 349 36T285 -2L272 -5H247Q173 -5 134 27Q109 46 102 74T94 160Q94 171 94 199T95 245V382H21V433H25Q58 433 90 456Q121 479 140 523T162 621V635H224V444H363V382H224V239V207V149Q224 98 228 81T249 55Q261 49 272 49Z"></path><path id="MJX-1-TEX-B-1D41E" d="M32 225Q32 332 102 392T272 452H283Q382 452 436 401Q494 343 494 243Q494 226 486 222T440 217Q431 217 394 217T327 218H175V209Q175 177 179 154T196 107T236 69T306 50Q312 49 323 49Q376 49 410 85Q421 99 427 111T434 127T442 133T463 135H468Q494 135 494 117Q494 110 489 97T468 66T431 32T373 5T292 -6Q181 -6 107 55T32 225ZM383 276Q377 346 348 374T280 402Q253 402 230 390T195 357Q179 331 176 279V266H383V276Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mstyle" transform="scale(1.73)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D402" xlink:href="#MJX-1-TEX-B-1D402"></use></g><g data-mml-node="mi" transform="translate(831,0)"><use data-c="1D428" xlink:href="#MJX-1-TEX-B-1D428"></use></g><g data-mml-node="mi" transform="translate(1406,0)"><use data-c="1D427" xlink:href="#MJX-1-TEX-B-1D427"></use></g><g data-mml-node="mi" transform="translate(2045,0)"><use data-c="1D42D" xlink:href="#MJX-1-TEX-B-1D42D"></use></g><g data-mml-node="mi" transform="translate(2492,0)"><use data-c="1D41E" xlink:href="#MJX-1-TEX-B-1D41E"></use></g><g data-mml-node="mi" transform="translate(3019,0)"><use data-c="1D427" xlink:href="#MJX-1-TEX-B-1D427"></use></g><g data-mml-node="mi" transform="translate(3658,0)"><use data-c="1D42D" xlink:href="#MJX-1-TEX-B-1D42D"></use></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle mathsize="1.73em"><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi mathvariant="bold">C</mi><mi mathvariant="bold">o</mi><mi mathvariant="bold">n</mi><mi mathvariant="bold">t</mi><mi mathvariant="bold">e</mi><mi mathvariant="bold">n</mi><mi mathvariant="bold">t</mi></mrow></mrow></mstyle></math></mjx-assistive-mml></mjx-container><script type="math/tex">\LARGE{\bf{Content}}</script></p><ul><li><p><a href='#nodejs'><span>Node.js</span></a></p><ul><li><p><a href='#1-nodejs-介绍'><span>1. Node.js 介绍</span></a></p></li><li><p><a href='#2-buffer'><span>2. Buffer</span></a></p></li><li><p><a href='#3-fs-模块'><span>3. fs 模块</span></a></p><ul><li><p><a href='#31-简要介绍'><span>3.1 简要介绍</span></a></p></li><li><p><a href='#32-文件的写入'><span>3.2 文件的写入</span></a></p></li><li><p><a href='#33-文件的读取'><span>3.3 文件的读取</span></a></p></li><li><p><a href='#34-文件文件夹的移动重命名'><span>3.4 文件/文件夹的移动/重命名</span></a></p></li><li><p><a href='#35-文件删除'><span>3.5 文件删除</span></a></p></li><li><p><a href='#36-文件夹操作'><span>3.6 文件夹操作</span></a></p></li><li><p><a href='#37-查看资源状态'><span>3.7 查看资源状态</span></a></p></li><li><p><a href='#38-相对路径与绝对路径'><span>3.8 相对路径与绝对路径</span></a></p></li></ul></li><li><p><a href='#4-path-模块'><span>4. path 模块</span></a></p></li><li><p><a href='#5-http-模块'><span>5. http 模块</span></a></p><ul><li><p><a href='#51-http-协议'><span>5.1 HTTP 协议</span></a></p><ul><li><p><a href='#请求报文'><span>请求报文</span></a></p></li><li><p><a href='#响应报文'><span>响应报文</span></a></p></li></ul></li><li><p><a href='#52-ip-与端口'><span>5.2 IP 与端口</span></a></p></li><li><p><a href='#53-创建-http-服务'><span>5.3 创建 HTTP 服务</span></a></p></li><li><p><a href='#54-通过浏览器查看-http-报文'><span>5.4 通过浏览器查看 HTTP 报文</span></a></p></li><li><p><a href='#55-获取-http-请求报文'><span>5.5 获取 HTTP 请求报文</span></a></p></li><li><p><a href='#56-设置-http-响应报文'><span>5.6 设置 HTTP 响应报文</span></a></p></li><li><p><a href='#57-网页资源的基本加载过程'><span>5.7 网页资源的基本加载过程</span></a></p></li><li><p><a href='#58-静态资源与动态资源'><span>5.8 静态资源与动态资源</span></a></p></li><li><p><a href='#59-静态资源目录'><span>5.9 静态资源目录</span></a></p></li><li><p><a href='#510-网页中的-url'><span>5.10 网页中的 URL</span></a></p></li><li><p><a href='#511-设置资源类型'><span>5.11 设置资源类型</span></a></p></li><li><p><a href='#512-get-和-post-请求'><span>5.12 GET 和 POST 请求</span></a></p></li></ul></li><li><p><a href='#6-模块化'><span>6. 模块化</span></a></p><ul><li><p><a href='#61-模块化简介'><span>6.1 模块化简介</span></a></p></li><li><p><a href='#62-模块化的极简单使用'><span>6.2 模块化的极简单使用</span></a></p></li><li><p><a href='#63-向外暴露数据'><span>6.3 向外暴露数据</span></a></p></li><li><p><a href='#64-模块的导入'><span>6.4 模块的导入</span></a></p></li><li><p><a href='#65-模块导入的基本流程'><span>6.5 模块导入的基本流程</span></a></p></li><li><p><a href='#66-commonjs-规范'><span>6.6 CommonJS 规范</span></a></p></li></ul></li><li><p><a href='#7-包管理工具'><span>7. 包管理工具</span></a></p><ul><li><p><a href='#71-包管理工具简介'><span>7.1 包管理工具简介</span></a></p></li><li><p><a href='#72-npm-简介'><span>7.2 npm 简介</span></a></p></li><li><p><a href='#73-npm-的基本使用'><span>7.3 npm 的基本使用</span></a></p></li><li><p><a href='#74-开发环境与生产环境'><span>7.4 开发环境与生产环境</span></a></p></li><li><p><a href='#75-开发依赖与生产依赖'><span>7.5 开发依赖与生产依赖</span></a></p></li><li><p><a href='#76-npm-全局安装'><span>7.6 npm 全局安装</span></a></p></li><li><p><a href='#77-npm-安装包的依赖'><span>7.7 npm 安装包的依赖</span></a></p></li><li><p><a href='#78-npm-安装指定版本的包'><span>7.8 npm 安装指定版本的包</span></a></p></li><li><p><a href='#79-npm-删除包'><span>7.9 npm 删除包</span></a></p></li><li><p><a href='#710-npm-配置别名'><span>7.10 npm 配置别名</span></a></p></li><li><p><a href='#711-cnpm-简介及简单实用'><span>7.11 cnpm 简介及简单实用</span></a></p></li><li><p><a href='#712-npm-配置淘宝镜像'><span>7.12 npm 配置淘宝镜像</span></a></p></li><li><p><a href='#713-yarn-简介及简单使用'><span>7.13 yarn 简介及简单使用</span></a></p></li><li><p><a href='#714-yarn-配置淘宝镜像'><span>7.14 yarn 配置淘宝镜像</span></a></p></li><li><p><a href='#715-npm-管理发布包'><span>7.15 npm 管理发布包</span></a></p></li><li><p><a href='#716-其他包管理工具'><span>7.16 其他包管理工具</span></a></p></li></ul></li><li><p><a href='#8-node-版本管理工具-nvm'><span>8. node 版本管理工具 nvm</span></a></p></li><li><p><a href='#9-express-框架'><span>9. Express 框架</span></a></p><ul><li><p><a href='#91-express-框架的简单使用'><span>9.1 Express 框架的简单使用</span></a></p></li><li><p><a href='#92-express-路由'><span>9.2 Express 路由</span></a></p><ul><li><p><a href='#921-路由的使用'><span>9.2.1 路由的使用</span></a></p></li><li><p><a href='#922-提取请求报文的参数'><span>9.2.2 提取请求报文的参数</span></a></p></li><li><p><a href='#923-动态路由参数的使用'><span>9.2.3 动态路由参数的使用</span></a></p></li></ul></li><li><p><a href='#93-express-设置响应'><span>9.3 Express 设置响应</span></a></p></li><li><p><a href='#94-中间件'><span>9.4 中间件</span></a></p><ul><li><p><a href='#941-中间件简介'><span>9.4.1 中间件简介</span></a></p></li><li><p><a href='#942-全局中间件'><span>9.4.2 全局中间件</span></a></p></li><li><p><a href='#943-路由中间件'><span>9.4.3 路由中间件</span></a></p></li><li><p><a href='#944-静态资源中间件'><span>9.4.4 静态资源中间件</span></a></p></li></ul></li><li><p><a href='#95-获取请求体数据'><span>9.5 获取请求体数据</span></a></p></li><li><p><a href='#96-防盗链'><span>9.6 防盗链</span></a></p></li><li><p><a href='#97-路由模块化'><span>9.7 路由模块化</span></a></p></li><li><p><a href='#98-ejs-模板引擎'><span>9.8 EJS 模板引擎</span></a></p></li><li><p><a href='#99-express-application-generator'><span>9.9 Express application generator</span></a></p></li><li><p><a href='#910-通过表单的文件上传与对应报文的处理'><span>9.10 通过表单的文件上传与对应报文的处理</span></a></p></li></ul></li><li><p><a href='#10-mongodb'><span>10. MongoDB</span></a></p><ul><li><p><a href='#101-mongodb-简介'><span>10.1 MongoDB 简介</span></a></p></li><li><p><a href='#102-mongodb-的下载与配置'><span>10.2 MongoDB 的下载与配置</span></a></p></li><li><p><a href='#103-mongodb-的操作命令'><span>10.3 MongoDB 的操作命令</span></a></p></li><li><p><a href='#104-mongoose-简介'><span>10.4 Mongoose 简介</span></a></p></li><li><p><a href='#105-mongoose-连接数据库'><span>10.5 Mongoose 连接数据库</span></a></p></li><li><p><a href='#106-mongoose-创建新文档'><span>10.6 Mongoose 创建新文档</span></a></p></li><li><p><a href='#107-字段类型和字段值验证'><span>10.7 字段类型和字段值验证</span></a></p></li><li><p><a href='#108-mongoose-增删改查'><span>10.8 Mongoose 增删改查</span></a></p></li><li><p><a href='#109-mongoose-条件对象语法'><span>10.9 Mongoose 条件对象语法</span></a></p></li><li><p><a href='#1010-mongoose-个性化读取'><span>10.10 Mongoose 个性化读取</span></a></p></li><li><p><a href='#1011-mongoose-代码模块化'><span>10.11 Mongoose 代码模块化</span></a></p></li><li><p><a href='#1012-mongodb-图形化管理工具'><span>10.12 MongoDB 图形化管理工具</span></a></p></li></ul></li><li><p><a href='#11-api-接口'><span>11. API 接口</span></a></p><ul><li><p><a href='#111-接口的简介'><span>11.1 接口的简介</span></a></p></li><li><p><a href='#112-restful-api'><span>11.2 RESTful API</span></a></p></li></ul></li><li><p><a href='#12-会话控制'><span>12. 会话控制</span></a></p><ul><li><p><a href='#121-会话控制简介'><span>12.1 会话控制简介</span></a></p></li><li><p><a href='#122-cookie'><span>12.2 cookie</span></a></p></li><li><p><a href='#123-session'><span>12.3 session</span></a></p></li><li><p><a href='#124-token'><span>12.4 token</span></a></p></li><li><p><a href='#125-本地域名'><span>12.5 本地域名</span></a></p></li></ul></li><li><p><a href='#13-项目上线'><span>13. 项目上线</span></a></p></li></ul></li></ul><p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="19.75ex" height="2.783ex" role="img" focusable="false" viewBox="0 -1211 8729.6 1230" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.043ex;"><defs><path id="MJX-2-TEX-B-1D411" d="M394 0Q370 3 222 3Q75 3 51 0H39V62H147V624H39V686H234Q256 686 299 686T362 687Q479 687 554 669T681 593Q716 550 716 497Q716 390 568 338Q569 337 572 336T577 332Q605 317 623 300T650 258T662 218T668 172Q678 98 689 76Q707 40 748 40Q770 40 780 54T795 88T801 111Q805 117 827 117H831Q846 117 852 113T858 92Q857 78 852 63T834 30T797 1T739 -11Q630 -11 580 12T511 87Q506 104 506 168Q506 170 506 178T507 194Q507 289 438 313Q424 318 356 318H298V62H406V0H394ZM366 369Q459 370 490 381Q548 402 548 476V498V517Q548 578 513 600Q479 624 392 624H358H298V369H366Z"></path><path id="MJX-2-TEX-B-1D41E" d="M32 225Q32 332 102 392T272 452H283Q382 452 436 401Q494 343 494 243Q494 226 486 222T440 217Q431 217 394 217T327 218H175V209Q175 177 179 154T196 107T236 69T306 50Q312 49 323 49Q376 49 410 85Q421 99 427 111T434 127T442 133T463 135H468Q494 135 494 117Q494 110 489 97T468 66T431 32T373 5T292 -6Q181 -6 107 55T32 225ZM383 276Q377 346 348 374T280 402Q253 402 230 390T195 357Q179 331 176 279V266H383V276Z"></path><path id="MJX-2-TEX-B-1D41F" d="M308 0Q290 3 172 3Q58 3 49 0H40V62H109V382H42V444H109V503L110 562L112 572Q127 625 178 658T316 699Q318 699 330 699T348 700Q381 698 404 687T436 658T449 629T452 606Q452 576 432 557T383 537Q355 537 335 555T314 605Q314 635 328 649H325Q311 649 293 644T253 618T227 560Q226 555 226 498V444H340V382H232V62H318V0H308Z"></path><path id="MJX-2-TEX-B-1D42B" d="M405 293T374 293T324 312T305 361Q305 378 312 394Q315 397 315 399Q305 399 294 394T266 375T238 329T222 249Q221 241 221 149V62H308V0H298Q280 3 161 3Q47 3 38 0H29V62H98V210V303Q98 353 96 363T83 376Q69 380 42 380H29V442H32L118 446Q204 450 205 450H210V414L211 378Q247 449 315 449H321Q384 449 413 422T442 360Q442 332 424 313Z"></path><path id="MJX-2-TEX-B-1D427" d="M40 442Q217 450 218 450H224V407L225 365Q233 378 245 391T289 422T362 448Q374 450 398 450Q428 450 448 447T491 434T529 402T551 346Q553 335 554 198V62H623V0H614Q596 3 489 3Q374 3 365 0H356V62H425V194V275Q425 348 416 373T371 399Q326 399 288 370T238 290Q236 281 235 171V62H304V0H295Q277 3 171 3Q64 3 46 0H37V62H106V210V303Q106 353 104 363T91 376Q77 380 50 380H37V442H40Z"></path><path id="MJX-2-TEX-B-1D41C" d="M447 131H458Q478 131 478 117Q478 112 471 95T439 51T377 9Q330 -6 286 -6Q196 -6 135 35Q39 96 39 222Q39 324 101 384Q169 453 286 453Q359 453 411 431T464 353Q464 319 445 302T395 284Q360 284 343 305T325 353Q325 380 338 396H333Q317 398 295 398H292Q280 398 271 397T245 390T218 373T197 338T183 283Q182 275 182 231Q182 199 184 180T193 132T220 85T270 57Q289 50 317 50H326Q385 50 414 115Q419 127 423 129T447 131Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mstyle" transform="scale(1.73)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D411" xlink:href="#MJX-2-TEX-B-1D411"></use></g><g data-mml-node="mi" transform="translate(862,0)"><use data-c="1D41E" xlink:href="#MJX-2-TEX-B-1D41E"></use></g><g data-mml-node="mi" transform="translate(1389,0)"><use data-c="1D41F" xlink:href="#MJX-2-TEX-B-1D41F"></use></g><g data-mml-node="mi" transform="translate(1841,0)"><use data-c="1D41E" xlink:href="#MJX-2-TEX-B-1D41E"></use></g><g data-mml-node="mi" transform="translate(2368,0)"><use data-c="1D42B" xlink:href="#MJX-2-TEX-B-1D42B"></use></g><g data-mml-node="mi" transform="translate(2842,0)"><use data-c="1D41E" xlink:href="#MJX-2-TEX-B-1D41E"></use></g><g data-mml-node="mi" transform="translate(3369,0)"><use data-c="1D427" xlink:href="#MJX-2-TEX-B-1D427"></use></g><g data-mml-node="mi" transform="translate(4008,0)"><use data-c="1D41C" xlink:href="#MJX-2-TEX-B-1D41C"></use></g><g data-mml-node="mi" transform="translate(4519,0)"><use data-c="1D41E" xlink:href="#MJX-2-TEX-B-1D41E"></use></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle mathsize="1.73em"><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi mathvariant="bold">R</mi><mi mathvariant="bold">e</mi><mi mathvariant="bold">f</mi><mi mathvariant="bold">e</mi><mi mathvariant="bold">r</mi><mi mathvariant="bold">e</mi><mi mathvariant="bold">n</mi><mi mathvariant="bold">c</mi><mi mathvariant="bold">e</mi></mrow></mrow></mstyle></math></mjx-assistive-mml></mjx-container><script type="math/tex">\LARGE{\bf{Reference}}</script></p><h2 id='1-nodejs-介绍'><span>1. Node.js 介绍</span></h2><ol start='' ><li><p><span>概念：Node.js 是一个开源的，跨平台的 JavaScript 运行环境。</span></p></li><li><p><span>作用</span></p><ul><li><p><span>开发服务器应用</span></p></li><li><p><span>开发工具类应用：如 Webpack、Vite、Babel</span></p></li><li><p><span>开发桌面端应用：如 VSCode</span></p></li></ul></li><li><p><a href='https://nodejs.org/en/download'><span>Node.js 下载地址</span></a></p><blockquote><p><span>p.s. 可以在命令行通过 </span><code>node -v</code><span> 检查是否安装成功</span></p></blockquote></li><li><p><span>使用 Node.js 运行 JavaScript 代码：</span><code>node xxx.js</code></p></li><li><p><span>Node.js 中不能使用 BOM 和 DOM 对象</span></p><ul><li><p><span>浏览器中的 JavaScript</span></p><ul><li><p><span>核心语法：ECMAScript</span></p></li><li><p><span>Web API</span></p><ul><li><p><span>DOM、BOM、AJAX、Storage、alert/confirm</span></p></li><li><p><span>console、定时器</span></p></li><li><p><span>.....</span></p></li></ul></li></ul></li><li><p><span>Node.js 中的 JavaScript</span></p><ul><li><p><span>核心语法：ECMAScript</span></p></li><li><p><span>Node API</span></p><ul><li><p><span>fs、url、http、util、path</span></p></li><li><p><span>console、定时器</span></p></li><li><p><span>......</span></p></li></ul></li></ul></li><li><p><span>说明</span></p><ul><li><p><span>Node.js 和 浏览器共有支持的 API 是 console 和定时器</span></p></li><li><p><span>Node.js 中的顶级对象是 </span><code>global</code><span> ，也可以使用 </span><code>globalThis</code><span> 访问；浏览器中的顶级对象是 </span><code>window</code></p></li></ul></li></ul></li></ol><h2 id='2-buffer'><span>2. Buffer</span></h2><ol start='' ><li><p><span>概念：Buffer 是一个</span><strong><span>类似于数组</span></strong><span>的对象，表示</span><strong><span>固定长度</span></strong><span>的</span><strong><span>字节（byte）序列</span></strong><span>，其本质是一段内存空间，专用于处理</span><strong><span>二进制数据</span></strong><span>。</span></p></li><li><p><span>特点</span></p><ul><li><p><span>大小固定无法修改</span></p></li><li><p><span>性能较好，直接操作计算机内存</span></p></li><li><p><span>每个元素的大小为 </span><code>1 byte</code></p></li></ul></li><li><p><a href='./CODES/1-buffer-简单使用.js'><span>Buffer 的简单使用</span></a></p><ul><li><p><span>Buffer 的创建</span></p><ul><li><p><code>Buffer.alloc(n)</code></p></li><li><p><code>Buffer.allocUnsafe(n)</code></p></li><li><p><code>Buffer.from(obj)</code></p></li></ul></li><li><p><span>Buffer 与字符串转化</span></p><ul><li><p><span>Buffer =&gt; String: </span><code>bufObj.toString()</code></p></li><li><p><span>String =&gt; Buffer: </span><code>Buffer.from(strObj)</code></p></li></ul></li><li><p><span>Buffer 的读写</span></p><ul><li><p><span>读：</span><code>bufObj[index]</code></p></li><li><p><span>写：</span><code>bufObj[index] = newValue</code></p></li></ul></li></ul></li></ol><h2 id='3-fs-模块'><span>3. fs 模块</span></h2><h3 id='31-简要介绍'><span>3.1 简要介绍</span></h3><ol start='' ><li><p><span>概念：</span><code>fs</code><span> 全称为 </span><code>file system</code><span>，翻译为文件系统，是 </span><code>Node.js</code><span> 中的</span><strong><span>内置模块</span></strong><span>，可以实现与硬盘的交互，如文件的创建、删除、重命名、移动；文件内容的写入、读取；文件夹的相关操作</span></p></li><li><p><span>相关操作</span></p><ul><li><p><a href='#32-文件的写入'><span>文件写入</span></a></p></li><li><p><a href='#33-文件的读取'><span>文件读取</span></a></p></li><li><p><a href='#34-文件文件夹的移动重命名'><span>文件移动与重命名</span></a></p></li><li><p><a href='#35-文件删除'><span>文件删除</span></a></p></li><li><p><a href='#36-文件夹操作'><span>文件夹操作</span></a></p></li><li><p><a href='#37-查看资源状态'><span>查看资源状态</span></a></p></li></ul></li><li><p><a href='./CODES/2-fs-模块导入.js'><span>模块的导入</span></a><span> </span><code>require(&#39;fs&#39;)</code></p></li></ol><h3 id='32-文件的写入'><span>3.2 文件的写入</span></h3><p><span>文件写入就是将</span><strong><span>数据</span></strong><span>保存到</span><strong><span>文件</span></strong><span>中，可以使用如下四种方式来实现文件写入。</span></p><ol start='' ><li><p><a href='./CODES/3-fs-异步写入.js'><span>异步写入</span></a><span> </span><code>fs.writeFile(file, data[, option], err =&gt; {}): Undefined</code></p></li><li><p><a href='./CODES/4-fs-同步写入.js'><span>同步写入</span></a><span> </span><code>fs.writeFileSync(file, data[, options]): Undefined</code></p></li><li><p><a href='./CODES/5-fs-追加写入.js'><span>追加写入</span></a></p><ul><li><p><span>异步追加写入 </span><code>fs.appendFile(file, data[, options], err =&gt; {}): Undefined</code></p></li><li><p><span>同步追加写入 </span><code>fs.appendFile(file, data[, options]): Undefined</code></p></li></ul></li><li><p><a href='./CODES/6-fs-流式写入.js'><span>流式写入</span></a></p><ul><li><p><span>创建流对象 </span><code>fs.createWriteStream(file[, option]): Object</code></p></li><li><p><span>向流中写入 </span><code>ws.write(data): Undefined</code></p></li><li><p><span>关闭流对象 </span><code>ws.end([() =&gt; {}]): Undefined</code></p></li></ul></li></ol><h3 id='33-文件的读取'><span>3.3 文件的读取</span></h3><p><span>文件读取就是从</span><strong><span>文件</span></strong><span>中提取出其中的</span><strong><span>数据</span></strong><span>，可以使用如下三种方式实现文件读取。</span></p><ol start='' ><li><p><a href='./CODES/7-fs-异步读取.js'><span>异步读取</span></a><span> </span><code>fs.readFile(file[, options], (err, data) =&gt; {}): Undefined</code></p></li><li><p><a href='./CODES/8-fs-同步读取.js'><span>同步读取</span></a><span> </span><code>fs.readFileSync(file[, options]): Object(Buffer)</code></p></li><li><p><a href='./CODES/9-fs-流式读取.js'><span>流式读取</span></a></p><ul><li><p><span>读取流对象 </span><code>fs.createReadStream(file[, options]): Object</code></p></li><li><p><span>从流中读取 </span><code>rs.on(&#39;data&#39;, chunk =&gt; {}): Undefined</code></p></li><li><p><span>关闭流对象 </span><code>rs.on(&#39;end&#39;, () =&gt; {})): Undefined</code></p></li></ul></li></ol><h3 id='34-文件文件夹的移动重命名'><span>3.4 文件/文件夹的移动/重命名</span></h3><p><span>关于</span><a href='./CODES/11-fs-移动与重命名.js'><span>移动/重命名文件/文件夹</span></a><span>的操作，Node.js 有两种实现</span></p><ul><li><p><span>异步实现 </span><code>fs.rename(oldPath, newPath, err =&gt; {})</code></p></li><li><p><span>同步实现 </span><code>fs.renameSync(oldPath, newPath)</code></p></li></ul><h3 id='35-文件删除'><span>3.5 文件删除</span></h3><p><span>关于</span><a href='./CODES/12-fs-文件删除.js'><span>删除文件</span></a><span>的操作，Node.js 也提供了两种实现</span></p><ul><li><p><span>异步实现</span></p><ul><li><p><code>fs.unlink(path, err =&gt; {})</code></p></li><li><p><code>fs.rm(path, err =&gt; {})</code></p></li></ul></li><li><p><span>同步实现</span></p><ul><li><p><code>fs.unlinkSync(path)</code></p></li><li><p><code>fs.rmSync(path)</code></p></li></ul></li></ul><h3 id='36-文件夹操作'><span>3.6 文件夹操作</span></h3><ol start='' ><li><p><a href='./CODES/13-fs-文件夹创建.js'><span>文件夹的创建</span></a></p><ul><li><p><span>异步实现 </span><code>fs.mkdir(path[, options], (err) =&gt; {})</code></p></li><li><p><span>同步实现 </span><code>fs.mkdirSync(path[, options])</code></p></li></ul></li><li><p><a href='./CODES/14-fs-文件夹读取.js'><span>文件夹的读取</span></a></p><ul><li><p><span>异步实现 </span><code>fs.readdir(path[, options], (err, data) =&gt; {})</code></p></li><li><p><span>同步实现 </span><code>fs.readdirSync(path[, options]): Array</code></p></li></ul></li><li><p><a href='./CODES/15-fs-文件夹删除.js'><span>文件夹的删除</span></a></p><ul><li><p><span>异步实现 </span><code>fs.rmdir(path[, options], err =&gt; {})</code></p></li><li><p><span>同步实现 </span><code>fs.rmdirSync(path[, options])</code></p></li></ul></li></ol><blockquote><p><span>p.s. 我们可以通过设置 </span><code>options={recursive: true}</code><span> 的方式实现文件夹的递归创建与递归删除，不过实现递归删除时，更推荐使用 </span><code>rm/rmSync</code><span> 方法</span></p></blockquote><h3 id='37-查看资源状态'><span>3.7 查看资源状态</span></h3><p><span>关于</span><a href='./CODES/16-fs-查看资源状态.js'><span>查看资源状态</span></a><span>的操作，Node.js 提供了两种实现</span></p><ul><li><p><span>异步实现 </span><code>fs.stat(path[, options], (err, data) =&gt; {})</code></p></li><li><p><span>同步实现 </span><code>fs.stat(path[, options]): data</code></p></li></ul><h3 id='38-相对路径与绝对路径'><span>3.8 相对路径与绝对路径</span></h3><ol start='' ><li><p><span>在使用 fs 模块对资源进行操作时，路径通常有</span><strong><span>绝对路径</span></strong><span>和</span><strong><span>相对路径</span></strong><span>两种选择，</span><a href='./CODES/17-fs-相对路径与绝对路径.js'><span>规则</span></a><span>如下</span></p><ul><li><p><span>相对路径</span></p><ul><li><p><code>./xxx.txt</code><span> 当前目录下的 xxx.txt 文件</span></p></li><li><p><code>xxx.txt</code><span> 当前目录下的 xxx.txt 文件</span></p></li><li><p><code>../xxx.txt</code><span> 当前目录下的上一级目录中的 xxx.txt 文件</span></p></li></ul></li><li><p><span>绝对路径</span></p><ul><li><p><code>D:/xxx.txt</code><span> 表示 D 盘根路径下的 xxx.txt 文件（windows 系统下的绝对路径）</span></p></li><li><p><code>/xxx.txt</code><span> 表示当前根目录下的 xxx.txt 文件（Linux 系统下的绝对路径）</span></p></li></ul></li></ul><blockquote><p><span>p.s. fs 中的绝对路径和相对路径的写法与 url 中的写法略有差异</span></p></blockquote></li><li><p><span>因为 fs 中的相对路径参考的不是当前文件的所在目录，而是命令行中的工作目录，所以在使用相对路径时，需要使用 </span><code>__dirname</code><span> 来对</span><a href='./CODES/18-fs-相对路径的修正.js'><span>相对路径进行修正</span></a><span>，使其变成绝对路径，从而避免 bug 的出现</span></p><ul><li><p><code>绝对路径 = __dirname + 相对路径</code></p></li></ul></li></ol><h2 id='4-path-模块'><span>4. path 模块</span></h2><p><span>path 模块提供了操作路径的功能，有如下几个</span><a href='./CODES/20-path-常用API.js'><span>常用 API</span></a></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>API</span></th><th style='text-align:center;' ><span>解释</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>path.resolve(绝对路径, 相对路径)</span></td><td style='text-align:center;' ><span>根据绝对路径和相对路径拼接出一个规范的绝对路径</span></td></tr><tr><td style='text-align:center;' ><span>path.sep</span></td><td style='text-align:center;' ><span>获取当前操作系统的路径分隔符</span></td></tr><tr><td style='text-align:center;' ><span>path.parse(路径)</span></td><td style='text-align:center;' ><span>解析当前路径，返回路径对象</span></td></tr><tr><td style='text-align:center;' ><span>path.basename(路径)</span></td><td style='text-align:center;' ><span>解析当前路径，返回路径对象的名称（文件名）</span></td></tr><tr><td style='text-align:center;' ><span>path.dirname(路径)</span></td><td style='text-align:center;' ><span>解析当前路径，返回路径对象的所在目录</span></td></tr><tr><td style='text-align:center;' ><span>path.extname(路径)</span></td><td style='text-align:center;' ><span>解析当前路径，返回路径对象的扩展名</span></td></tr></tbody></table></figure><h2 id='5-http-模块'><span>5. http 模块</span></h2><h3 id='51-http-协议'><span>5.1 HTTP 协议</span></h3><ol start='' ><li><p><span>概念：</span><strong><span>HTTP</span></strong><span>（hyper transport protocol）协议，译为</span><strong><span>超文本传输协议</span></strong><span>，是一种基于 TCP/IP 的应用层通信协议，详细规定了</span><strong><span>浏览器和服务器</span></strong><span>之间的通信规则。</span></p><blockquote><p><span>p.s. 协议：双方必须共同遵从的一组约定</span></p></blockquote></li><li><p><span>HTTP 协议的主要内容</span></p><ul><li><p><strong><span>请求</span></strong><span>：</span><strong><span>浏览器向服务器</span></strong><span>发送数据，该数据称之为</span><strong><span>请求报文</span></strong></p></li><li><p><strong><span>响应</span></strong><span>：</span><strong><span>服务器向浏览器</span></strong><span>发送数据，该数据称之为</span><strong><span>响应报文</span></strong></p></li></ul><blockquote><p><span>p.s. 报文：简单理解为一堆字符串</span></p></blockquote></li><li><p><span>报文查看与举例</span></p><ul><li><p><span>可以使用 </span><code>fiddler</code><span> 软件查看浏览器向服务器发送的请求报文和服务器向浏览器发送的响应报文，该软件处于浏览器和服务器之间，接受浏览器的请求并发送给服务器，接受服务器的响应并发送给浏览器</span></p></li><li><p><span>当我们在浏览器访问 </span><a href='http://www.baidu.com' target='_blank' class='url'>www.baidu.com</a><span> 时，第一个请求报文与对应的响应报文内容如下</span></p><ul><li><p><span>请求报文（Request）</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="html" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="html"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; GET https://www.baidu.com/ HTTP/2</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; host: www.baidu.com</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; sec-ch-ua: "Google Chrome";v="123", "Not:A-Brand";v="8", "Chromium";v="123"</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; sec-ch-ua-mobile: ?0</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; sec-ch-ua-platform: "Windows"</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; upgrade-insecure-requests: 1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/123.0.0.0 Safari/537.36</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; sec-fetch-site: none</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; sec-fetch-mode: navigate</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; sec-fetch-user: ?1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; sec-fetch-dest: document</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; accept-encoding: gzip, deflate, br, zstd</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; accept-language: zh-CN,zh;q=0.9</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 392px;"></div><div class="CodeMirror-gutters" style="display: none; height: 392px;"></div></div></div></pre></li></ul></li></ul></li></ol><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; ```</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> - 响应报文</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; ```html</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  HTTP/1.1 200 OK</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  Content-Encoding: gzip</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  Content-Security-Policy: frame-ancestors 'self' https://chat.baidu.com http://mirror-chat.baidu.com https://fj-chat.baidu.com https://hba-chat.baidu.com https://hbe-chat.baidu.com https://njjs-chat.baidu.com https://nj-chat.baidu.com https://hna-chat.baidu.com https://hnb-chat.baidu.com http://debug.baidu-int.com;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  Content-Type: text/html; charset=utf-8</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  Date: Sat, 13 Apr 2024 04:35:33 GMT</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  P3p: CP=" OTI DSP COR IVA OUR IND COM "</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  P3p: CP=" OTI DSP COR IVA OUR IND COM "</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  Server: BWS/1.1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  Set-Cookie: BAIDUID=A8FE4EF62D60DAF270D0C07E9A4CEA5C:FG=1; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  Set-Cookie: BIDUPSID=A8FE4EF62D60DAF270D0C07E9A4CEA5C; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  Set-Cookie: PSTM=1712982933; expires=Thu, 31-Dec-37 23:55:55 GMT; max-age=2147483647; path=/; domain=.baidu.com</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  Set-Cookie: BAIDUID=A8FE4EF62D60DAF266BD0F16045E437C:FG=1; max-age=31536000; expires=Sun, 13-Apr-25 04:35:33 GMT; domain=.baidu.com; path=/; version=1; comment=bd</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  Traceid: 1712982933370247066618326354761719158631</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  X-Ua-Compatible: IE=Edge,chrome=1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  X-Xss-Protection: 1;mode=block</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  Content-Length: 102530</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  &lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv="Content-Type" content="text/html;charset=utf-8"&gt;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  &lt;!-- 以下内容省略 --&gt;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; ```</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 714px;"></div><div class="CodeMirror-gutters" style="display: none; height: 714px;"></div></div></div></pre><h4 id='请求报文'><span>请求报文</span></h4><p><span>请求报文由</span><strong><span>请求行、请求头、空行、请求体</span></strong><span>组成</span></p><ol start='' ><li><p><span>请求行</span></p><ul><li><p><span>请求行包含三部分内容：</span><strong><span>请求方法、请求 URL、HTTP 协议版本号</span></strong></p></li><li><p><span>请求方法：用于说明请求目的，常用 </span><strong><span>GET</span></strong><span> 和 </span><strong><span>POST</span></strong></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>方法</span></th><th style='text-align:center;' ><span>作用</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><strong><span>GET</span></strong></td><td style='text-align:center;' ><span>获取数据</span></td></tr><tr><td style='text-align:center;' ><strong><span>POST</span></strong></td><td style='text-align:center;' ><span>新增数据</span></td></tr><tr><td style='text-align:center;' ><span>PUT/PATCH</span></td><td style='text-align:center;' ><span>更新数据</span></td></tr><tr><td style='text-align:center;' ><span>DELETE</span></td><td style='text-align:center;' ><span>删除数据</span></td></tr><tr><td style='text-align:center;' ><span>HEAD/OPTIONS/CONNECT/TRACE</span></td><td style='text-align:center;' ><span>使用较少，不做介绍</span></td></tr></tbody></table></figure></li><li><p><span>请求 URL：Uniform Resource Locator，翻译为统一资源定位符，用于定位服务器中的资源</span></p><ul><li><p><span>URL 包括：</span><strong><span>协议名称、主机名（可以是域名或 IP 地址）、端口号、路径、查询字符串、锚点链接</span></strong></p></li><li><p><span>URL 举例： </span><a href='http://www.baidu.com:80/index.html?a=100&amp;b=200#logo' target='_blank' class='url'>http://www.baidu.com:80/index.html?a=100&b=200#logo</a></p></li><li><p><span>协议名：如上述例子中的 </span><code>http</code><span>，协议名有 </span><code>http</code><span>、</span><code>https</code><span>、</span><code>ftp</code><span>、</span><code>ssh</code><span> 等</span></p></li><li><p><span>主机名：如上述例子中的 </span><code>www.baidu.com</code><span>，除了域名，主机名也可以是 IP 地址，用于定位一台服务器</span></p></li><li><p><span>端口号：如上述例子中的 </span><code>80</code></p></li><li><p><span>路径：如上述例子中的 </span><code>/index.html</code><span>，用于定位一台服务器中的某一个资源</span></p></li><li><p><span>查询字符串：如上述例子中的 </span><code>a=100&amp;b=200</code><span>，是键值字符串</span></p></li><li><p><span>锚点链接：如上述例子中的 </span><code>#logo</code><span>，又称哈希</span></p></li></ul></li><li><p><span>HTTP 协议版本号</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>版本号</span></th><th style='text-align:center;' ><span>发布时间</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>1.0</span></td><td style='text-align:center;' ><span>1996</span></td></tr><tr><td style='text-align:center;' ><span>1.1</span></td><td style='text-align:center;' ><span>1999</span></td></tr><tr><td style='text-align:center;' ><span>2</span></td><td style='text-align:center;' ><span>2015</span></td></tr><tr><td style='text-align:center;' ><span>3</span></td><td style='text-align:center;' ><span>2018</span></td></tr></tbody></table></figure></li><li><p><span>请求行举例 </span><code>GET https://www.baidu.com/ HTTP/1.1</code></p><ul><li><p><span>请求方法 </span><code>GET</code></p></li><li><p><span>URL </span><code>https://www.baodu.com/</code></p></li><li><p><span>HTTP 版本号 </span><code>HTTP/1.1</code></p></li></ul></li></ul></li><li><p><span>请求头：由一系列的键值对组成，关于请求头键值对的含义及取值见 </span><a href='https://developer.mozilla.org/en-US/docs/web/http/headers' target='_blank' class='url'>https://developer.mozilla.org/en-US/docs/web/http/headers</a></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>请求头</span></th><th style='text-align:center;' ><span>解释</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>Host</span></td><td style='text-align:center;' ><span>主机名</span></td></tr><tr><td style='text-align:center;' ><span>Connection</span></td><td style='text-align:center;' ><span>连接的设置 keep-alive（保持连接）；close（关闭连接）</span></td></tr><tr><td style='text-align:center;' ><span>Cache-Control</span></td><td style='text-align:center;' ><span>缓存控制 max-age = 0 （没有缓存）</span></td></tr><tr><td style='text-align:center;' ><span>Upgrade-Insecure-Requests</span></td><td style='text-align:center;' ><span>将网页中的http请求转化为https请求（很少用）老网站升级</span></td></tr><tr><td style='text-align:center;' ><span>User-Agent</span></td><td style='text-align:center;' ><span>用户代理，客户端字符串标识，服务器可以通过这个标识来识别这个请求来自哪个客户端 ，一般在PC端和手机端的区分</span></td></tr><tr><td style='text-align:center;' ><span>Accept</span></td><td style='text-align:center;' ><span>设置浏览器接收的数据类型</span></td></tr><tr><td style='text-align:center;' ><span>Accept-Encoding</span></td><td style='text-align:center;' ><span>设置接收的压缩方式</span></td></tr><tr><td style='text-align:center;' ><span>Accept-Language</span></td><td style='text-align:center;' ><span>设置接收的语言 q=0.7 为喜好系数，满分为1</span></td></tr><tr><td style='text-align:center;' ><span>Cookie</span></td><td style='text-align:center;' ><span>略</span></td></tr></tbody></table></figure></li><li><p><span>空行</span></p></li><li><p><span>请求体：内容格式十分灵活，可以是任意内容，对于 GET 请求，请求体可以为空；对于 POST 请求，请求体可以是字符串或 JSON。</span></p></li></ol><h4 id='响应报文'><span>响应报文</span></h4><p><span>与请求报文类似，响应报文由</span><strong><span>响应行、响应头、空行、响应体</span></strong><span>组成</span></p><ol start='' ><li><p><span>响应行</span></p><ul><li><p><span>响应行包含三部分内容：</span><strong><span>HTTP 协议版本号、响应状态码、响应状态描述</span></strong></p></li><li><p><span>HTTP 协议版本号：与请求行中的 HTTP 协议版本号相同</span></p></li><li><p><span>响应状态码：用于表示响应结果的状态，不同的响应状态码对应不同的含义，可以在 </span><a href='https://developer.mozilla.org/en-US/docs/Web/HTTP/status' target='_blank' class='url'>https://developer.mozilla.org/en-US/docs/Web/HTTP/status</a><span> 中查询状态码的含义</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>状态码</span></th><th style='text-align:center;' ><span>含义</span></th><th style='text-align:center;' ><span>状态描述</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>200</span></td><td style='text-align:center;' ><span>请求成功</span></td><td style='text-align:center;' ><span>OK</span></td></tr><tr><td style='text-align:center;' ><span>403</span></td><td style='text-align:center;' ><span>禁止请求</span></td><td style='text-align:center;' ><span>Forbidden</span></td></tr><tr><td style='text-align:center;' ><span>404</span></td><td style='text-align:center;' ><span>找不到资源</span></td><td style='text-align:center;' ><span>Not Found</span></td></tr><tr><td style='text-align:center;' ><span>500</span></td><td style='text-align:center;' ><span>服务器内部错误</span></td><td style='text-align:center;' ><span>Internal Server Error</span></td></tr><tr><td style='text-align:center;' ><span>1??</span></td><td style='text-align:center;' ><span>信息响应</span></td><td style='text-align:center;' >&nbsp;</td></tr><tr><td style='text-align:center;' ><span>2??</span></td><td style='text-align:center;' ><span>成功响应</span></td><td style='text-align:center;' >&nbsp;</td></tr><tr><td style='text-align:center;' ><span>3??</span></td><td style='text-align:center;' ><span>重定向消息</span></td><td style='text-align:center;' >&nbsp;</td></tr><tr><td style='text-align:center;' ><span>4??</span></td><td style='text-align:center;' ><span>客户端错误响应</span></td><td style='text-align:center;' >&nbsp;</td></tr><tr><td style='text-align:center;' ><span>5??</span></td><td style='text-align:center;' ><span>服务端错误响应</span></td><td style='text-align:center;' >&nbsp;</td></tr></tbody></table></figure></li><li><p><span>响应状态描述：响应状态描述与响应状态码一一对应</span></p></li><li><p><span>响应行举例 </span><code>HTTP/1.1 200 OK</code></p><ul><li><p><span>HTTP 协议版本号 </span><code>HTTP/1.1</code></p></li><li><p><span>响应状态码 </span><code>200</code></p></li><li><p><span>响应状态描述 </span><code>OK</code></p></li></ul></li></ul></li><li><p><span>响应头：记录了与服务器相关的内容，与请求头相同，由一系列的键值对组成，关于响应头键值对的含义及取值见 </span><a href='https://developer.mozilla.org/en-US/docs/web/http/headers' target='_blank' class='url'>https://developer.mozilla.org/en-US/docs/web/http/headers</a></p><blockquote><p><span>p.s. 响应头中的键名可能无法在官方网站查询到，这是因为网站可以自定义一些键名</span></p></blockquote><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>响应头</span></th><th style='text-align:center;' ><span>解释</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>Cache-Control</span></td><td style='text-align:center;' ><span>缓存控制，private 则只允许客户端缓存数据</span></td></tr><tr><td style='text-align:center;' ><span>Connection</span></td><td style='text-align:center;' ><span>链接设置</span></td></tr><tr><td style='text-align:center;' ><span>Content-Type:text/html;charset=utf-8</span></td><td style='text-align:center;' ><span>设置响应体的数据类型以及字符集，响应体为html，字符集 utf-8</span></td></tr><tr><td style='text-align:center;' ><span>Content-Length</span></td><td style='text-align:center;' ><span>响应体的长度，单位为字节</span></td></tr></tbody></table></figure></li><li><p><span>空行</span></p></li><li><p><span>响应体：与请求体相同，内容格式十分灵活，常见类型有 HTML、CSS、JS、图片、JSON</span></p></li></ol><h3 id='52-ip-与端口'><span>5.2 IP 与端口</span></h3><ol start='' ><li><p><span>IP 是什么？</span></p><ul><li><p><span>IP 又称 IP 地址，是一个数字标识，用于</span><strong><span>标识网络中的计算机设备，实现设备间的通信</span></strong></p></li><li><p><span>IP 的本质是一个 </span><strong><span>32</span></strong><span> 位的二进制数字，以 8 位为一组，则可以得到 </span><code>xxx.xxx.xxx.xxx</code><span> 形式的通常情况下的十进制的表示</span></p></li><li><p><span>IP 的最大数量是 </span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="8.198ex" height="1.937ex" role="img" focusable="false" viewBox="0 -833.9 3623.7 855.9" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.05ex;"><defs><path id="MJX-3-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-3-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-3-TEX-N-2248" d="M55 319Q55 360 72 393T114 444T163 472T205 482Q207 482 213 482T223 483Q262 483 296 468T393 413L443 381Q502 346 553 346Q609 346 649 375T694 454Q694 465 698 474T708 483Q722 483 722 452Q722 386 675 338T555 289Q514 289 468 310T388 357T308 404T224 426Q164 426 125 393T83 318Q81 289 69 289Q55 289 55 319ZM55 85Q55 126 72 159T114 210T163 238T205 248Q207 248 213 248T223 249Q262 249 296 234T393 179L443 147Q502 112 553 112Q609 112 649 141T694 220Q694 249 708 249T722 217Q722 153 675 104T555 55Q514 55 468 76T388 123T308 170T224 192Q164 192 125 159T83 84Q80 55 69 55Q55 55 55 85Z"></path><path id="MJX-3-TEX-N-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-3-TEX-N-32"></use></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use data-c="33" xlink:href="#MJX-3-TEX-N-33"></use><use data-c="32" xlink:href="#MJX-3-TEX-N-32" transform="translate(500,0)"></use></g></g></g><g data-mml-node="mo" transform="translate(1567.9,0)"><use data-c="2248" xlink:href="#MJX-3-TEX-N-2248"></use></g><g data-mml-node="mn" transform="translate(2623.7,0)"><use data-c="34" xlink:href="#MJX-3-TEX-N-34"></use><use data-c="33" xlink:href="#MJX-3-TEX-N-33" transform="translate(500,0)"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow data-mjx-texclass="ORD"><mn>32</mn></mrow></msup><mo>≈</mo><mn>43</mn></math></mjx-assistive-mml></mjx-container><script type="math/tex">2^{32}≈43</script><span>亿 &lt; </span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.557ex" role="img" focusable="false" viewBox="0 -666 1000 688" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.05ex;"><defs><path id="MJX-4-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path><path id="MJX-4-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="38" xlink:href="#MJX-4-TEX-N-38"></use><use data-c="30" xlink:href="#MJX-4-TEX-N-30" transform="translate(500,0)"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>80</mn></math></mjx-assistive-mml></mjx-container><script type="math/tex">80</script><span> 亿的人口数量，因此为了解决 IP 不够用的问题，现常采用</span><strong><span>区域共享和家庭共享</span></strong><span>的方式来应对。</span></p></li></ul></li><li><p><span>家庭共享</span></p><ul><li><p><span>一个家庭中的所有设备处于一个局域网中，其 IP 属于</span><strong><span>局域网 IP 或私网 IP</span></strong><span>，局域网中的设备之间可以相互通信，但是无法与外界设备通信</span></p></li><li><p><span>当连接互联网后，此时家庭中的设备才可以与外界通信，同时家庭被分配一个 IP 称之为</span><strong><span>广域网 IP 或公网 IP</span></strong><span>，家庭中的所有设备都共享这个公网 IP</span></p></li></ul></li><li><p><span>IP 的分类</span></p><ul><li><p><span>本地回环地址（指向本机的 IP 地址）</span></p><ul><li><p><code>127.0.0.1 ~ 127.255.255.254</code></p></li></ul></li><li><p><span>局域网 IP（私网 IP）</span></p><ul><li><p><code>192.168.0.0 ~ 192.168.255.255</code></p></li><li><p><code>172.16.0.0 ~ 172.31.255.255</code></p></li><li><p><code>10.0.0.0 ~ 10.255.255.255</code></p></li></ul></li><li><p><span>广域网 IP（公网 IP）：除上述之外的 IP</span></p></li></ul></li><li><p><span>端口是什么？</span></p><ul><li><p><span>端口是计算机中应用程序的数字标识，用于实现</span><strong><span>不同计算机设备应用程序之间的通信</span></strong></p></li><li><p><span>一台计算机可以有 </span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="22.905ex" height="2.452ex" role="img" focusable="false" viewBox="0 -833.9 10124.1 1083.9" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-5-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-5-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-5-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path id="MJX-5-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-5-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path id="MJX-5-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-5-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-5-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-5-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-5-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-5-TEX-N-32"></use></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-5-TEX-N-31"></use><use data-c="36" xlink:href="#MJX-5-TEX-N-36" transform="translate(500,0)"></use></g></g></g><g data-mml-node="mo" transform="translate(1567.9,0)"><use data-c="3D" xlink:href="#MJX-5-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(2623.7,0)"><use data-c="36" xlink:href="#MJX-5-TEX-N-36"></use><use data-c="35" xlink:href="#MJX-5-TEX-N-35" transform="translate(500,0)"></use><use data-c="35" xlink:href="#MJX-5-TEX-N-35" transform="translate(1000,0)"></use><use data-c="33" xlink:href="#MJX-5-TEX-N-33" transform="translate(1500,0)"></use><use data-c="36" xlink:href="#MJX-5-TEX-N-36" transform="translate(2000,0)"></use></g><g data-mml-node="mo" transform="translate(5123.7,0)"><use data-c="28" xlink:href="#MJX-5-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(5512.7,0)"><use data-c="30" xlink:href="#MJX-5-TEX-N-30"></use></g><g data-mml-node="mo" transform="translate(6234.9,0)"><use data-c="2212" xlink:href="#MJX-5-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(7235.1,0)"><use data-c="36" xlink:href="#MJX-5-TEX-N-36"></use><use data-c="35" xlink:href="#MJX-5-TEX-N-35" transform="translate(500,0)"></use><use data-c="35" xlink:href="#MJX-5-TEX-N-35" transform="translate(1000,0)"></use><use data-c="33" xlink:href="#MJX-5-TEX-N-33" transform="translate(1500,0)"></use><use data-c="35" xlink:href="#MJX-5-TEX-N-35" transform="translate(2000,0)"></use></g><g data-mml-node="mo" transform="translate(9735.1,0)"><use data-c="29" xlink:href="#MJX-5-TEX-N-29"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow data-mjx-texclass="ORD"><mn>16</mn></mrow></msup><mo>=</mo><mn>65536</mn><mo stretchy="false">(</mo><mn>0</mn><mo>−</mo><mn>65535</mn><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container><script type="math/tex">2^{16}=65536(0-65535)</script><span> 个端口，一个应用程序可以使用</span><strong><span>一个或多个端口</span></strong></p></li></ul></li></ol><h3 id='53-创建-http-服务'><span>5.3 创建 HTTP 服务</span></h3><p><span>我们可以使用 Node.js 提供的 </span><code>http</code><span> 模块</span><a href='./CODES/21-http-创建http服务.js'><span>创建一个 http 服务</span></a><span>，用于接收浏览器请求并返回响应，实现浏览器与服务之间的通信，不过首先，我们应该使用 </span><code>require(&#39;http&#39;)</code><span> 导入 </span><code>http</code><span> 模块</span></p><ol start='' ><li><p><span>创建 http 服务 </span><code>http.create((request, response) =&gt; {}): object</code></p><ul><li><p><code>response.setHeader(&#39;content-type&#39;, &#39;text/html;charset=utf-8&#39;)</code></p></li><li><p><code>response.end(msg)</code></p></li></ul></li><li><p><span>启动 http 服务 </span><code>server.listen(port, () =&gt; {})</code></p></li><li><p><span>测试 http 服务 浏览器中输入 </span><code>http://127.0.0.1:port</code></p></li></ol><h3 id='54-通过浏览器查看-http-报文'><span>5.4 通过浏览器查看 HTTP 报文</span></h3><p><code>F12</code><span> 打开浏览器的检查，通过网络选项卡可以看到请求报文和响应报文的详细内容</span></p><ol start='' ><li><p><span>请求报文</span></p><ul><li><p><span>请求行与请求头</span></p><p><img src="https://cdn.jsdelivr.net/gh/Nasir1423/blog-img@main/20240413164120.png" style="width: 70%"/></p></li><li><p><span>请求体</span></p><p><img src="https://cdn.jsdelivr.net/gh/Nasir1423/blog-img@main/20240413164533.png" style="width: 70%"/></p></li><li><p><span>URL 中的查询字符串</span></p><p><img src="https://cdn.jsdelivr.net/gh/Nasir1423/blog-img@main/20240413164707.png" style="width: 70%"/></p></li></ul></li><li><p><span>响应报文</span></p><ul><li><p><span>响应行与响应头</span></p><p><img src="https://cdn.jsdelivr.net/gh/Nasir1423/blog-img@main/20240413164917.png" style="width: 70%"/></p></li><li><p><span>响应体</span></p><p><img src="https://cdn.jsdelivr.net/gh/Nasir1423/blog-img@main/20240413165000.png" style="width: 70%"/></p></li></ul></li></ol><h3 id='55-获取-http-请求报文'><span>5.5 获取 HTTP 请求报文</span></h3><p><span>我们可以通过 </span><code>http.createServer</code><span> 中的回调函数中的 </span><code>request</code><span> 对象获取请求报文</span></p><ol start='' ><li><p><a href='./CODES/22-http-获取请求行和请求头.js'><span>获取请求行和请求头</span></a></p><ul><li><p><span>请求行</span></p><ul><li><p><span>请求方法 </span><code>request.method</code></p></li><li><p><span>请求路径 </span><code>request.url</code></p></li><li><p><span>请求版本 </span><code>request.httpVersion</code></p></li></ul></li><li><p><span>请求头 </span><code>request.headers</code></p></li></ul></li><li><p><a href='./CODES/23-http-获取请求体.js'><span>获取请求体</span></a></p><ul><li><p><code>request.on(&#39;data&#39;, chunk =&gt; {})</code></p></li><li><p><code>request.on(&#39;end&#39;, () =&gt; {})</code></p></li></ul></li><li><p><a href='./CODES/24-http-获取路径和查询字符串.js'><span>获取（请求行中的请求路径中的）路径和查询字符串</span></a></p><ul><li><p><span>通过 url 模块：首先通过 </span><code>require(&#39;url&#39;)</code><span> 导入 url 模块</span></p><ul><li><p><span>路径 </span><code>url.parse(request.url).pathname</code></p></li><li><p><span>查询字符串 </span><code>url.parse(request.url, true).query</code></p></li></ul></li><li><p><span>通过 URL 对象：首先通过 </span><code>new URL(request.url,&#39;http://127.0.0.1:port&#39;)</code><span> 创建 URL 对象</span></p><ul><li><p><span>路径 </span><code>url.pathname</code></p></li><li><p><span>查询字符串 </span><code>url.searchParams</code></p></li></ul></li></ul></li></ol><h3 id='56-设置-http-响应报文'><span>5.6 设置 HTTP 响应报文</span></h3><p><span>我们可以通过 </span><code>http.createServer</code><span> 中的回调函数中的 </span><code>request</code><span> 对象</span><a href='./CODES/26-http-设置响应报文.js'><span>设置响应报文</span></a></p><ol start='' ><li><p><span>设置响应行</span></p><ul><li><p><span>响应状态码 </span><code>response.statusCode = xxx</code></p></li><li><p><span>响应状态信息 </span><code>response.statusMessage = xxx</code></p></li></ul></li><li><p><span>设置响应头 </span><code>response.setHeader(头名, 头值)</code></p></li><li><p><span>设置响应体</span></p><ul><li><p><code>response.write(msg)</code></p></li><li><p><code>response.end(msg)</code></p></li></ul></li></ol><h3 id='57-网页资源的基本加载过程'><span>5.7 网页资源的基本加载过程</span></h3><ul><li><p><span>在网页资源加载的过程中，浏览器</span><strong><span>首先发送请求获取 HTML 内容</span></strong><span>，然后在解析 HTML 的过程中，向服务器发送其他资源的请求，如 CSS，JavaScript，图片等等</span></p></li><li><p><span>多个请求是</span><strong><span>并行</span></strong><span>发送的。</span></p></li></ul><h3 id='58-静态资源与动态资源'><span>5.8 静态资源与动态资源</span></h3><ol start='' ><li><p><strong><span>静态资源</span></strong></p></li></ol><ul><li><p><span>定义：内容长时间不发生改变的资源</span></p></li><li><p><span>举例：图片、视频、CSS、JS、HTML、字体文件等等</span></p></li></ul><ol start='2' ><li><p><strong><span>动态资源</span></strong></p></li></ol><ul><li><p><span>定义：内容经常更新的资源</span></p></li><li><p><span>举例：网站首页、搜索列表页面等等</span></p></li></ul><h3 id='59-静态资源目录'><span>5.9 静态资源目录</span></h3><ol start='' ><li><p><strong><span>静态资源目录</span></strong><span>（或称</span><strong><span>网站根目录</span></strong><span>）在一个 HTTP 服务器中是指</span><strong><span>用于存放静态资源文件的文件夹或目录</span></strong><span>。静态资源通常包括 HTML、CSS、JavaScript、图片、视频、字体文件等，它们在服务器上存储并被客户端（例如浏览器）请求和获取。</span></p></li><li><p><span>当浏览器发送一个 HTTP 请求时，其中的 URL 路径（pathname）会告诉服务器需要请求的资源在服务器文件系统中的位置。服务器会根据这个路径来查找对应的资源文件。静态资源目录就是服务器用来</span><strong><span>查找这些资源文件的基础路径</span></strong><span>。</span></p></li></ol><blockquote><p><span>当我们使用 live server 打开 HTML 时，它启动的服务中的网站根目录是该 HTML 文件所在目录</span></p></blockquote><h3 id='510-网页中的-url'><span>5.10 网页中的 URL</span></h3><ol start='' ><li><p><span>绝对路径</span></p><ul><li><p><span>形式一</span></p><ul><li><p><span>特点：（最完整）直接向目标资源发送请求，易理解，多用于网站的外链</span></p></li><li><p><span>举例：</span><code>https://github.com/dashboard</code></p></li></ul></li><li><p><span>形式二</span></p><ul><li><p><span>特点：（省略协议）与当前页面 URL 的协议拼接成完整的 URL 后再向目标资源发送请求，多用于大型网站</span></p></li><li><p><span>举例：</span><code>//github.com/dashboard</code></p></li></ul></li><li><p><span>形式三</span></p><ul><li><p><span>特点：（省略协议、主机名/域名、端口）与当前页面 URL 的协议、主机名/域名、端口拼接成完整的 URL 后再向目标资源发送请求，多用于中小型网站</span></p></li><li><p><span>优势：当网页更改域名等信息后，不需要一一更改相关静态资源的路径</span></p></li><li><p><span>举例：</span><code>/dashboard</code></p></li></ul></li></ul></li><li><p><span>相对路径：当使用相对路径发送请求时，需要</span><strong><span>与当前页面的 URL 进行计算</span></strong><span>，得到绝对路径后再向目标资源发送请求，假设当前网页的 URL 为 </span><code>https://github.com/dashboard/index.html</code></p><ul><li><p><span>形式一：当前路径</span></p><ul><li><p><span>计算规则：以当前网页 URL 所在目录为基准</span></p></li><li><p><span>举例1 </span><code>./css/app.css</code><span> =&gt; </span><code>https://github.com/dashboard/css/app.css</code></p></li><li><p><span>举例2 </span><code>css/app.css</code><span> =&gt; </span><code>https://github.com/dashboard/css/app.css</code></p></li></ul></li><li><p><span>形式二：上一级路径</span></p><ul><li><p><span>计算规则：以当前网页 URL 所在目录的上一级目录为基准</span></p></li><li><p><span>举例 </span><code>../img/logo.png</code><span> =&gt; </span><code>https://github.com/img/logo.png</code></p></li></ul></li><li><p><span>形式三：上上一级路径</span></p><ul><li><p><span>计算规则：以当前网页 URL 所在目录的上上一级目录为基准</span></p></li><li><p><span>举例：</span><code>../../img/logo.png</code><span> =&gt; </span><code>https://github.com/img/logo.png</code></p></li><li><p><span>注意事项：顶级路径进行 </span><code>../</code><span> 运算后的结果还是顶级路径</span></p></li></ul></li></ul><blockquote><p><span>p.s. 相对路径在项目运行时使用较少，因为相对路径需要参考当前网页的 URL 进行计算，如果当前网页的 URL 有问题，就会导致计算得到的绝对路径不可靠</span></p></blockquote></li><li><p><span>网页中 URL 的使用场景</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="html"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="html"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> <span class="cm-attribute">href</span>=<span class="cm-string">""</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">link</span> <span class="cm-attribute">href</span>=<span class="cm-string">""</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">script</span> <span class="cm-attribute">src</span>=<span class="cm-string">""</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">img</span> <span class="cm-attribute">src</span>=<span class="cm-string">""</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">video</span> <span class="cm-attribute">src</span>=<span class="cm-string">""</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">video</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">audio</span> <span class="cm-attribute">src</span>=<span class="cm-string">""</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">audio</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">form</span> <span class="cm-attribute">action</span>=<span class="cm-string">""</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">form</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">&lt;!-- 还有 ajax 中的 get 请求 --&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 184px;"></div><div class="CodeMirror-gutters" style="display: none; height: 184px;"></div></div></div></pre></li></ol><h3 id='511-设置资源类型'><span>5.11 设置资源类型</span></h3><ol start='' ><li><p><span>资源类型：又称媒体类型、</span><code>MIME</code><span> 类型（multipurpose Internet Mail Extensions）。在网络通信中，服务器向浏览器传输数据时，会使用 MIME 类型（多用途互联网邮件扩展类型）来告诉浏览器数据的格式，以便浏览器能够以正确的方式处理这些数据。MIME 类型是一种标准，用于描述文件的格式和内容类型，例如文本、图片、音频等。</span></p></li><li><p><span>常见文件的资源类型：</span><code>MIME</code><span> 类型的结构为 </span><code>[type]/[subtype]</code></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>文件</span></th><th style='text-align:center;' ><span>资源类型</span></th><th style='text-align:center;' ><span>文件</span></th><th style='text-align:center;' ><span>资源类型</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>html</span></td><td style='text-align:center;' ><span>&#39;text/html&#39;</span></td><td style='text-align:center;' ><span>gif</span></td><td style='text-align:center;' ><span>&#39;image/gif&#39;</span></td></tr><tr><td style='text-align:center;' ><span>css</span></td><td style='text-align:center;' ><span>&#39;text/css&#39;</span></td><td style='text-align:center;' ><span>mp4</span></td><td style='text-align:center;' ><span>&#39;video/mp4&#39;</span></td></tr><tr><td style='text-align:center;' ><span>js</span></td><td style='text-align:center;' ><span>&#39;text/javascript&#39;</span></td><td style='text-align:center;' ><span>mp3</span></td><td style='text-align:center;' ><span>&#39;audio/mpeg&#39;</span></td></tr><tr><td style='text-align:center;' ><span>png</span></td><td style='text-align:center;' ><span>&#39;image/png&#39;</span></td><td style='text-align:center;' ><span>json</span></td><td style='text-align:center;' ><span>&#39;application/json&#39;</span></td></tr><tr><td style='text-align:center;' ><span>jpg</span></td><td style='text-align:center;' ><span>&#39;image/jpeg&#39;</span></td><td style='text-align:center;' ><span>未知类型时</span></td><td style='text-align:center;' ><span>&#39;application/octet-stream&#39;</span></td></tr></tbody></table></figure></li><li><p><span>设置资源类型：我们可以在 http 服务中设置响应头 </span><code>content-type</code><span> 来表明响应体的 </span><code>MIME</code><span> 类型，此时浏览器会根据 </span><code>MIME</code><span> 类型决定如何处理对应的资源。</span></p><blockquote><p><span>p.s. 当我们不使用 </span><code>setHeader</code><span> 设置响应头 </span><code>content-type</code><span>，此时浏览器会根据其 </span><code>MIME</code><span> 嗅探功能，根据响应体的内容自动设置响应体的 </span><code>MIME</code><span> 类型</span></p></blockquote><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="javascript"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="javascript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">response</span>.<span class="cm-property">setHeader</span>(<span class="cm-string">'content-type'</span>, <span class="cm-string">'[type]/[subtype]'</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 23px;"></div></div></div></pre></li><li><p><span>关于资源类型 </span><code>application/octet-stream</code></p><ul><li><p><span>当服务器返回的</span><strong><span>资源类型对于浏览器来说是未知的</span></strong><span>，或者服务器开发者并</span><strong><span>不清楚具体应该使用哪种 MIME 类型来描述返回的内容</span></strong><span>时，就可以选择使用 </span><code>application/octet-stream</code><span> 这个 MIME 类型。这个类型本质上是告诉浏览器：“这些数据是一系列的字节流，我不会告诉你具体是什么类型，你也</span><strong><span>不需要尝试去解析</span></strong><span>它。”</span></p></li><li><p><span>浏览器在遇到 </span><code>application/octet-stream</code><span> 类型的响应时，通常不会尝试去解析这些数据。相反，浏览器会认为这是一种“原始”的数据格式，不知道如何直接展示给用户。因此，浏览器会选择一种安全的处理方式 —— 触发</span><strong><span>文件下载</span></strong><span>，将响应体的内容存储到用户的设备上，而不是尝试在浏览器中直接打开或展示这些内容。这就是我们通常所说的“下载效果”。</span></p></li><li><p><span>使用 </span><code>application/octet-stream</code><span> 类型的场景包括但不限于：</span></p><ul><li><p><span>服务器返回的数据确实是一种</span><strong><span>应该被下载而不是展示</span></strong><span>的文件，例如可执行文件、压缩包等。</span></p></li><li><p><span>开发者未确切知道返回数据的具体类型，为</span><strong><span>避免浏览器错误地处理</span></strong><span>，选择使用这个类型</span><strong><span>确保数据能被安全地传输至客户端</span></strong><span>。</span></p></li></ul></li><li><p><code>application/octet-stream</code><span> 是一种“万能”的、安全的 MIME 类型，用于处理未知或不确定类型的数据，确保数据能够</span><strong><span>被安全地传输并提示用户下载，而不是在浏览器中直接展示</span></strong><span>。</span></p></li></ul></li><li><p><span>关于使用 </span><code>setHeader</code><span> 设置响应体的字符集解决乱码的几点讨论</span></p><ul><li><p><span>使用 </span><code>response.setHeader(&#39;content-type&#39;, &#39;charset=utf-8&#39;)</code><span> 可以设置响应体的字符集，也可以使用 </span><code>&lt;meta charset=&#39;utf-8&#39;&gt;</code><span> 设置浏览器解析 HTML 时采用的字符集，但是 </span><code>setHeader</code><span> 的优先级更高</span></p></li><li><p><span>一般而言，我们只需要使用 </span><code>setHeader</code><span> 设置 </span><code>html</code><span> 文件的字符集，不用设置其中引入的各种资源（如 css、js、图片等）的字符集，因为这些资源引入网页后，会根据网页自动调整用于解析字符集</span></p></li></ul></li></ol><h3 id='512-get-和-post-请求'><span>5.12 GET 和 POST 请求</span></h3><ol start='' ><li><p><span>使用场景</span></p><ul><li><p><span>GET</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="html"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="html"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">link</span> <span class="cm-attribute">href</span>=<span class="cm-string">""</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">script</span> <span class="cm-attribute">src</span>=<span class="cm-string">""</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">img</span> <span class="cm-attribute">src</span>=<span class="cm-string">""</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">form</span> <span class="cm-attribute">method</span>=<span class="cm-string">"get"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">form</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">&lt;!-- 点击 a 标签 --&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">&lt;!-- 地址栏直接输入 url 访问 --&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">&lt;!-- ajax 中的 GET 请求 --&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 161px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre></li><li><p><span>POST</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="html"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="html"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">form</span> <span class="cm-attribute">method</span>=<span class="cm-string">"post"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">form</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">&lt;!-- ajax 中的 POST 请求 --&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre></li></ul></li><li><p><span>区别</span></p><ul><li><p><span>功能不同：</span><code>GET</code><span> 主要用于获取数据；</span><code>POST</code><span> 主要用于提交数据</span></p></li><li><p><span>参数位置不同：</span><code>GET</code><span> 的带参数请求的参数在 URL 中；</span><code>POST</code><span> 的带参数请求的参数在请求体中</span></p></li><li><p><span>安全性不同：</span><code>POST</code><span> 相比 </span><code>GET</code><span> 相对更加安全，因为 </span><code>GET</code><span> 的带参数请求中的参数会暴露在地址栏中</span></p><blockquote><p><span>p.s. 安全是相对的，无论是 </span><code>POST</code><span> 还是 </span><code>GET</code><span> 请求，都可以通过 fiddler 等抓包工具获取请求内容</span></p></blockquote></li><li><p><span>请求大小限制：</span><code>GET</code><span> 请求大小限制一般为 2K；</span><code>POST</code><span> 请求没有大小限制</span></p></li></ul></li></ol><h2 id='6-模块化'><span>6. 模块化</span></h2><h3 id='61-模块化简介'><span>6.1 模块化简介</span></h3><ol start='' ><li><p><span>模块化与模块</span></p><ul><li><p><span>将一个复杂的程序文件依据一定规则或规范拆分成多个文件的过程称之为</span><strong><span>模块化</span></strong><span>，其中拆分出的每个文件就是一个</span><strong><span>模块</span></strong></p></li><li><p><span>模块的内部数据是</span><strong><span>私有的</span></strong><span>，但是可以</span><strong><span>暴露</span></strong><span>内部数据，供其他模块使用</span></p></li></ul></li><li><p><span>模块化项目：编码时按照模块一个个编码的项目就是模块化项目</span></p></li><li><p><span>模块化的好处</span></p><ul><li><p><span>防止命名冲突：不同模块之间可以声明相同名称的函数或变量，而不会产生冲突</span></p></li><li><p><span>提高了代码的复用性：模块可以被多次引用，从而实现其中代码的复用</span></p></li><li><p><span>代码更易于维护：某个模块的修改或扩展不会影响到其他模块</span></p></li></ul></li></ol><h3 id='62-模块化的极简单使用'><span>6.2 模块化的极简单使用</span></h3><p><span>为了使用模块化，</span></p><ul><li><p><span>首先，我们需要</span><a href='./CODES/31-module-极简单使用-1-模块.js'><span>创建一个模块</span></a><span>（假定为 .js 文件），在其中编写相关代码，并通过 </span><code>module.exports</code><span> 向外界暴露数据</span></p></li><li><p><span>然后，在另一个文件中使用 </span><code>require</code><span> 函数</span><a href='./CODES/31-module-极简单使用-2-导入.js'><span>导入该模块</span></a><span>，函数的返回值就是我们在模块中暴露出的数据</span></p></li><li><p><span>总的来说，模块化的使用包含两个方面：</span><a href='#63-向外暴露数据'><span>向外暴露数据</span></a><span>、</span><a href='#64-模块的导入'><span>模块的导入</span></a></p></li></ul><h3 id='63-向外暴露数据'><span>6.3 向外暴露数据</span></h3><ol start='' ><li><p><span>exports 和 module.exports</span></p><ul><li><p><span>伪代码层面的解释</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="javascript"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="javascript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">let</span> <span class="cm-def">module</span> <span class="cm-operator">=</span> { <span class="cm-property">exports</span>: {} };</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">let</span> <span class="cm-def">exports</span> <span class="cm-operator">=</span> <span class="cm-variable">module</span>.<span class="cm-property">exports</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre></li><li><p><span>内存层面的解释</span></p><p><img src="https://cdn.jsdelivr.net/gh/Nasir1423/blog-img@main/20240414223318.png" style='width: 70%;margin: 0 auto; display: block'/></p></li><li><p><span>关于 module.exports：当我们创建一个新的模块时，Node.js 会为我们创建了一个新的 </span><code>module</code><span> 对象，这个对象有一个属性 </span><code>exports</code><span>，该属性初始值为一个空对象 </span><code>{}</code><span>，即 </span><code>module = {exports: {}}</code></p></li><li><p><span>关于 exports:：我们创建一个新的模块时，Node.js 会创建一个变量 </span><code>exports</code><span>，改变量初始化指向 </span><code>module</code><span> 对象的 </span><code>exports</code><span> 属性，即 </span><code>exports = module.exports</code></p></li><li><p><span>注意：</span><code>module.exports</code><span> 和 </span><code>exports</code><span> 不是一个概念，前者是 </span><code>module</code><span> 对象的属性，后者是一个全局变量 ，二者初始情况下指向的是同一个空对象 </span><code>{}</code></p></li></ul></li><li><p><span>讨论：当我们导入模块时，我们导入了什么？</span></p><ul><li><p><span>当我们使用 </span><code>require(模块路径)</code><span> 函数导入 </span><code>js</code><span> 模块时，函数的返回值本质上是 </span><code>module.exports</code><span> 所指向的对象</span></p></li></ul></li><li><p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="18.196ex" height="2.556ex" role="img" focusable="false" viewBox="0 -783.7 8042.8 1129.7" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.783ex;"><defs><path id="MJX-6-TEX-B-1D42C" d="M38 315Q38 339 45 360T70 404T127 440T223 453Q273 453 320 436L338 445L357 453H366Q380 453 383 447T386 403V387V355Q386 331 383 326T365 321H355H349Q333 321 329 324T324 341Q317 406 224 406H216Q123 406 123 353Q123 334 143 321T188 304T244 294T285 286Q305 281 325 273T373 237T412 172Q414 162 414 142Q414 -6 230 -6Q154 -6 117 22L68 -6H58Q44 -6 41 0T38 42V73Q38 85 38 101T37 122Q37 144 42 148T68 153H75Q87 153 91 151T97 147T103 132Q131 46 220 46H230Q257 46 265 47Q330 58 330 108Q330 127 316 142Q300 156 284 162Q271 168 212 178T122 202Q38 243 38 315Z"></path><path id="MJX-6-TEX-B-1D42E" d="M40 442L134 446Q228 450 229 450H235V273V165Q235 90 238 74T254 52Q268 46 304 46H319Q352 46 380 67T419 121L420 123Q424 135 425 199Q425 201 425 207Q425 233 425 249V316Q425 354 423 363T410 376Q396 380 369 380H356V442L554 450V267Q554 84 556 79Q561 62 610 62H623V31Q623 0 622 0Q603 0 527 -3T432 -6Q431 -6 431 25V56L420 45Q373 6 332 -1Q313 -6 281 -6Q208 -6 165 14T109 87L107 98L106 230Q106 358 104 366Q96 380 50 380H37V442H40Z"></path><path id="MJX-6-TEX-B-1D426" d="M40 442Q217 450 218 450H224V365Q226 367 235 378T254 397T278 416T314 435T362 448Q376 450 400 450H406Q503 450 534 393Q545 376 545 370Q545 368 555 379Q611 450 716 450Q774 450 809 434Q850 414 861 379T873 276V213V198V62H942V0H933Q915 3 809 3Q702 3 684 0H675V62H744V194V275Q744 348 735 373T690 399Q645 399 607 370T557 290Q555 281 554 171V62H623V0H614Q596 3 489 3Q374 3 365 0H356V62H425V194V275Q425 348 416 373T371 399Q326 399 288 370T238 290Q236 281 235 171V62H304V0H295Q277 3 171 3Q64 3 46 0H37V62H106V210V303Q106 353 104 363T91 376Q77 380 50 380H37V442H40Z"></path><path id="MJX-6-TEX-B-1D41A" d="M64 349Q64 399 107 426T255 453Q346 453 402 423T473 341Q478 327 478 310T479 196V77Q493 63 529 62Q549 62 553 57T558 31Q558 9 552 5T514 0H497H481Q375 0 367 56L356 46Q300 -6 210 -6Q130 -6 81 30T32 121Q32 188 111 226T332 272H350V292Q350 313 348 327T337 361T306 391T248 402T194 399H189Q204 376 204 354Q204 327 187 306T134 284Q97 284 81 305T64 349ZM164 121Q164 89 186 67T238 45Q274 45 307 63T346 108L350 117V226H347Q248 218 206 189T164 121Z"></path><path id="MJX-6-TEX-B-1D42B" d="M405 293T374 293T324 312T305 361Q305 378 312 394Q315 397 315 399Q305 399 294 394T266 375T238 329T222 249Q221 241 221 149V62H308V0H298Q280 3 161 3Q47 3 38 0H29V62H98V210V303Q98 353 96 363T83 376Q69 380 42 380H29V442H32L118 446Q204 450 205 450H210V414L211 378Q247 449 315 449H321Q384 449 413 422T442 360Q442 332 424 313Z"></path><path id="MJX-6-TEX-B-1D432" d="M84 -102Q84 -110 87 -119T102 -138T133 -149Q148 -148 162 -143T186 -131T206 -114T222 -95T234 -76T243 -59T249 -45T252 -37L269 0L96 382H26V444H34Q49 441 146 441Q252 441 270 444H279V382H255Q232 382 232 380L337 151L442 382H394V444H401Q413 441 495 441Q568 441 574 444H580V382H510L406 152Q298 -84 297 -87Q269 -139 225 -169T131 -200Q85 -200 54 -172T23 -100Q23 -64 44 -50T87 -35Q111 -35 130 -50T152 -92V-100H84V-102Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mstyle" transform="scale(1.73)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D42C" xlink:href="#MJX-6-TEX-B-1D42C"></use></g><g data-mml-node="mi" transform="translate(454,0)"><use data-c="1D42E" xlink:href="#MJX-6-TEX-B-1D42E"></use></g><g data-mml-node="mi" transform="translate(1093,0)"><use data-c="1D426" xlink:href="#MJX-6-TEX-B-1D426"></use></g><g data-mml-node="mi" transform="translate(2051,0)"><use data-c="1D426" xlink:href="#MJX-6-TEX-B-1D426"></use></g><g data-mml-node="mi" transform="translate(3009,0)"><use data-c="1D41A" xlink:href="#MJX-6-TEX-B-1D41A"></use></g><g data-mml-node="mi" transform="translate(3568,0)"><use data-c="1D42B" xlink:href="#MJX-6-TEX-B-1D42B"></use></g><g data-mml-node="mi" transform="translate(4042,0)"><use data-c="1D432" xlink:href="#MJX-6-TEX-B-1D432"></use></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle mathsize="1.73em"><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi mathvariant="bold">s</mi><mi mathvariant="bold">u</mi><mi mathvariant="bold">m</mi><mi mathvariant="bold">m</mi><mi mathvariant="bold">a</mi><mi mathvariant="bold">r</mi><mi mathvariant="bold">y</mi></mrow></mrow></mstyle></math></mjx-assistive-mml></mjx-container><script type="math/tex">\LARGE{\bf{summary}}</script><span>：模块向外暴露数据的两种方式</span></p><ul><li><p><code>module.exports = 值</code></p></li><li><p><code>exports.属性名=属性值</code></p></li><li><p><span>注意事项</span></p><ul><li><p><span>基于 2. 中的讨论，我们可以知道 </span><code>exports = 值</code><span> 的方式只会让 </span><code>exports</code><span> 变量不再指向 </span><code>require</code><span> 函数返回的对象，也就是 </span><code>module.exports</code><span> 所指向的对象</span></p></li><li><p><span>如果想要添加或修改从模块中导出的对象中的属性或方法，则 </span><code>exports</code><span> 与 </span><code>module.exports</code><span> 都可以使用，不过通常使用前者，因为代码更简短</span></p></li><li><p><span>如果希望导出的内容不是一个对象，而是一个函数、类或者其他数据，则只能通过 </span><code>module.exports</code><span> 的方式修改</span></p></li></ul></li></ul></li></ol><h3 id='64-模块的导入'><span>6.4 模块的导入</span></h3><ol start='' ><li><p><code>.js</code><span> 文件中导入模块的语法 </span><code>const moduleName = require(modulePath)</code></p></li><li><p><span>模块导入的几点注意</span></p><ul><li><p><span>建议使用</span><strong><span>相对路径</span></strong><span>导入自定义模块，并且相对路径不可省略 </span><code>./</code><span> 或 </span><code>../</code><span>（不像 </span><code>fs</code><span> 模块中的函数，</span><code>require</code><span> 函数中的路径不受 </span><code>node</code><span> 工作目录的影响）</span></p></li><li><p><span>导入 </span><code>.js</code><span>、</span><code>.json</code><span>、</span><code>.node</code><span> 文件时</span><strong><span>可以省略后缀名</span></strong><span>，但是如果同时存在 </span><code>xxx.js</code><span>、</span><code>xxx.json</code><span>、</span><code>xxx.node</code><span>，使用省略后缀名的方式 </span><code>require(&#39;xxx&#39;)</code><span> 导入模块时，则只会导入 </span><code>.js</code><span> 文件（</span><code>.js</code><span>&gt;</span><code>.json</code><span>&gt;</span><code>.node</code><span>）</span></p><ul><li><p><span>导入 </span><code>.js</code><span> 文件时，函数返回值是 </span><code>module.export</code><span> 暴露出的数据</span></p></li><li><p><span>导入 </span><code>.json</code><span> 文件时，函数返回值是根据 </span><code>.json</code><span> 文件中的内容转换的对象</span></p></li></ul></li><li><p><span>导入</span><strong><span>其他类型文件</span></strong><span>时（如 </span><code>.abc</code><span>），会</span><strong><span>当作 </span><code>.js</code><span> 文件</span></strong><span>进行处理</span></p></li><li><p><span>导入 </span><code>node.js</code><span> </span><strong><span>内置模块</span></strong><span>时，使用 </span><code>require(模块名)</code><span> 即可</span></p></li></ul></li><li><p><span>讨论：当 </span><code>require</code><span> 中的模块路径 </span><code>modulePath</code><span> 是个文件夹时，实际导入了什么？</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="javascript" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="javascript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span> (<span class="cm-string">'文件夹中存在 package.json 文件'</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-string">'package.json 文件中存在 main 属性'</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">if</span> (<span class="cm-string">'main 属性对应的文件存在'</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'导入该文件'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">throw</span> <span class="cm-keyword">new</span> <span class="cm-variable">Error</span>(<span class="cm-string">'package.json 文件中 main 属性对应的模块不存在'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">if</span> (<span class="cm-string">'文件夹中存在 index.js 文件'</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'导入该文件'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; } <span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-string">'文件夹中存在 index.json 文件'</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'导入该文件'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; } <span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-string">'文件夹中存在 index.node 文件'</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'导入该文件'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">throw</span> <span class="cm-keyword">new</span> <span class="cm-variable">Error</span>(<span class="cm-string">'找不到该文件夹中的可导入模块'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 507px;"></div><div class="CodeMirror-gutters" style="display: none; height: 507px;"></div></div></div></pre></li></ol><h3 id='65-模块导入的基本流程'><span>6.5 模块导入的基本流程</span></h3><p><span>当我们使用 </span><code>require</code><span> 函数</span><a href='./CODES/32-module-模块导入的流程-2-导入.js'><span>导入自定义模块</span></a><span>时，有以下流程</span></p><p><img src="https://cdn.jsdelivr.net/gh/Nasir1423/blog-img@main/20240415083240.png" style="width:30%;margin:0 auto; display:block;"/></p><h3 id='66-commonjs-规范'><span>6.6 CommonJS 规范</span></h3><ol start='' ><li><p><span>CommonJS 是一个用于定义 JavaScript </span><strong><span>模块化标准</span></strong><span>的规范，它最初是为了在服务器端开发中使用 JavaScript 而产生的。CommonJS 规定了</span><strong><span>如何编写模块代码，如何导出和引入模块</span></strong><span>，以便于代码的组织和复用。</span></p></li><li><p><span>在 CommonJS 规范中，</span><code>module.exports</code><span> 和 </span><code>exports</code><span> 是用于导出模块的接口，而 </span><code>require</code><span> 是用于导入其他模块的函数。具体来说：</span></p><ul><li><p><code>module.exports</code><span> 是一个对象，它是模块的公开接口。当其他文件需要引入该模块时，它们可以通过 </span><code>require</code><span> 函数获取 </span><code>module.exports</code><span> 所导出的内容。</span></p></li><li><p><code>exports</code><span> 是 </span><code>module.exports</code><span> 的一个引用，它用于暴露模块的属性或方法。你可以通过向 </span><code>exports</code><span> 对象上添加属性来导出它们，但如果你直接给 exports 赋值一个新对象，它将不会影响 </span><code>module.exports</code><span>。</span></p></li><li><p><code>require</code><span> 是一个函数，用于在一个模块中加载和使用另一个模块。通过 </span><code>require</code><span> 调用模块的路径，它会执行目标模块的代码，并返回目标模块的 </span><code>module.exports</code><span> 对象。</span></p></li></ul></li><li><p><span>Node.js 是一个基于 Chrome V8 引擎的 JavaScript </span><strong><span>运行时环境</span></strong><span>，它允许开发者在服务器端运行 JavaScript 代码。Node.js 实现了 CommonJS 模块化规范，这意味着在 Node.js 中，你可以按照 CommonJS 规范来组织和管理你的代码模块。</span></p></li><li><p><span>ECMAScript 与 CommonJS</span></p><ul><li><p><strong><span>ECMAScript 是 JavaScript 语言的规范</span></strong><span>，它定义了语法、类型、语句、关键字等，而 JavaScript 是 ECMAScript 规范的实现。</span></p></li><li><p><span>类似地，</span><strong><span>CommonJS 是模块化的规范，而 Node.js 是这个规范的一种实现</span></strong><span>。Node.js 不仅支持 CommonJS 规范，还提供了许多其他的内建模块和 API，使得它成为了一个功能齐全的服务器端开发环境。</span></p></li></ul></li></ol><h2 id='7-包管理工具'><span>7. 包管理工具</span></h2><p><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="34.707ex" height="3.476ex" role="img" focusable="false" viewBox="0 -1200.6 15340.7 1536.2" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.759ex;"><defs><path id="MJX-7-TEX-B-1D427" d="M40 442Q217 450 218 450H224V407L225 365Q233 378 245 391T289 422T362 448Q374 450 398 450Q428 450 448 447T491 434T529 402T551 346Q553 335 554 198V62H623V0H614Q596 3 489 3Q374 3 365 0H356V62H425V194V275Q425 348 416 373T371 399Q326 399 288 370T238 290Q236 281 235 171V62H304V0H295Q277 3 171 3Q64 3 46 0H37V62H106V210V303Q106 353 104 363T91 376Q77 380 50 380H37V442H40Z"></path><path id="MJX-7-TEX-B-1D429" d="M32 442L123 446Q214 450 215 450H221V409Q222 409 229 413T251 423T284 436T328 446T382 450Q480 450 540 388T600 223Q600 128 539 61T361 -6H354Q292 -6 236 28L227 34V-132H296V-194H287Q269 -191 163 -191Q56 -191 38 -194H29V-132H98V113V284Q98 330 97 348T93 370T83 376Q69 380 42 380H29V442H32ZM457 224Q457 303 427 349T350 395Q282 395 235 352L227 345V104L233 97Q274 45 337 45Q383 45 420 86T457 224Z"></path><path id="MJX-7-TEX-B-1D426" d="M40 442Q217 450 218 450H224V365Q226 367 235 378T254 397T278 416T314 435T362 448Q376 450 400 450H406Q503 450 534 393Q545 376 545 370Q545 368 555 379Q611 450 716 450Q774 450 809 434Q850 414 861 379T873 276V213V198V62H942V0H933Q915 3 809 3Q702 3 684 0H675V62H744V194V275Q744 348 735 373T690 399Q645 399 607 370T557 290Q555 281 554 171V62H623V0H614Q596 3 489 3Q374 3 365 0H356V62H425V194V275Q425 348 416 373T371 399Q326 399 288 370T238 290Q236 281 235 171V62H304V0H295Q277 3 171 3Q64 3 46 0H37V62H106V210V303Q106 353 104 363T91 376Q77 380 50 380H37V442H40Z"></path><path id="MJX-7-TEX-B-2212" d="M119 221Q96 230 96 251T116 279Q121 281 448 281H775Q776 280 779 278T785 274T791 269T795 262T797 251Q797 230 775 221H119Z"></path><path id="MJX-7-TEX-B-1D41C" d="M447 131H458Q478 131 478 117Q478 112 471 95T439 51T377 9Q330 -6 286 -6Q196 -6 135 35Q39 96 39 222Q39 324 101 384Q169 453 286 453Q359 453 411 431T464 353Q464 319 445 302T395 284Q360 284 343 305T325 353Q325 380 338 396H333Q317 398 295 398H292Q280 398 271 397T245 390T218 373T197 338T183 283Q182 275 182 231Q182 199 184 180T193 132T220 85T270 57Q289 50 317 50H326Q385 50 414 115Q419 127 423 129T447 131Z"></path><path id="MJX-7-TEX-B-1D428" d="M287 -5Q228 -5 182 10T109 48T63 102T39 161T32 219Q32 272 50 314T94 382T154 423T214 446T265 452H279Q319 452 326 451Q428 439 485 376T542 221Q542 156 514 108T442 33Q384 -5 287 -5ZM399 230V250Q399 280 398 298T391 338T372 372T338 392T282 401Q241 401 212 380Q190 363 183 334T175 230Q175 202 175 189T177 153T183 118T195 91T215 68T245 56T287 50Q348 50 374 84Q388 101 393 132T399 230Z"></path><path id="MJX-7-TEX-B-1D41A" d="M64 349Q64 399 107 426T255 453Q346 453 402 423T473 341Q478 327 478 310T479 196V77Q493 63 529 62Q549 62 553 57T558 31Q558 9 552 5T514 0H497H481Q375 0 367 56L356 46Q300 -6 210 -6Q130 -6 81 30T32 121Q32 188 111 226T332 272H350V292Q350 313 348 327T337 361T306 391T248 402T194 399H189Q204 376 204 354Q204 327 187 306T134 284Q97 284 81 305T64 349ZM164 121Q164 89 186 67T238 45Q274 45 307 63T346 108L350 117V226H347Q248 218 206 189T164 121Z"></path><path id="MJX-7-TEX-B-1D41D" d="M351 686L442 690Q533 694 534 694H540V389Q540 327 540 253T539 163Q539 97 541 83T555 66Q569 62 596 62H609V31Q609 0 608 0Q588 0 510 -3T412 -6Q411 -6 411 16V38L401 31Q337 -6 265 -6Q159 -6 99 58T38 224Q38 265 51 303T92 375T165 429T272 449Q359 449 417 412V507V555Q417 597 415 607T402 620Q388 624 361 624H348V686H351ZM411 350Q362 399 291 399Q278 399 256 392T218 371Q195 351 189 320T182 238V221Q182 179 183 159T191 115T212 74Q241 46 288 46Q358 46 404 100L411 109V350Z"></path><path id="MJX-7-TEX-B-1D42C" d="M38 315Q38 339 45 360T70 404T127 440T223 453Q273 453 320 436L338 445L357 453H366Q380 453 383 447T386 403V387V355Q386 331 383 326T365 321H355H349Q333 321 329 324T324 341Q317 406 224 406H216Q123 406 123 353Q123 334 143 321T188 304T244 294T285 286Q305 281 325 273T373 237T412 172Q414 162 414 142Q414 -6 230 -6Q154 -6 117 22L68 -6H58Q44 -6 41 0T38 42V73Q38 85 38 101T37 122Q37 144 42 148T68 153H75Q87 153 91 151T97 147T103 132Q131 46 220 46H230Q257 46 265 47Q330 58 330 108Q330 127 316 142Q300 156 284 162Q271 168 212 178T122 202Q38 243 38 315Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mstyle" transform="scale(1.73)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D427" xlink:href="#MJX-7-TEX-B-1D427"></use></g><g data-mml-node="mi" transform="translate(639,0)"><use data-c="1D429" xlink:href="#MJX-7-TEX-B-1D429"></use></g><g data-mml-node="mi" transform="translate(1278,0)"><use data-c="1D426" xlink:href="#MJX-7-TEX-B-1D426"></use></g><g data-mml-node="mo" transform="translate(2458.2,0)"><use data-c="2212" xlink:href="#MJX-7-TEX-B-2212"></use></g><g data-mml-node="mi" transform="translate(3574.4,0)"><use data-c="1D41C" xlink:href="#MJX-7-TEX-B-1D41C"></use></g><g data-mml-node="mi" transform="translate(4085.4,0)"><use data-c="1D428" xlink:href="#MJX-7-TEX-B-1D428"></use></g><g data-mml-node="mi" transform="translate(4660.4,0)"><use data-c="1D426" xlink:href="#MJX-7-TEX-B-1D426"></use></g><g data-mml-node="mi" transform="translate(5618.4,0)"><use data-c="1D426" xlink:href="#MJX-7-TEX-B-1D426"></use></g><g data-mml-node="mi" transform="translate(6576.4,0)"><use data-c="1D41A" xlink:href="#MJX-7-TEX-B-1D41A"></use></g><g data-mml-node="mi" transform="translate(7135.4,0)"><use data-c="1D427" xlink:href="#MJX-7-TEX-B-1D427"></use></g><g data-mml-node="mi" transform="translate(7774.4,0)"><use data-c="1D41D" xlink:href="#MJX-7-TEX-B-1D41D"></use></g><g data-mml-node="mi" transform="translate(8413.4,0)"><use data-c="1D42C" xlink:href="#MJX-7-TEX-B-1D42C"></use></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle mathsize="1.73em"><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi mathvariant="bold">n</mi><mi mathvariant="bold">p</mi><mi mathvariant="bold">m</mi><mo mathvariant="bold">−</mo><mi mathvariant="bold">c</mi><mi mathvariant="bold">o</mi><mi mathvariant="bold">m</mi><mi mathvariant="bold">m</mi><mi mathvariant="bold">a</mi><mi mathvariant="bold">n</mi><mi mathvariant="bold">d</mi><mi mathvariant="bold">s</mi></mrow></mrow></mstyle></math></mjx-assistive-mml></mjx-container><script type="math/tex">\LARGE{\bf{npm-commands}}</script></p><style>
   table{
      margin: 0 auto;
   }
</style><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>命令</span></th><th style='text-align:center;' ><span>含义</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><code>npm -v</code></td><td style='text-align:center;' ><span>查看 </span><code>npm</code><span> 的版本号</span></td></tr><tr><td style='text-align:center;' ><code>npm init</code></td><td style='text-align:center;' ><span>将当前文件夹初始化为一个包，</span><br><span>并交互式地创建 </span><code>package.json</code><span> 文件</span></td></tr><tr><td style='text-align:center;' ><code>npm init -y</code><br><code>npm init -yes</code></td><td style='text-align:center;' ><span>将当前文件夹初始化为一个包，</span><br><span>并以默认值创建 </span><code>package.json</code><span> 文件</span></td></tr><tr><td style='text-align:center;' ><code>npm s 关键字</code><br><code>npm search 关键字</code></td><td style='text-align:center;' ><span>搜索包名包含指定关键字的包</span></td></tr><tr><td style='text-align:center;' ><code>npm i 包名</code><br><code>npm install 包名</code></td><td style='text-align:center;' ><span>安装指定包</span></td></tr><tr><td style='text-align:center;' ><code>npm i -D 包名</code><br><code>npm i --save-dev 包名</code></td><td style='text-align:center;' ><span>安装指定包，</span><br><span>并设置依赖类型为开发依赖</span></td></tr><tr><td style='text-align:center;' ><code>npm i -S 包名</code><br><code>npm i --save 包名</code></td><td style='text-align:center;' ><span>安装指定包，</span><br><span>并设置依赖类型为生产依赖</span></td></tr><tr><td style='text-align:center;' ><code>npm i -g 包名</code></td><td style='text-align:center;' ><span>全局安装指定包</span></td></tr><tr><td style='text-align:center;' ><code>npm root -g</code></td><td style='text-align:center;' ><span>查看全局安装位置</span></td></tr><tr><td style='text-align:center;' ><code>npm i</code><br><code>npm install</code></td><td style='text-align:center;' ><span>一键安装项目依赖</span></td></tr><tr><td style='text-align:center;' ><code>npm i 包名@版本号</code></td><td style='text-align:center;' ><span>安装指定版本的包</span></td></tr><tr><td style='text-align:center;' ><code>npm remove 包名</code><br><code>npm r 包名</code></td><td style='text-align:center;' ><span>局部删除包</span></td></tr><tr><td style='text-align:center;' ><code>npm remove -g 包名</code></td><td style='text-align:center;' ><span>全局删除包</span></td></tr><tr><td style='text-align:center;' ><code>npm run 命令别名</code></td><td style='text-align:center;' ><span>执行 </span><code>package.json</code><span> 的 </span><code>scripts</code><span> 属性中命令别名对应的命令</span></td></tr></tbody></table></figure><p>&nbsp;</p><h3 id='71-包管理工具简介'><span>7.1 包管理工具简介</span></h3><ol start='' ><li><p><span>包（package）：表示一组特定功能的</span><strong><span>源码集合</span></strong></p></li><li><p><span>包管理工具</span></p><ul><li><p><span>含义：管理包的应用软件，用于对包进行下载安装、更新、删除、上传等操作</span></p></li><li><p><span>作用：提高项目开发效率</span></p></li></ul></li><li><p><span>前端常用的包管理工具</span></p><ul><li><p><code>npm</code><span>（最重要）</span></p></li><li><p><code>yarn</code></p></li><li><p><code>cnpm</code></p></li></ul></li></ol><h3 id='72-npm-简介'><span>7.2 npm 简介</span></h3><ol start='' ><li><p><span>npm：全称 Node Package Manager，译为 Node 包管理工具，是 </span><code>node.js</code><span> 官方</span><strong><span>内置的包管理工具</span></strong><span>，必须掌握</span></p></li><li><p><span>npm 的安装：安装 </span><code>node.js</code><span> 时，会自动安装 </span><code>npm</code></p><blockquote><p><span>p.s. 我们可以在命令行中通过命令 </span><code>npm -v</code><span> 查看 </span><code>npm</code><span> 的版本号来测试 </span><code>npm</code><span> 是否安装成功</span></p></blockquote></li></ol><h3 id='73-npm-的基本使用'><span>7.3 npm 的基本使用</span></h3><ol start='' ><li><p><strong><span>初始化包</span></strong><span>：我们可以以一个</span><strong><span>空目录</span></strong><span>作为工作目录来启动命令行，使用 </span><code>npm init</code><span> 来将这个空文件夹初始化为一个包，并且交互式地创建 </span><code>package.json</code><span> 文件</span></p><ul><li><p><span>关于 </span><code>package.json</code></p><ul><li><p><code>package.json</code><span> 是</span><strong><span>包的配置文件</span></strong><span>，每个包都必须要有 </span><code>package.json</code><span> 文件</span></p></li><li><p><code>package.json</code><span> 的 </span><code>name</code><span> 属性表示</span><strong><span>包名</span></strong><span>，</span><strong><span>不能使用中文和大写英文</span></strong><span>；如果不指定，则</span><strong><span>默认是所在文件夹的名称</span></strong><span>，此时要求文件夹名称不能使用中文和大写英文</span></p></li><li><p><code>package.json</code><span> 的 </span><code>version</code><span> 属性表示</span><strong><span>版本号</span></strong><span>，必须以 </span><code>x.x.x</code><span> 的形式来定义，其中 </span><code>x</code><span> 必须是数字，默认值为 </span><code>1.0.0</code></p></li><li><p><code>package.json</code><span> 的 </span><code>main</code><span> 属性对应交互设置 </span><code>package.json</code><span> 时指定的 </span><code>entry point</code><span> 值，用于</span><strong><span>指定包的主入口文件</span></strong><span>，默认值为 </span><code>index.js</code></p></li><li><p><code>package.json</code><span> 也可以手动创建与修改，此时所在文件夹也就成为了一个包</span></p></li></ul></li><li><p><span>我们也可以通过 </span><code>npm init -y</code><span> 或 </span><code>npm init -yes</code><span> 快速初始化包，</span><strong><span>以默认值创建</span></strong><span> </span><code>package.json</code><span> 文件</span></p></li></ul></li><li><p><strong><span>搜索包</span></strong></p><ul><li><p><span>方式一 </span><code>npm s 关键字</code><span> 或 </span><code>npm search 关键字</code><span>，表示搜索包名包含指定关键字的包</span></p></li><li><p><span>方式二 直接在 </span><code>https://www.npmjs.com/</code><span> 中搜索</span></p></li></ul></li><li><p><strong><span>下载包</span></strong><span>：我们可以在我们初始化的包中，使用 </span><code>npm i 包名</code><span> 或 </span><code>npm install 包名</code><span> 命令来安装指定包</span></p><ul><li><p><span>当我们使用命令安装指定包后，当前文件夹中会增加两项内容</span></p><ul><li><p><code>node_module</code><span> 该文件夹用于存放下载的包</span></p></li><li><p><code>package-lock.json</code><span> 该文件称之为包的锁文件，用于锁定包的版本</span></p></li></ul></li><li><p><span>当我们安装了包 B 时，我们称包 B 是一个</span><strong><span>依赖包</span></strong><span>，或者说</span><strong><span>依赖</span></strong></p></li><li><p><span>当我们在创建的包 A 中安装了包 B，我们称</span><strong><span>包 B 是 A 的一个依赖包</span></strong><span>，或者说 </span><strong><span>A 依赖 B</span></strong><span>，此时我们通过 </span><code>npm init</code><span> 创建的包中的 </span><code>package.json</code><span> 中的 </span><code>dependencies</code><span> 属性记录包 A 的依赖信息，如包 B 的包名和版本信息等</span></p></li></ul></li><li><p><span>导入 npm 包的基本流程</span></p><p><span>当我们使用 </span><code>require(包名)</code><span> 函数导入 </span><code>npm</code><span> 包时，</span><code>node</code><span> </span></p><ul><li><p><span>首先会在当前文件下的 </span><code>node_modules</code><span> 中寻找同名（包名）的文件夹，如果找到则根据其中 </span><code>package.json</code><span> 中 </span><code>main</code><span> 指定的入口去导入包</span></p></li><li><p><span>如果当前文件夹中没有 </span><code>node_modules</code><span> 文件夹，就继续去上一级文件夹中的 </span><code>node_modules</code><span> 中寻找同名（包名）的文件夹，以此类推...</span></p></li></ul><blockquote><p><span>在 Node.js 中，</span><code>require</code><span> 函数是用于加载模块的主要方法，包括内置模块、第三方模块和自定义模块。</span></p></blockquote></li></ol><h3 id='74-开发环境与生产环境'><span>7.4 开发环境与生产环境</span></h3><ol start='' ><li><p><span>开发环境</span></p><ul><li><p><span>程序员专门用来写代码的环境</span></p></li><li><p><span>一般指程序员的电脑</span></p></li><li><p><span>开发环境的项目一般只能程序员自己访问</span></p></li></ul></li><li><p><span>生产环境</span></p><ul><li><p><span>项目代码正式运行的环境</span></p></li><li><p><span>一般指正式的服务器电脑</span></p></li><li><p><span>生产环境的项目一般每个客户都可以访问</span></p></li></ul></li></ol><h3 id='75-开发依赖与生产依赖'><span>7.5 开发依赖与生产依赖</span></h3><p><span>我们已经知道，我们在创建的包中安装 </span><code>npm</code><span> 包，又称安装</span><strong><span>依赖</span></strong><span>，或者说</span><strong><span>创建的包依赖于安装的 </span><code>npm</code><span> 包</span></strong><span>，或者说</span><strong><span>安装的包是依赖</span></strong><span>。依赖也有两种类型：</span><strong><span>开发依赖</span></strong><span>、</span><strong><span>生产依赖</span></strong><span>，我们可以在安装包时设置选项来区分依赖类型。</span></p><ol start='' ><li><p><span>开发依赖 </span><code>npm i -D 包名</code><span> 或 </span><code>npm i --save-dev</code><span>，此时包信息包含在 </span><code>package.json</code><span> 的 </span><code>devDependencies</code><span> 属性中 </span></p></li><li><p><span>生产依赖 </span><code>npm i -S 包名</code><span> 或 </span><code>npm i --save 包名</code><span>，</span><strong><span>默认</span></strong><span>情况下 </span><code>npm i</code><span> 命令安装的包属于生产依赖，包信息包含在 </span><code>package.json</code><span> 的 </span><code>dependencies</code><span> 属性中</span></p></li><li><p><span>开发依赖与生产依赖区分：开发依赖</span><strong><span>只是在开发阶段使用</span></strong><span>的依赖包，而生产依赖是</span><strong><span>开发阶段和最终上线运行阶段都使用</span></strong><span>的依赖包</span></p></li></ol><h3 id='76-npm-全局安装'><span>7.6 npm 全局安装</span></h3><ol start='' ><li><p><span>全局安装：上述我们安装包的方式都属于</span><strong><span>局部安装</span></strong><span>，要求只能在包的安装目录所在的 </span><code>node_modules</code><span> 所在的目录或其子目录中通过 </span><code>require(包名)</code><span> 的方式导入和使用包；除此之外，我们也可以使用 </span><code>npm i -g 包名</code><span> </span><strong><span>全局安装</span></strong><span>包，全局安装完成后我们就可以在</span><strong><span>任何目录的命令行</span></strong><span>中运行</span><strong><span>包名同名的命令</span></strong><span>。</span></p></li><li><p><span>示例：比如，</span><code>npm i -g nodemon</code><span> 全局安装了 </span><code>nodemon</code><span> 包，然后我们就可以在任何目录的命令行中通过 </span><code>nodemon .js 文件名</code><span> 运行 </span><code>js</code><span> 文件，</span><code>nodemon</code><span> 命令的作用是：一旦 </span><code>js</code><span> 文件中的代码改变，则重新运行 </span><code>js</code><span> 文件（自动重启 </span><code>node</code><span> 应用程序），可以使用 </span><code>nodemon</code><span> 运行开启 </span><code>http</code><span> 服务的 </span><code>js</code><span> 文件，一旦代码更新，服务也随之更新。</span></p></li><li><p><span>使用说明</span></p><ul><li><p><span>全局安装的命令</span><strong><span>不受工作目录位置的影响</span></strong></p></li><li><p><span>可以通过 </span><code>npm root -g</code><span> 查看全局安装包的位置</span></p></li><li><p><strong><span>并不是所有的包都适合全局安装</span></strong><span>，只有全局类的工具才适合</span></p></li></ul></li><li><p><span>问题解决：windows 的 </span><code>powershell</code><span> 默认不允许 </span><code>npm</code><span> 全局安装的命令执行脚本文件</span></p><ul><li><p><span>解决方式一 管理员身份打开 </span><code>powershell</code><span> =&gt; 键入命令 </span><code>set-ExecutionPolicy remoteSigned</code><span> =&gt; 键入 A，回车</span></p></li><li><p><span>解决方式二：使用 </span><code>cmd</code></p></li></ul></li><li><p><span>疑惑：为什么我们可以在任何地方使用全局安装的命令？</span></p><ul><li><p><span>当我们使用 </span><code>npm</code><span> 全局安装一个包时,这个包中如果包含一个可执行的命令,那么此命令就会被添加到系统的环境变量路径中(通常是 PATH 环境变量)。这意味着我们可以在命令行的任何位置直接运行这个命令,而无需输入完整的文件路径。</span></p></li><li><p><span>我们可以在 </span><code>cmd</code><span> 中使用 </span><code>where 全局命令名称</code><span> 或在 </span><code>powershell</code><span> 中使用 </span><code>get-command 全局命令名称</code><span> 查找命令所在位置</span></p></li></ul></li></ol><h3 id='77-npm-安装包的依赖'><span>7.7 npm 安装包的依赖</span></h3><p><span>在项目协作时，当使用 </span><code>git push</code><span>，我们通常不会上传项目的依赖，即 </span><code>node_modules</code><span> 文件夹中的内容（或者说 </span><code>node_modules</code><span> 文件夹大多数情况不会存入版本库），因此当我们使用 </span><code>git pull</code><span> 拉取到项目代码后无法执行，这是因为缺乏依赖，此时我们可以使用 </span><code>npm i</code><span> 或 </span><code>npm install</code><span> 根据 </span><code>package.json</code><span> 中的内容，自动安装相关依赖</span></p><h3 id='78-npm-安装指定版本的包'><span>7.8 npm 安装指定版本的包</span></h3><ul><li><p><span>语法 </span><code>npm i 包名@版本号</code></p></li><li><p><span>举例 </span><code>npm i jquery@1.11.2</code></p></li></ul><h3 id='79-npm-删除包'><span>7.9 npm 删除包</span></h3><ul><li><p><span>删除包 </span><code>npm remove 包名</code><span> 或 </span><code>npm r 包名</code></p></li><li><p><span>全局删除包 </span><code>npm remove -g 包名</code></p></li></ul><h3 id='710-npm-配置别名'><span>7.10 npm 配置别名</span></h3><p><span>我们可以在创建的包（项目）中 </span><code>package.json</code><span> 文件的 </span><code>scripts</code><span> 属性配置命令别名以更简单的方式执行命令，如</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="json"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="json"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-string cm-property">"scripts"</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"server"</span>: <span class="cm-string">"node server.js"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"start"</span>: <span class="cm-string">"node index.js"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"命令别名"</span>: <span class="cm-string">"实际执行的命令"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 207px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><p><span>配置完命令别名后，我们就可以使用 </span><code>npm run 命令别名</code><span> 的方式执行命令，如 </span><code>npm run server</code><span>，</span><code>npm run start</code><span>；其中，当执行 </span><code>start</code><span> 别名时，可以省略 </span><code>run</code><span>，即 </span><code>npm start</code><span>，该命令一般用于启动项目</span></p><p><code>npm run 命令别名</code><span> 有自动向上级目录查找的特性，和 </span><code>require</code><span> 函数一样，现在当前文件夹中寻找 </span><code>package.json</code><span> 文件中的 </span><code>scripts</code><span> 属性，找到对应命令则执行，否则向当前文件夹的上一级文件夹去寻找</span></p><h3 id='711-cnpm-简介及简单实用'><span>7.11 cnpm 简介及简单实用</span></h3><ol start='' ><li><p><span>cnpm</span></p><ul><li><p><span>是一个淘宝构建的 </span><code>npmjs.com</code><span> 的完整镜像，又称</span><strong><span>淘宝镜像</span></strong><span>，其服务部署在国内的阿里云服务器上，可以提高包的下载速度，网址：</span><a href='https://npmmirror.com/' target='_blank' class='url'>https://npmmirror.com/</a></p></li><li><p><span>也是一个 </span><code>npm</code><span> 中的</span><strong><span>全局工具包</span></strong><span>，操作命令与 </span><code>npm</code><span> 的大体相同</span></p></li></ul></li><li><p><span>cnpm 的使用方式</span></p><ul><li><p><strong><span>作为镜像使用</span></strong><span>：可以设置 </span><code>npm</code><span>、</span><code>yarn</code><span> 等包管理工具的源为淘宝镜像，具体见 </span><a href='#712-npm-配置淘宝镜像'><span>npm 配置淘宝镜像</span></a><span>、</span><a href='#714-yarn-配置淘宝镜像'><span>yarn 配置淘宝镜像</span></a><span> —— 推荐</span></p></li><li><p><strong><span>作为全局工具包使用</span></strong><span>：安装 </span><code>cnpm</code><span> 工具包，使用 </span><code>cnpm</code><span> 作为包管理工具进行包的管理</span></p><ul><li><p><code>cnpm</code><span> 的安装 </span><code>npm install -g cnpm --registry=https://registry.npmmirror.com</code></p></li><li><p><code>cnpm</code><span> 的相关命令</span></p></li></ul></li><li><p><span>注：两种方式都可以提高包的下载速度</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>功能</span></th><th style='text-align:center;' ><span>命令</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>初始化</span></td><td style='text-align:center;' ><code>cnpm init</code></td></tr><tr><td style='text-align:center;' ><span>安装包</span></td><td style='text-align:center;' ><code>cnpm i 包名</code><br><code>cnpm i -S 包名</code><br><code>cnpm i -D 包名</code><br><code>cnpm i -g 包名</code></td></tr><tr><td style='text-align:center;' ><span>安装项目依赖</span></td><td style='text-align:center;' ><code>cnpm i</code></td></tr><tr><td style='text-align:center;' ><span>删除包</span></td><td style='text-align:center;' ><code>cnpm r 包名</code></td></tr></tbody></table></figure></li></ul></li></ol><h3 id='712-npm-配置淘宝镜像'><span>7.12 npm 配置淘宝镜像</span></h3><ol start='' ><li><p><span>方式一：直接配置 </span><code>npm config set registry https://registry.npmmirror.com/</code></p></li><li><p><span>方式二：使用 </span><code>nrm</code><span>（npm registry manager）配置 —— 推荐</span></p><ul><li><p><code>nrm</code><span> 的安装 </span><code>npm i -g nrm</code></p></li><li><p><code>nrm</code><span> 的使用</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>命令</span></th><th style='text-align:center;' ><span>功能</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><code>nrm ls</code></td><td style='text-align:center;' ><span>列出所有支持的镜像地址</span></td></tr><tr><td style='text-align:center;' ><code>nrm use 镜像名</code></td><td style='text-align:center;' ><span>修改 </span><code>npm</code><span> 的镜像源</span></td></tr><tr><td style='text-align:center;' ><code>npm config list</code></td><td style='text-align:center;' ><span>查看 </span><code>npm</code><span> 的配置信息，</span><br><span>通过 </span><code>registry</code><span> 字段检查镜像源是否配置成功</span></td></tr></tbody></table></figure></li><li><p><code>nrm</code><span> 支持的镜像</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="powershell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">npm</span> <span class="cm-operator">----------</span> <span class="cm-identifier">https</span><span class="cm-operator">://</span><span class="cm-identifier">registry</span><span class="cm-punctuation">.</span><span class="cm-identifier">npmjs</span><span class="cm-punctuation">.</span><span class="cm-identifier">org</span><span class="cm-operator">/</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">yarn</span> <span class="cm-operator">---------</span> <span class="cm-identifier">https</span><span class="cm-operator">://</span><span class="cm-identifier">registry</span><span class="cm-punctuation">.</span><span class="cm-identifier">yarnpkg</span><span class="cm-punctuation">.</span><span class="cm-identifier">com</span><span class="cm-operator">/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">tencent</span> <span class="cm-operator">------</span> <span class="cm-identifier">https</span><span class="cm-operator">://</span><span class="cm-identifier">mirrors</span><span class="cm-punctuation">.</span><span class="cm-identifier">cloud</span><span class="cm-punctuation">.</span><span class="cm-identifier">tencent</span><span class="cm-punctuation">.</span><span class="cm-identifier">com</span><span class="cm-operator">/</span><span class="cm-identifier">npm</span><span class="cm-operator">/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">cnpm</span> <span class="cm-operator">---------</span> <span class="cm-identifier">https</span><span class="cm-operator">://</span><span class="cm-builtin">r</span><span class="cm-punctuation">.</span><span class="cm-identifier">cnpmjs</span><span class="cm-punctuation">.</span><span class="cm-identifier">org</span><span class="cm-operator">/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">taobao</span> <span class="cm-operator">-------</span> <span class="cm-identifier">https</span><span class="cm-operator">://</span><span class="cm-identifier">registry</span><span class="cm-punctuation">.</span><span class="cm-identifier">npmmirror</span><span class="cm-punctuation">.</span><span class="cm-identifier">com</span><span class="cm-operator">/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">npmMirror</span> <span class="cm-operator">----</span> <span class="cm-identifier">https</span><span class="cm-operator">://</span><span class="cm-identifier">skimdb</span><span class="cm-punctuation">.</span><span class="cm-identifier">npmjs</span><span class="cm-punctuation">.</span><span class="cm-identifier">com</span><span class="cm-operator">/</span><span class="cm-identifier">registry</span><span class="cm-operator">/</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 138px;"></div><div class="CodeMirror-gutters" style="display: none; height: 138px;"></div></div></div></pre></li></ul></li></ol><h3 id='713-yarn-简介及简单使用'><span>7.13 yarn 简介及简单使用</span></h3><ol start='' ><li><p><span>yarn</span></p><ul><li><p><span>yarn 是一个由 FaceBook 在 2016 年推出的 JavaScript 包管理工具，官网 </span><a href='https://yarnpkg.com/' target='_blank' class='url'>https://yarnpkg.com/</a></p></li><li><p><span>yarn 具有速度超快、超级安全、超级可靠的特点</span></p></li></ul></li><li><p><span>yarn 的安装：</span><code>npm i -g yarn</code></p></li><li><p><span>yarn 的简单使用</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>功能</span></th><th style='text-align:center;' ><span>命令</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>初始化包</span></td><td style='text-align:center;' ><code>yarn init</code><br><code>yarn init -y</code></td></tr><tr><td style='text-align:center;' ><span>安装包</span></td><td style='text-align:center;' ><code>yarn add 包名</code><span>（生产依赖）</span><br><code>yarn add 包名 --dev</code><span>（开发依赖）</span><br><code>yarn global add 包名</code><span>（全局安装）</span></td></tr><tr><td style='text-align:center;' ><span>删除包</span></td><td style='text-align:center;' ><code>yarn remove 包名</code><span>（删除项目依赖包）</span><br><code>yarn global remove 包名</code><span>（全局删除包）</span></td></tr><tr><td style='text-align:center;' ><span>安装项目依赖</span></td><td style='text-align:center;' ><code>yarn</code></td></tr><tr><td style='text-align:center;' ><span>运行命令别名</span></td><td style='text-align:center;' ><code>yarn 命令别名</code></td></tr></tbody></table></figure></li></ol><blockquote><p><span>p.s. </span><code>yarn</code><span> 全局安装的包不可用，因为没有将全局安装的包的位置添加进环境变量，我们需要通过 </span><code>yarn global bin</code><span> 来查看 </span><code>yarn</code><span> 全局安装包的位置，并将对应路径添加进环境变量</span></p></blockquote><h3 id='714-yarn-配置淘宝镜像'><span>7.14 yarn 配置淘宝镜像</span></h3><p><code>yarn config set registry https://registry.npmmirror.com/</code></p><blockquote><p><span>p.s. 我们可以通过 </span><code>yarn config list</code><span> 的 </span><code>registry</code><span> 查看 </span><code>yarn</code><span> 的镜像源是否设置成功</span></p></blockquote><h3 id='715-npm-管理发布包'><span>7.15 npm 管理发布包</span></h3><ol start='' ><li><p><span>发布包</span></p><ul><li><p><span>创建文件夹，并创建文件 </span><code>index.js</code><span>， 在文件中声明函数，使用 </span><code>module.exports</code><span> 暴露</span></p></li><li><p><code>npm</code><span> 初始化工具包，</span><code>package.json</code><span>填写包的信息（</span><strong><span>包的名字是唯一的</span></strong><span>）</span></p></li><li><p><span>注册账号 </span><a href='https://www.npmjs.com/signup' target='_blank' class='url'>https://www.npmjs.com/signup</a><span> 并激活</span></p></li><li><p><span>修改为</span><strong><span>官方镜像</span></strong><span>（命令行中运行 </span><code>nrm use npm</code><span>）</span></p></li><li><p><span>命令行下 </span><code>npm login</code><span> 填写相关用户信息</span></p></li><li><p><span>命令行下 </span><code>npm publish</code><span> 提交包</span></p></li></ul></li><li><p><span>更新包</span></p><ul><li><p><span>更新包中的代码</span></p></li><li><p><span>测试代码是否可用</span></p></li><li><p><span>修改 </span><code>package.json</code><span> 中的</span><strong><span>版本号</span></strong></p></li><li><p><span>发布更新 </span><code>npm publish</code></p></li></ul></li><li><p><span>删除包：</span><code>npm unpublish --force</code></p><blockquote><p><span>p.s. 只有满足一定要求，才可以从 </span><code>npm</code><span> 服务中心删除包，见 </span><a href='https://docs.npmjs.com/policies/unpublish' target='_blank' class='url'>https://docs.npmjs.com/policies/unpublish</a></p></blockquote></li></ol><h3 id='716-其他包管理工具'><span>7.16 其他包管理工具</span></h3><p><span>除了</span><strong><span>编程语言</span></strong><span>领域有包管理工具之外，</span><strong><span>操作系统</span></strong><span>层面也存在包管理工具，不过这个包指的是『 </span><strong><span>软件包</span></strong><span> 』</span></p><ol start='' ><li><p><span>编程语言</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>语言</span></th><th style='text-align:center;' ><span>包管理工具</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>PHP</span></td><td style='text-align:center;' ><span>composer</span></td></tr><tr><td style='text-align:center;' ><span>Python</span></td><td style='text-align:center;' ><span>pip</span></td></tr><tr><td style='text-align:center;' ><span>Java</span></td><td style='text-align:center;' ><span>maven</span></td></tr><tr><td style='text-align:center;' ><span>Go</span></td><td style='text-align:center;' ><span>go mod</span></td></tr><tr><td style='text-align:center;' ><span>JavaScript</span></td><td style='text-align:center;' ><span>npm/yarn/cnpm/other</span></td></tr><tr><td style='text-align:center;' ><span>Ruby</span></td><td style='text-align:center;' ><span>rubyGems</span></td></tr></tbody></table></figure></li><li><p><span>操作系统</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>操作系统</span></th><th style='text-align:center;' ><span>包管理工具</span></th><th style='text-align:center;' ><span>网址</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>Centos</span></td><td style='text-align:center;' ><span>yum</span></td><td style='text-align:center;' ><a href='https://packages.debian.org/stable/' target='_blank' class='url'>https://packages.debian.org/stable/</a></td></tr><tr><td style='text-align:center;' ><span>Ubuntu</span></td><td style='text-align:center;' ><span>apt</span></td><td style='text-align:center;' ><a href='https://packages.ubuntu.com/' target='_blank' class='url'>https://packages.ubuntu.com/</a></td></tr><tr><td style='text-align:center;' ><span>MacOS</span></td><td style='text-align:center;' ><span>homebrew</span></td><td style='text-align:center;' ><a href='https://brew.sh/' target='_blank' class='url'>https://brew.sh/</a></td></tr><tr><td style='text-align:center;' ><span>Windows</span></td><td style='text-align:center;' ><span>chocolatey</span></td><td style='text-align:center;' ><a href='https://chocolatey.org/' target='_blank' class='url'>https://chocolatey.org/</a></td></tr></tbody></table></figure></li></ol><h2 id='8-node-版本管理工具-nvm'><span>8. node 版本管理工具 nvm</span></h2><ol start='' ><li><p><span>nvm 介绍：</span><code>nvm</code><span> 全称为 </span><code>Node Version Manager</code><span>，是一个用于管理 </span><code>node</code><span> 版本的工具，便于切换不同版本的 </span><code>Node.js</code></p></li><li><p><span>nvm 的下载</span></p><ul><li><p><a href='https://github.com/coreybutler/nvm-windows/releases' target='_blank' class='url'>https://github.com/coreybutler/nvm-windows/releases</a></p></li><li><p><span>下载 Assets 下的 </span><code>nvm-setup.exe</code></p></li></ul></li><li><p><span>nvm 的简单使用</span></p></li></ol><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>命令</span></th><th style='text-align:center;' ><span>含义</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><code>nvm list available</code></td><td style='text-align:center;' ><span>显示所有支持可下载的 Node.js 版本</span></td></tr><tr><td style='text-align:center;' ><code>nvm list</code></td><td style='text-align:center;' ><span>显示所有已安装的 Node.js 版本</span></td></tr><tr><td style='text-align:center;' ><code>nvm install 18.12.1</code></td><td style='text-align:center;' ><span>安装 18.12.1 版本的 Node.js</span><br><span>（安装指定版本的 Node.js）</span></td></tr><tr><td style='text-align:center;' ><code>nvm install latest</code></td><td style='text-align:center;' ><span>安装最新版本的 Node.js</span></td></tr><tr><td style='text-align:center;' ><code>nvm uninstall 18.12.1</code></td><td style='text-align:center;' ><span>删除 18.12.1 版本的 Node.js</span><br><span>（删除指定版本的 Node.js）</span></td></tr><tr><td style='text-align:center;' ><code>nvm use 18.12.1</code></td><td style='text-align:center;' ><span>切换当前使用的 Node.js 版本为 18.12.1</span></td></tr></tbody></table></figure><p>&nbsp;</p><h2 id='9-express-框架'><span>9. Express 框架</span></h2><ol start='' ><li><p><span>express</span></p><ul><li><p><span>express 是一个基于 Node.js 平台的极简、灵活的 </span><strong><span>WEB 应用开发框架</span></strong><span>，官方网址： </span><a href='https://www.expressjs.com.cn/' target='_blank' class='url'>https://www.expressjs.com.cn/</a></p></li><li><p><span>express 是一个</span><strong><span>封装好的工具包</span></strong><span>，封装了很多功能，便于我们开发 WEB 应用（</span><strong><span>HTTP 服务</span></strong><span>）</span></p></li></ul></li><li><p><span>express 的下载和导入</span></p><ul><li><p><span>下载 </span><code>npm i express</code></p></li><li><p><span>导入 </span><code>const express = require(&#39;express&#39;);</code></p></li></ul></li><li><p><span>注意事项</span></p><ul><li><p><span>express 本身是一个 </span><code>npm</code><span> 包，因此可以使用 </span><code>npm i 包名</code><span> 的方式下载</span></p></li><li><p><span>对于使用 express 编写的代码，推荐使用 </span><code>nodemon</code><span> 包对应的命令 </span><code>nodemon 文件名</code><span> 的方式执行</span></p></li></ul></li></ol><h3 id='91-express-框架的简单使用'><span>9.1 Express 框架的简单使用</span></h3><p><a href='./CODES/EXPRESSData/33-express-极简单使用.js'><span>使用 express 编写创建一个 http 服务</span></a><span>大致需要以下几个步骤</span></p><ol start='' ><li><p><span>导入 express </span><code>const express = require(&#39;express&#39;);</code></p></li><li><p><span>创建应用对象 </span><code>const app = express();</code></p></li><li><p><span>创建路由规则 </span><code>app.get(url, (req, res) =&gt; {})</code></p></li><li><p><span>监听端口，启动服务 </span><code>app.listen(9000, () =&gt; {})</code></p></li></ol><h3 id='92-express-路由'><span>9.2 Express 路由</span></h3><ol start='' ><li><p><span>什么是 Express 路由</span></p><ul><li><p><span>Express 路由指的是 Express.js 框架中用于</span><strong><span>定义应用程序如何响应特定 URL 请求的机制</span></strong></p></li><li><p><span>路由用于</span><strong><span>将 HTTP 请求（例如 GET、POST 等）映射到相应的处理程序函数</span></strong><span>，以便执行特定的操作并生成相应的响应</span></p></li><li><p><span>Express 的路由系统</span><strong><span>允许您定义多个路由</span></strong><span>，当客户端发出 HTTP </span><strong><span>请求时</span></strong><span>，Express 会根据请求的 URL 和方法（GET、POST 等）来选择适当的路由，并执行相应的处理程序函数来处理请求</span></p></li></ul></li><li><p><span>路由的组成：请求方法、路径、回调函数</span></p></li></ol><h4 id='921-路由的使用'><span>9.2.1 路由的使用</span></h4><ol start='' ><li><p><span>路由的语法为 </span><code>app.&lt;method&gt;(path, callback)</code></p><ul><li><p><span>app 是由 express() 常见的应用对象</span></p></li><li><p><span>method 是 GET、POST 等请求方式</span></p></li><li><p><span>path 是网页请求 URL 的路径</span></p></li><li><p><span>callback 是当前路由的处理函数</span></p></li></ul></li><li><p><span>根据 method、path 的不同，</span><a href='./CODES/EXPRESSData/34-express-路由的使用.js'><span>路由的使用</span></a><span>可以有多种形式，实现不同的功能</span></p></li></ol><h4 id='922-提取请求报文的参数'><span>9.2.2 提取请求报文的参数</span></h4><p><span>我们需要通过 request 这个封装了请求报文的对象，来提取请求报文中的数据；express 框架</span><strong><span>封装了一些 API</span></strong><span> 来方便获取请求报文中的数据，同时</span><strong><span>兼容原生</span></strong><span> http 模块中数据的获取方式</span></p><ol start='' ><li><p><span>原生操作（即 http 模块中使用的操作，express 兼容）</span></p><ul><li><p><span>请求方法 </span><code>request.method</code></p></li><li><p><span>请求路径 </span><code>request.url</code></p></li><li><p><span>请求 http 协议版本 </span><code>request.httpVersion</code></p></li><li><p><span>请求头 </span><code>request.headers</code></p></li></ul></li><li><p><span>express 封装的操作（express 独有）</span></p><ul><li><p><span>请求 URL 的路径 </span><code>request.path</code></p></li><li><p><span>请求 URL 的查询字符串 </span><code>request.query</code></p></li><li><p><span>获取 ip </span><code>request.ip</code></p></li><li><p><span>请求头 </span><code>value = request.get(headName)</code></p></li></ul></li></ol><h4 id='923-动态路由参数的使用'><span>9.2.3 动态路由参数的使用</span></h4><p><span>我们可以在路由的路径部分设定一个</span><strong><span>动态路由参数</span></strong><span>，即一个</span><strong><span>使用冒号开头</span></strong><span>的部分，该参数可以用于匹配 URL 中的任何值，并且在 </span><code>request.params</code><span> 对象中以键值对的形式存储，如以下示例</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="javascript"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="javascript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">app</span>.<span class="cm-property">get</span>(<span class="cm-string">'/:id.html'</span>, (<span class="cm-def">request</span>, <span class="cm-def">response</span>) <span class="cm-operator">=&gt;</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-string-2">`动态路由参数 id 的值为 ${</span><span class="cm-variable-2">request</span>.<span class="cm-property">params</span>.<span class="cm-property">id</span><span class="cm-string-2">}`</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-2">response</span>.<span class="cm-property">end</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><p><span>在该示例中，通过 </span><code>:id</code><span> 标识了一个动态路由参数 </span><code>id</code><span>，用于匹配路径中 &#39;/&#39; 和 &#39;.html&#39; 之间的任意内容，我们可以在回调函数中，通过 </span><code>request.params</code><span> 对象访问到 </span><code>id</code><span> 的内容；</span><code>request.params</code><span> 是一个对象，</span><code>id</code><span> 是属性名，</span><code>id</code><span> 匹配的值就是 </span><code>request.params.id</code></p><h3 id='93-express-设置响应'><span>9.3 Express 设置响应</span></h3><p><span>与提取请求报文的参数类似，我们需要通过 response 这个封装了响应报文的对象，来设置响应报文中的数据；同时，express 框架也</span><strong><span>封装了一些 API</span></strong><span> 来方便设置响应报文中的数据，同时</span><strong><span>兼容原生</span></strong><span> http 模块中数据的获取方式</span></p><ol start='' ><li><p><span>原生操作（http 模块中使用的操作，express 中兼容）</span></p><ul><li><p><span>设置响应状态码 </span><code>response.statusCode = xxx</code></p></li><li><p><span>设置响应状态描述 </span><code>response.statusMessage = xxx</code></p></li><li><p><span>设置响应头 </span><code>response.setHeader(&#39;xxx&#39;, &#39;yyy&#39;)</code></p></li><li><p><span>设置响应体</span></p><ul><li><p><code>response.write(&#39;xxxx&#39;)</code></p></li><li><p><code>response.end(&#39;xxxx&#39;)</code></p></li></ul></li></ul></li><li><p><span>express 封装的操作（express 独有）</span></p><ul><li><p><span>设置响应状态码 </span><code>response.status(&#39;xxx&#39;)</code></p></li><li><p><span>设置响应头 </span><code>response.set(&#39;xxx&#39;, &#39;yyy&#39;)</code></p></li><li><p><span>设置响应体 </span><code>response.send(&#39;xxxx&#39;)</code><span>（调用该方法时会自动添加响应头 </span><code>content-type: text/html; charset=utf-8</code><span>，因此中文不会乱码）</span></p></li><li><p><span>重定向到一个新的网页 </span><code>response.redirect(url)</code></p></li><li><p><span>下载响应，自动下载内容 </span><code>response.download(path)</code></p></li><li><p><span>JSON 响应，显示一个 json 内容 </span><code>response.json(json 字符串)</code><span>（调用该方法时会自动添加响应头 </span><code>content-type: application/json; charset=utf-8</code><span>）</span></p></li><li><p><span>文件响应，显示一个文件（如 html） </span><code>response.sendFine(path)</code></p></li></ul></li></ol><blockquote><p><span>p.s. express 封装的 response 对象可以链式调用来设置响应报文的内容，如 </span><code>res.status(404).set(&#39;content-type&#39;, &#39;text/html&#39;).end(&#39;Not Found&#39;)</code></p></blockquote><h3 id='94-中间件'><span>9.4 中间件</span></h3><h4 id='941-中间件简介'><span>9.4.1 中间件简介</span></h4><ol start='' ><li><p><span>中间件（Middleware）</span></p><ul><li><p><span>中间件本质是一个</span><strong><span>回调函数</span></strong><span>，又称</span><strong><span>中间件函数</span></strong></p></li><li><p><span>中间件函数可以像路由的回调函数一样访问请求对象 </span><code>request</code><span> 和响应对象 </span><code>response</code></p></li></ul></li><li><p><span>中间件的作用：使用函数来封装公共操作，简化代码</span></p></li><li><p><span>中间件的分类</span></p><ul><li><p><span>全局中间件：浏览器发送请求到服务端之后，</span><strong><span>首先立即执行全局中间件函数</span></strong><span>，然后再交给后续的路由回调函数处理</span></p></li><li><p><span>局部中间件：只有</span><strong><span>满足一定路由规则</span></strong><span>之后，才执行对应的局部中间件函数</span></p></li></ul></li><li><p><span>中间件函数的声明</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="javascript"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="javascript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">let</span> <span class="cm-def">middleware</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span>(<span class="cm-def">request</span>, <span class="cm-def">response</span>, <span class="cm-def">next</span>){</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment">/* </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp; &nbsp;  这里是实现公共操作的代码</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp; */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable-2">next</span>(); <span class="cm-comment">// 如果在执行完当前中间件函数之后，仍希望执行后续的中间件函数或路由回调，则需要调用 next() 方法，否则会中断请求处理的过程</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 161px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre></li></ol><h4 id='942-全局中间件'><span>9.4.2 全局中间件</span></h4><ol start='' ><li><p><span>我们可以使用 </span><code>app.use(callback)</code><span> 的方式定义一个全局中间件，也可以使用该方式定义多个全局中间件，即多次调用 </span><code>app.use</code><span> 方法，每次都定义不同的全局中间件</span></p></li><li><p><span>我们可以利用全局中间件实现</span><a href='./CODES/EXPRESSData/36-express-全局中间件.js'><span>浏览器请求日志的记录</span></a></p></li></ol><h4 id='943-路由中间件'><span>9.4.3 路由中间件</span></h4><ol start='' ><li><p><span>我们可以使用 </span><code>app.请求方式(请求路径, 路由中间件函数1, 路由中间件函数2, ..., 路由中间件函数n, (request, response) =&gt; {})</code><span> 的方式为某些路由规则定义一个或多个路由中间件，执行顺序为 </span><code>路由中间件函数1</code><span> =&gt; </span><code>...</code><span> =&gt; </span><code>路由中间件函数n</code><span> =&gt; </span><code>路由回调函数</code></p></li><li><p><span>我们可以利用路由中间件</span><a href='./CODES/EXPRESSData/37-express-路由中间件.js'><span>封装多个路由的公共操作</span></a></p></li></ol><h4 id='944-静态资源中间件'><span>9.4.4 静态资源中间件</span></h4><ol start='' ><li><p><span>静态资源中间件</span></p><ul><li><p><span>我们可以通过 </span><code>express.static(rootPath)</code><span> 获取一个</span><strong><span>静态资源中间件</span></strong><span>，这是 express </span><strong><span>内置</span></strong><span>的处理静态资源的中间件，其中参数 </span><code>rootPath</code><span> 用于设置静态资源目录或网站根目录</span></p></li><li><p><span>例如，当浏览器的请求路径为 </span><code>/js/app.js</code><span> 那么服务器就会在其本地的 </span><code>rootPath + /js/app.js</code><span> 中去寻找该静态资源，并将该资源作为响应返回给浏览器</span></p></li><li><p><span>同时，当我们通过浏览器获取静态资源时，该中间件会</span><strong><span>自动设置</span></strong><span>资源的 </span><code>mime</code><span> 类型</span></p></li><li><p><span>一般的，我们使用 </span><code>app.use(express.static(rootPath))</code><span> 来执行这个静态资源中间件</span></p></li></ul></li><li><p><span>静态资源与动态资源的处理方式</span></p><ul><li><p><span>静态资源：如视频、图片等，我们可以通过使用静态资源中间件，直接通过浏览器的请求路径获取到对应的静态资源的响应</span></p></li><li><p><span>动态资源：如排行榜、新闻等，我们可以通过设置路由，匹配对应浏览器的请求路径，来实现动态资源的加载</span></p></li></ul></li><li><p><span>关于静态资源中间件的几点注意</span></p><ul><li><p><span>如果浏览器的请求路径是 </span><code>/</code><span>，则默认响应的是静态资源目录下的 </span><code>index.html</code><span> 文件；换句话说，直接打开某个网页，服务器直接响应静态资源目录下的 </span><code>index.html</code><span> 文件</span></p></li><li><p><span>如果静态资源与路由规则同时匹配，则按照先后顺序，</span><strong><span>谁先匹配谁就响应</span></strong><span>；换句话说，如果静态资源目录下有 </span><code>index.html</code><span> 文件，同时服务中也设置了 </span><code>/index.html</code><span> 路由，则浏览器的请求路径为 </span><code>/index.html</code><span> 时，显示的是静态资源还是路由的响应，这是需要根据二者在服务中定义的先后顺序决定的</span></p></li><li><p><span>一般而言，路由响应动态资源，静态资源中间件响应静态资源</span></p></li></ul></li></ol><h3 id='95-获取请求体数据'><span>9.5 获取请求体数据</span></h3><p><span>express 可以基于 body-parser 包获取请求体的数据</span></p><ul><li><p><span>body-parser 可以通过 </span><code>npm install body-parser</code><span> 下载，通过 </span><code>const bodyParser = require(&#39;body-parser&#39;)</code><span> 导入</span></p></li><li><p><span>body-parser 包含一系列的中间件，通常作为</span><strong><span>路由中间件</span></strong><span>使用，如</span></p><ul><li><p><code>let usrParser = bodyParser.urlencoded({extend: false})</code><span> 该中间件用于处理查询字符串格式的请求体</span></p></li><li><p><code>let jsonParser = bodyParser.json()</code><span> 该中间件用于处理 json 格式的请求体</span></p></li></ul></li><li><p><span>中间件函数 </span><code>usrParser</code><span>、</span><code>jsonParser</code><span> 执行完毕后，会向 </span><code>request</code><span> 对象上添加一个叫做 </span><code>body</code><span> 的属性，此时我们可以通过 </span><code>request.body</code><span> 获取请求体数据，该数据是一个键值对，存储着中间件函数处理好的请求体数据</span></p></li></ul><h3 id='96-防盗链'><span>9.6 防盗链</span></h3><ol start='' ><li><p><span>防盗链是什么？防盗链技术通常用于保护网站的图片、视频或其他重要资源不被其他网站非法引用</span></p></li><li><p><span>防盗链的作用</span></p><ul><li><p><strong><span>保护网站资源</span></strong><span>的唯一性和权益，防止被非法复制或滥用</span></p></li><li><p><strong><span>减轻服务器的压力</span></strong><span>，如果太多的网站都链接到同一个资源，那么可能会消耗大量的服务器带宽和处理能力，影响网站的正常运行</span></p></li></ul></li><li><p><span>防盗链的实现方式</span></p><ul><li><p><span>实施防盗链的一种常见方法是使用服务器的 </span><code>Referer</code><span> 请求头。</span><code>Referer</code><span> 请求头可以告诉服务器这个请求是从哪个页面发出的。服务器可以检查这个 </span><code>Referer</code><span> 是否在允许的列表中。如果是，那么请求就被接受，资源可以被正常访问；如果不是，服务器可以拒绝这个请求，通常是返回一个404错误，表示请求的资源不存在。</span></p></li><li><p><span>例如，假设您的网站是 example.com，您有一张图片，您不希望其他网站直接链接。那么您可以在服务器上设置一项规则，检查所有请求该图片的 </span><code>Referer</code><span> 头。如果 </span><code>Referer</code><span> 是 example.com，那么请求被接受；如果 </span><code>Referer</code><span> 是其他的，比如 other.com，那么服务器就拒绝请求，返回 404 错误。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="javascript" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="javascript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">express</span> <span class="cm-operator">=</span> <span class="cm-variable">require</span>(<span class="cm-string">'express'</span>);</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">app</span> <span class="cm-operator">=</span> <span class="cm-variable">express</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">allowedDomains</span> <span class="cm-operator">=</span> [<span class="cm-string">'https://www.example.com'</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">app</span>.<span class="cm-property">use</span>((<span class="cm-def">req</span>, <span class="cm-def">res</span>, <span class="cm-def">next</span>) <span class="cm-operator">=&gt;</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">const</span> <span class="cm-def">referer</span> <span class="cm-operator">=</span> <span class="cm-variable-2">req</span>.<span class="cm-property">headers</span>.<span class="cm-property">referer</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">if</span> (<span class="cm-operator">!</span><span class="cm-variable-2">referer</span> <span class="cm-operator">||</span> <span class="cm-variable">allowedDomains</span>.<span class="cm-property">some</span>(<span class="cm-def">domain</span> <span class="cm-operator">=&gt;</span> <span class="cm-variable-2">referer</span>.<span class="cm-property">startsWith</span>(<span class="cm-variable-2">domain</span>))) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">// If the referer header is empty or matches an allowed domain, allow the request to proceed.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable-2">next</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">// If the referer header doesn't match an allowed domain, return a 404 response.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable-2">res</span>.<span class="cm-property">sendStatus</span>(<span class="cm-number">404</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Routes and other middleware functions go here...</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">app</span>.<span class="cm-property">listen</span>(<span class="cm-number">3000</span>, () <span class="cm-operator">=&gt;</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-string">'Server listening on port 3000'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">});</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 553px;"></div><div class="CodeMirror-gutters" style="display: none; height: 553px;"></div></div></div></pre></li></ul></li><li><p><span>关于 referer 请求头</span></p><p><code>Referer</code><span>（有时拼写为</span><code>Referrer</code><span>）是HTTP请求头中的一个字段，用于指示客户端（通常是浏览器）发起请求的源页面URL。它在以下场景中起作用：</span></p><ul><li><p><strong><span>页面跳转</span></strong><span>：当用户点击一个链接从一个页面跳转到另一个页面时，新页面的请求会带有</span><code>Referer</code><span>头，值为原始页面的URL。</span></p></li><li><p><strong><span>资源加载</span></strong><span>：当HTML页面加载时，浏览器会解析页面中的引用资源（如CSS、JavaScript、图片等）。浏览器为这些资源的请求设置</span><code>Referer</code><span>头，值为加载这些资源的HTML页面的URL。</span></p></li><li><p><strong><span>安全与隐私</span></strong><span>：</span><code>Referer</code><span>头可以用于网站分析用户来源，但同时也可能涉及用户隐私。因此，浏览器允许用户控制或禁用</span><code>Referer</code><span>头的发送，一些隐私模式或严格隐私设置可能不会发送</span><code>Referer</code><span>信息。</span></p></li><li><p><strong><span>安全应用</span></strong><span>：</span><code>Referer</code><span>头有时用于防止恶意请求，比如验证用户是否从预期的页面发起请求，或者用于防止图片被盗链。</span></p></li></ul></li></ol><h3 id='97-路由模块化'><span>9.7 路由模块化</span></h3><ol start='' ><li><p><span>路由模块化：express 中为了方便对路由规则的管理，使用 </span><code>Router</code><span> 实现路由的模块化，从而更好地管理路由</span></p></li><li><p><code>Router</code><span>：是一个完整的中间件和路由系统，可以看作是一个小型的 </span><code>app</code><span> 对象</span></p></li><li><p><a href='./CODES/EXPRESSData/40-express-路由模块化.js'><span>如何使用 </span><code>Router</code><span> 实现路由模块化？</span></a></p><ul><li><p><span>第一步：创建独立的 </span><code>.js</code><span> 文件，存放路由规则，并通过 </span><code>module.exports</code><span> 将 </span><code>Router</code><span> 对外暴露</span></p></li><li><p><span>第二步：在主文件中使用 </span><code>require</code><span> 导入外部文件暴露的 </span><code>Router</code><span>，并使用 </span><code>app.use</code><span> 使用该路由规则</span></p></li></ul></li></ol><h3 id='98-ejs-模板引擎'><span>9.8 EJS 模板引擎</span></h3><ol start='' ><li><p><span>EJS 的简单介绍</span></p><ul><li><p><span>模板引擎是分离</span><strong><span>用户界面和业务数据</span></strong><span>的一种技术</span></p></li><li><p><span>EJS 是一个高效的 JavaScript 的模板引擎</span></p></li><li><p><span>我们可以使用 </span><code>npm install ejs</code><span> 命令安装 EJS 模板引擎</span></p></li></ul></li><li><p><span>EJS 的基本使用</span></p><ul><li><p><code>ejs.render(模板字符串, 变量解释对象)</code></p><ul><li><p><span>描述</span></p><ul><li><p><span>该方法是 EJS 模板引擎中用于</span><strong><span>渲染模板</span></strong><span>的核心方法</span></p></li><li><p><span>该方法将</span><strong><span>模板字符串和变量解释对象</span></strong><span>结合起来，生成最终的 HTML 字符串</span></p></li><li><p><span>该方法会</span><strong><span>解析模板字符串</span></strong><span>，找到所有 </span><code>&lt;%= %&gt;</code><span> 标记，并用变量解释对象中对应的值替换它们</span></p></li></ul></li><li><p><span>参数</span></p><ul><li><p><strong><span>模板字符串</span></strong><span>：字符串，可以使用 EJS 语法嵌入动态内容，如 </span><code>&lt;%= 变量名 %&gt;</code><span> 这个 EJS 语法表示将变量名对应的值插入到模板的这个位置</span></p></li><li><p><strong><span>变量解释对象</span></strong><span>：对象，包含了模板中可能出现的变量名和对应的值，该对象用于提供数据给模板，以便模板可以根据数据动态生成内容</span></p></li></ul></li><li><p><span>返回值：字符串，即解析后的 HTML 内容</span></p></li><li><p><span>示例</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="javascript"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="javascript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">template</span> <span class="cm-operator">=</span> <span class="cm-string">'&lt;h1&gt;Hello, &lt;%= name %&gt;!&lt;/h1&gt;'</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">data</span> <span class="cm-operator">=</span> { <span class="cm-property">name</span>: <span class="cm-string">'John'</span> };</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">html</span> <span class="cm-operator">=</span> <span class="cm-variable">ejs</span>.<span class="cm-property">render</span>(<span class="cm-variable">template</span>, <span class="cm-variable">data</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable">html</span>); <span class="cm-comment">// 输出: &lt;h1&gt;Hello, John!&lt;/h1&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 138px;"></div><div class="CodeMirror-gutters" style="display: none; height: 138px;"></div></div></div></pre></li><li><p><span>EJS 模板字符串的常用语法</span></p><ul><li><p><span>变量嵌入 </span><code>&lt;%= 变量名 %&gt;</code></p></li><li><p><span>代码执行</span></p><ul><li><p><code>&lt;% 代码 %&gt;</code><span>：执行 JavaScript 代码，但不会将其结果输出到模板；通常用于</span><strong><span>控制流程</span></strong><span>，如条件语句、循环等</span></p></li><li><p><code>&lt;%= 代码 %&gt;</code><span>：将 JavaScript 代码的结果</span><strong><span>转义后插入</span></strong><span>到 HTML 中；这样做可以</span><strong><span>防止 HTML 注入攻击</span></strong><span>，因为特殊字符会被转义成它们的 HTML 实体，从而使其成为安全的文本</span></p></li><li><p><code>&lt;%- 代码 %&gt;</code><span>：直接将 JavaScript 代码的结果插入到 HTML 中，而</span><strong><span>不进行转义</span></strong><span>；这在需要输出 HTML 标签或其他 HTML 特性的情况下很有用，但也要小心，因为它可</span><strong><span>能导致 XSS（跨站脚本攻击）安全漏洞</span></strong></p></li></ul></li></ul></li></ul></li></ul></li><li><p><span>EJS 渲染 HTML 举例：即将 HTML 作为一个模板字符串，然后通过 </span><code>ejs.render</code><span> 方法，根据变量解释对象解析 HTML 中使用 </span><code>&lt;%= %&gt;</code><span> 标记地方的变量，最后返回一个渲染后的 HTML</span></p><ul><li><p><span>示例1：</span><a href='./CODES/EXPRESSData/41-express-练习-变量匹配.js'><span>变量匹配</span></a></p></li><li><p><span>示例2：</span><a href='./CODES/EXPRESSData/42-express-练习-列表渲染.js'><span>列表渲染</span></a></p></li><li><p><span>示例3：</span><a href='./CODES/EXPRESSData/43-express-练习-条件渲染.js'><span>条件渲染</span></a></p></li></ul></li><li><p><a href='./CODES//EXPRESSData/44-express-express中使用ejs.js'><span>如何在 Express 中使用 EJS 模板引擎</span></a></p><ul><li><p><span>第一步：通过应用对象设置 Express 的模板引擎为 EJS以及模板文件的存放位置</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="javascript"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="javascript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">app</span>.<span class="cm-property">set</span>(<span class="cm-string">'view engine'</span>, <span class="cm-string">'ejs'</span>); <span class="cm-comment">// 设置 Express 应用对象的模板引擎为 EJS</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">app</span>.<span class="cm-property">set</span>(<span class="cm-string">'views'</span>, <span class="cm-string">'路径'</span>); <span class="cm-comment">// 设置 Express 应用对象的模板文件的存放位置</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 注1：'view engine', 'views' 是固定的键名，不可改变</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 注2：路径必须是绝对路径，因为相对路径不是相对于本文件，而是命令行的工作目录</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 注3：模板文件的后缀名是 .ejs</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="display: none; height: 115px;"></div></div></div></pre></li><li><p><span>第二步：使用 </span><code>response.render(模板文件名, 变量解释对象)</code><span> 方法渲染模板文件夹下的指定模板，并使用变量解释对象解析这个模板，解析内容就是服务端的响应</span></p></li></ul></li></ol><h3 id='99-express-application-generator'><span>9.9 Express application generator</span></h3><ul><li><p><code>express-generator</code><span> 是一个包，用于快速创建一个 Express 应用骨架，我们可以通过 </span><code>npm install -g express-generator</code><span> 全局安装这个包，之后会暴露一个 </span><code>express</code><span> 命令</span></p></li><li><p><span>我们可以通过 </span><code>express -e 路径</code><span> 在指定位置快速创建一个支持 ejs 模板引擎的 Express 应用骨架，然后需要使用 </span><code>npm i</code><span> 安装对应依赖</span></p></li></ul><h3 id='910-通过表单的文件上传与对应报文的处理'><span>9.10 通过表单的文件上传与对应报文的处理</span></h3><ul><li><p><a href='./CODES/EXPRESSData/express-generator-test/views/portrait.ejs'><span>表单逻辑</span></a></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="html"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="html"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.38281px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">&lt;!-- 如果要通过表单上传一个文件（同时请求方法时 POST），此时必须要有属性 enctype="multipart/form-data" --&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">form</span> <span class="cm-attribute">action</span>=<span class="cm-string">"/portrait"</span> <span class="cm-attribute">method</span>=<span class="cm-string">"post"</span> <span class="cm-attribute">enctype</span>=<span class="cm-string">"multipart/form-data"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  Username: <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"text"</span> <span class="cm-attribute">name</span>=<span class="cm-string">"username"</span><span class="cm-tag cm-bracket">&gt;&lt;</span><span class="cm-tag">br</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  Avatar: <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"file"</span> <span class="cm-attribute">name</span>=<span class="cm-string">"avatar"</span><span class="cm-tag cm-bracket">&gt;&lt;</span><span class="cm-tag">br</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">hr</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">button</span><span class="cm-tag cm-bracket">&gt;</span>SUBMIT<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">button</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">form</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 184px;"></div><div class="CodeMirror-gutters" style="display: none; height: 184px;"></div></div></div></pre></li><li><p><a href='./CODES/EXPRESSData/express-generator-test/routes/index.js'><span>路由逻辑</span></a></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="javascript" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="javascript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">/* 文件上传 GET ＆ POST */</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">// GET 请求：表单页面，提示用户提交个人信息</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">router</span>.<span class="cm-property">get</span>(<span class="cm-string">'/portrait'</span>, (<span class="cm-def">_</span>, <span class="cm-def">res</span>) <span class="cm-operator">=&gt;</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable-2">res</span>.<span class="cm-property">render</span>(<span class="cm-string">'portrait'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">// POST 请求：对用户提交的个人信息（包括文件）进行处理</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">// 文件的处理使用 formidable 包，使用 npm i formidable 安装包</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">const</span> { <span class="cm-def">formidable</span> } <span class="cm-operator">=</span> <span class="cm-variable">require</span>(<span class="cm-string">'formidable'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">router</span>.<span class="cm-property">post</span>(<span class="cm-string">'/portrait'</span>, (<span class="cm-def">req</span>, <span class="cm-def">res</span>) <span class="cm-operator">=&gt;</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">// 表单对象，用于解析表单请求中的内容</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">const</span> <span class="cm-def">form</span> <span class="cm-operator">=</span> <span class="cm-variable">formidable</span>({</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-property">multiples</span>: <span class="cm-atom">true</span>, <span class="cm-comment">// 设置是否在本地存储上传的文件</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-property">uploadDir</span>: <span class="cm-variable">__dirname</span> <span class="cm-operator">+</span> <span class="cm-string">'/../public/resources'</span>, <span class="cm-comment">// 设置上传文件的保存目录</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-property">keepExtensions</span>: <span class="cm-atom">true</span> <span class="cm-comment">// 设置是否保存文件的后缀</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable-2">form</span>.<span class="cm-property">parse</span>(<span class="cm-variable-2">req</span>, (<span class="cm-def">err</span>, <span class="cm-def">fields</span>, <span class="cm-def">files</span>) <span class="cm-operator">=&gt;</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable-2">err</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">next</span>(<span class="cm-variable-2">err</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-keyword">return</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">/* </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp; &nbsp; &nbsp; 在获取表单数据、保存文件到本地后，仍需要做一个操作：保存访问该图片的 URL（绝对路径，省略协议、域名、端口等信息），然后将该数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp; &nbsp; &nbsp; 据存放到数据库中，便于以后的访问</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  */</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">let</span> <span class="cm-def">fileUrl</span> <span class="cm-operator">=</span> <span class="cm-string">'/resources/'</span> <span class="cm-operator">+</span> <span class="cm-variable-2">files</span>.<span class="cm-property">avatar</span>[<span class="cm-number">0</span>].<span class="cm-property">newFilename</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-variable-2">fileUrl</span>); <span class="cm-comment">// /resources/5868edc658fb373e76f7e9200.js</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-number">123</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-2">res</span>.<span class="cm-property">json</span>({ <span class="cm-property">fields</span>, <span class="cm-property">files</span> }); <span class="cm-comment">// fields 表示非文件数据信息；files 表示文件数据信息</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> });</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 829px;"></div><div class="CodeMirror-gutters" style="display: none; height: 829px;"></div></div></div></pre></li></ul><h2 id='10-mongodb'><span>10. MongoDB</span></h2><h3 id='101-mongodb-简介'><span>10.1 MongoDB 简介</span></h3><ol start='' ><li><p><span>数据库（Database）</span></p><ul><li><p><span>数据库是按照数据结构来组织、存储和管理数据的</span><strong><span>应用程序</span></strong></p></li><li><p><span>数据库的主要作用是</span><strong><span>管理数据</span></strong><span>，实现对数据的</span><strong><span>增、删、改、查</span></strong></p></li><li><p><span>相比于纯文件管理数据，数据库管理数据速度更快、扩展性更强、安全性更强</span></p></li></ul></li><li><p><span>MongoDB</span></p><ul><li><p><span>MongoBD 是一个</span><strong><span>基于分布式文件存储的数据库</span></strong><span>，</span><a href='https://www.mongodb.com/'><span>点击跳转官网</span></a></p></li><li><p><span>MongoDB 语法与 JavaScript 相似，易上手，学习成本低</span></p></li></ul></li><li><p><span>MongoDB 的核心概念</span></p><ul><li><p><span>数据库（database）</span></p><ul><li><p><span>数据库是一个数据仓库</span></p></li><li><p><strong><span>一个数据库服务中可以创建很多数据库</span></strong></p></li><li><p><strong><span>一个数据库中可以存放很多集合</span></strong></p></li></ul></li><li><p><span>集合（collection）</span></p><ul><li><p><span>集合类似 JS 中的数组</span></p></li><li><p><strong><span>一个集合中可以存放很多文档</span></strong></p></li></ul></li><li><p><span>文档（document）</span></p><ul><li><p><strong><span>文档是数据库中的最小单位</span></strong><span>，类似 JS 中的对象</span></p></li></ul></li><li><p><span>注意</span></p><ul><li><p><span>一般而言，</span><strong><span>一个项目使用一个数据库</span></strong><span>，一个集合存储</span><strong><span>同一种类型的数据</span></strong></p></li><li><p><span>对象中的属性又称为</span><strong><span>字段</span></strong></p></li></ul></li></ul><p><span> </span><img src="https://cdn.jsdelivr.net/gh/Nasir1423/blog-img@main/20240418222049.png" style="width: 70%; margin: 0 auto; display: block;"/></p></li></ol><h3 id='102-mongodb-的下载与配置'><span>10.2 MongoDB 的下载与配置</span></h3><ol start='' ><li><p><span>下载：推荐在 </span><a href='https://www.mongodb.com/try/download/community' target='_blank' class='url'>https://www.mongodb.com/try/download/community</a><span> 下载 zip 类型，然后再进行相关配置（这里下载的是 5.0.14 版本）</span></p></li><li><p><span>配置</span></p><ul><li><p><span>压缩包移动到 </span><code>C:\Program Files</code><span> 并解压</span></p></li><li><p><span>创建 </span><code>C:\data\db</code><span>，mongodb 默认将数据保存在该文件夹</span></p></li><li><p><span>将 mongodb 的 bin 目录添加到环境变量</span></p></li><li><p><span>【服务】运行 </span><code>mongod</code><span> 命令，启动 mongodb 服务，出现 waiting for connections 则表明服务已启动成功</span></p></li><li><p><span>【客户端】运行 </span><code>mongo</code><span> 命令，启动 mongodb 客户端，用于连接本机的 mongodb 服务</span></p></li><li><p><span>【客户端】可以向【服务】发送请求，【服务】返回给【客户端】响应</span></p></li></ul></li><li><p><span>注意：如果选中 mongodb 服务窗口的内容，则会停止服务，可以通过回车键取消选中</span></p></li></ol><h3 id='103-mongodb-的操作命令'><span>10.3 MongoDB 的操作命令</span></h3><ol start='' ><li><p><span>数据库命令</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>命令</span></th><th style='text-align:center;' ><span>功能</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><code>show dbs</code></td><td style='text-align:center;' ><span>显示所有不为空的数据库</span></td></tr><tr><td style='text-align:center;' ><code>use 数据库名</code></td><td style='text-align:center;' ><span>切换到指定的数据库，如不存在则会自动创建</span></td></tr><tr><td style='text-align:center;' ><code>db</code></td><td style='text-align:center;' ><span>显示当前正在使用的数据库</span></td></tr><tr><td style='text-align:center;' ><code>use 数据库名</code><span> </span><br><span> </span><code>db.dropDatabase()</code></td><td style='text-align:center;' ><span>删除当前正在使用的数据库</span></td></tr></tbody></table></figure><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cmd"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cmd"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-operator">&gt;</span> <span class="cm-identifier">show</span> <span class="cm-identifier">dbs</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-identifier">admin</span> &nbsp; <span class="cm-number">0.000GB</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-identifier">config</span> &nbsp;<span class="cm-number">0.000GB</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-identifier">local</span> &nbsp; <span class="cm-number">0.000GB</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cmd"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cmd"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-identifier">use</span> <span class="cm-identifier">admin</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">switched</span> <span class="cm-identifier">to</span> <span class="cm-identifier">db</span> <span class="cm-identifier">admin</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cmd"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cmd"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-identifier">db</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">admin</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cmd"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cmd"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-identifier">use</span> <span class="cm-identifier">bilibili</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">switched</span> <span class="cm-identifier">to</span> <span class="cm-identifier">db</span> <span class="cm-identifier">bilibili</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-identifier">db</span><span class="cm-punctuation">.</span><span class="cm-identifier">dropDatabase</span><span class="cm-punctuation">()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">{</span> <span class="cm-string">"ok"</span> <span class="cm-operator">:</span> <span class="cm-number">1</span> <span class="cm-punctuation">}</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre></li><li><p><span>集合命令</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>命令</span></th><th style='text-align:center;' ><span>功能</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><code>db.createCollection(&#39;集合名称&#39;)</code></td><td style='text-align:center;' ><span>创建集合</span></td></tr><tr><td style='text-align:center;' ><code>show collections</code></td><td style='text-align:center;' ><span>显示当前数据库中的所有集合</span></td></tr><tr><td style='text-align:center;' ><code>db.集合名称.drop()</code></td><td style='text-align:center;' ><span>删除特定集合</span></td></tr><tr><td style='text-align:center;' ><code>db.集合名称.renameCollection(&#39;新的集合名称&#39;)</code></td><td style='text-align:center;' ><span>重命名特定集合</span></td></tr></tbody></table></figure><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cmd"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cmd"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-identifier">db</span><span class="cm-punctuation">.</span><span class="cm-identifier">createCollection</span><span class="cm-punctuation">(</span><span class="cm-string">'users'</span><span class="cm-punctuation">)</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">{</span> <span class="cm-string">"ok"</span> <span class="cm-operator">:</span> <span class="cm-number">1</span> <span class="cm-punctuation">}</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cmd"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cmd"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-identifier">show</span> <span class="cm-identifier">collections</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">books</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">pictures</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">users</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cmd"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cmd"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-identifier">db</span><span class="cm-punctuation">.</span><span class="cm-identifier">users</span><span class="cm-punctuation">.</span><span class="cm-identifier">drop</span><span class="cm-punctuation">()</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-identifier">db</span><span class="cm-punctuation">.</span><span class="cm-identifier">pics</span><span class="cm-punctuation">.</span><span class="cm-identifier">drop</span><span class="cm-punctuation">()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">false</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 92px;"></div><div class="CodeMirror-gutters" style="display: none; height: 92px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cmd"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cmd"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-identifier">db</span><span class="cm-punctuation">.</span><span class="cm-identifier">pictures</span><span class="cm-punctuation">.</span><span class="cm-identifier">renameCollection</span><span class="cm-punctuation">(</span><span class="cm-string">'pics'</span><span class="cm-punctuation">)</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">{</span> <span class="cm-string">"ok"</span> <span class="cm-operator">:</span> <span class="cm-number">1</span> <span class="cm-punctuation">}</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre></li><li><p><span>文档命令</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>命令</span></th><th style='text-align:center;' ><span>功能</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><code>db.集合名称.insert(文档对象)</code></td><td style='text-align:center;' ><span>在集合中插入一个文档</span></td></tr><tr><td style='text-align:center;' ><code>db.集合名称.find()</code></td><td style='text-align:center;' ><span>查询集合中的所有文档</span></td></tr><tr><td style='text-align:center;' ><code>db.集合名称.find(查询条件)</code></td><td style='text-align:center;' ><span>查询集合中满足查询条件的文档</span></td></tr><tr><td style='text-align:center;' ><code>db.集合名称.update(查询条件, 新的文档对象)</code></td><td style='text-align:center;' ><span>更新集合中满足查询条件的文档为新的文档（替换）</span></td></tr><tr><td style='text-align:center;' ><code>db.集合名称.update(查询条件, {$set: {字段: 值}})</code></td><td style='text-align:center;' ><span>更新集合集合中满足查询条件的文档的某些字段的值</span></td></tr><tr><td style='text-align:center;' ><code>db.集合名称.remove(查询条件)</code></td><td style='text-align:center;' ><span>删除集合中满足查询条件的文档</span></td></tr></tbody></table></figure><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cmd"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cmd"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-identifier">db</span><span class="cm-punctuation">.</span><span class="cm-identifier">books</span><span class="cm-punctuation">.</span><span class="cm-identifier">insert</span><span class="cm-punctuation">({</span><span class="cm-identifier">name</span><span class="cm-operator">:</span> <span class="cm-string">'钢铁是怎样炼成的'</span><span class="cm-punctuation">,</span> <span class="cm-identifier">id</span><span class="cm-operator">:</span> <span class="cm-number">1</span><span class="cm-punctuation">,</span> <span class="cm-identifier">number</span><span class="cm-operator">:</span> <span class="cm-number">30</span><span class="cm-punctuation">})</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">WriteResult</span><span class="cm-punctuation">({</span> <span class="cm-string">"nInserted"</span> <span class="cm-operator">:</span> <span class="cm-number">1</span> <span class="cm-punctuation">})</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div><div class="CodeMirror-gutters" style="display: none; height: 46px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cmd"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cmd"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-identifier">db</span><span class="cm-punctuation">.</span><span class="cm-identifier">books</span><span class="cm-punctuation">.</span><span class="cm-identifier">find</span><span class="cm-punctuation">()</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">{</span> <span class="cm-string">"_id"</span> <span class="cm-operator">:</span> <span class="cm-identifier">ObjectId</span><span class="cm-punctuation">(</span><span class="cm-string">"6621d0385a0c900261df4c87"</span><span class="cm-punctuation">),</span> <span class="cm-string">"name"</span> <span class="cm-operator">:</span> <span class="cm-string">"钢铁是怎样炼成的"</span><span class="cm-punctuation">,</span> <span class="cm-string">"id"</span> <span class="cm-operator">:</span> <span class="cm-number">1</span><span class="cm-punctuation">,</span> <span class="cm-string">"number"</span> <span class="cm-operator">:</span> <span class="cm-number">30</span> <span class="cm-punctuation">}</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">{</span> <span class="cm-string">"_id"</span> <span class="cm-operator">:</span> <span class="cm-identifier">ObjectId</span><span class="cm-punctuation">(</span><span class="cm-string">"6621d4c15a0c900261df4c88"</span><span class="cm-punctuation">),</span> <span class="cm-string">"name"</span> <span class="cm-operator">:</span> <span class="cm-string">"简爱"</span><span class="cm-punctuation">,</span> <span class="cm-string">"id"</span> <span class="cm-operator">:</span> <span class="cm-number">2</span><span class="cm-punctuation">,</span> <span class="cm-string">"number"</span> <span class="cm-operator">:</span> <span class="cm-number">23</span> <span class="cm-punctuation">}</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">{</span> <span class="cm-string">"_id"</span> <span class="cm-operator">:</span> <span class="cm-identifier">ObjectId</span><span class="cm-punctuation">(</span><span class="cm-string">"6621d4d95a0c900261df4c89"</span><span class="cm-punctuation">),</span> <span class="cm-string">"name"</span> <span class="cm-operator">:</span> <span class="cm-string">"傲慢与偏见"</span><span class="cm-punctuation">,</span> <span class="cm-string">"id"</span> <span class="cm-operator">:</span> <span class="cm-number">3</span><span class="cm-punctuation">,</span> <span class="cm-string">"number"</span> <span class="cm-operator">:</span> <span class="cm-number">22</span> <span class="cm-punctuation">}</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 161px;"></div><div class="CodeMirror-gutters" style="display: none; height: 161px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cmd"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cmd"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-identifier">db</span><span class="cm-punctuation">.</span><span class="cm-identifier">books</span><span class="cm-punctuation">.</span><span class="cm-identifier">find</span><span class="cm-punctuation">({</span><span class="cm-identifier">id</span><span class="cm-operator">:</span> <span class="cm-number">2</span><span class="cm-punctuation">})</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">{</span> <span class="cm-string">"_id"</span> <span class="cm-operator">:</span> <span class="cm-identifier">ObjectId</span><span class="cm-punctuation">(</span><span class="cm-string">"6621d4c15a0c900261df4c88"</span><span class="cm-punctuation">),</span> <span class="cm-string">"name"</span> <span class="cm-operator">:</span> <span class="cm-string">"简爱"</span><span class="cm-punctuation">,</span> <span class="cm-string">"id"</span> <span class="cm-operator">:</span> <span class="cm-number">2</span><span class="cm-punctuation">,</span> <span class="cm-string">"number"</span> <span class="cm-operator">:</span> <span class="cm-number">23</span> <span class="cm-punctuation">}</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cmd"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cmd"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-identifier">db</span><span class="cm-punctuation">.</span><span class="cm-identifier">books</span><span class="cm-punctuation">.</span><span class="cm-identifier">update</span><span class="cm-punctuation">({</span><span class="cm-identifier">id</span><span class="cm-operator">:</span><span class="cm-number">2</span><span class="cm-punctuation">},{</span><span class="cm-identifier">name</span><span class="cm-operator">:</span> <span class="cm-string">"简爱2"</span><span class="cm-punctuation">})</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">WriteResult</span><span class="cm-punctuation">({</span> <span class="cm-string">"nMatched"</span> <span class="cm-operator">:</span> <span class="cm-number">1</span><span class="cm-punctuation">,</span> <span class="cm-string">"nUpserted"</span> <span class="cm-operator">:</span> <span class="cm-number">0</span><span class="cm-punctuation">,</span> <span class="cm-string">"nModified"</span> <span class="cm-operator">:</span> <span class="cm-number">1</span> <span class="cm-punctuation">})</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-identifier">db</span><span class="cm-punctuation">.</span><span class="cm-identifier">books</span><span class="cm-punctuation">.</span><span class="cm-identifier">find</span><span class="cm-punctuation">()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">{</span> <span class="cm-string">"_id"</span> <span class="cm-operator">:</span> <span class="cm-identifier">ObjectId</span><span class="cm-punctuation">(</span><span class="cm-string">"6621d0385a0c900261df4c87"</span><span class="cm-punctuation">),</span> <span class="cm-string">"name"</span> <span class="cm-operator">:</span> <span class="cm-string">"钢铁是怎样炼成的"</span><span class="cm-punctuation">,</span> <span class="cm-string">"id"</span> <span class="cm-operator">:</span> <span class="cm-number">1</span><span class="cm-punctuation">,</span> <span class="cm-string">"number"</span> <span class="cm-operator">:</span> <span class="cm-number">30</span> <span class="cm-punctuation">}</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">{</span> <span class="cm-string">"_id"</span> <span class="cm-operator">:</span> <span class="cm-identifier">ObjectId</span><span class="cm-punctuation">(</span><span class="cm-string">"6621d4c15a0c900261df4c88"</span><span class="cm-punctuation">),</span> <span class="cm-string">"name"</span> <span class="cm-operator">:</span> <span class="cm-string">"简爱2"</span> <span class="cm-punctuation">}</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">{</span> <span class="cm-string">"_id"</span> <span class="cm-operator">:</span> <span class="cm-identifier">ObjectId</span><span class="cm-punctuation">(</span><span class="cm-string">"6621d4d95a0c900261df4c89"</span><span class="cm-punctuation">),</span> <span class="cm-string">"name"</span> <span class="cm-operator">:</span> <span class="cm-string">"傲慢与偏见"</span><span class="cm-punctuation">,</span> <span class="cm-string">"id"</span> <span class="cm-operator">:</span> <span class="cm-number">3</span><span class="cm-punctuation">,</span> <span class="cm-string">"number"</span> <span class="cm-operator">:</span> <span class="cm-number">22</span> <span class="cm-punctuation">}</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 184px;"></div><div class="CodeMirror-gutters" style="display: none; height: 184px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cmd"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cmd"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-identifier">db</span><span class="cm-punctuation">.</span><span class="cm-identifier">books</span><span class="cm-punctuation">.</span><span class="cm-identifier">update</span><span class="cm-punctuation">({</span><span class="cm-identifier">id</span><span class="cm-operator">:</span><span class="cm-number">1</span><span class="cm-punctuation">},{</span><span class="cm-variable-2">$set:</span><span class="cm-punctuation">{</span><span class="cm-identifier">name</span><span class="cm-operator">:</span> <span class="cm-string">"钢铁是怎样炼成的2"</span><span class="cm-punctuation">}})</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">WriteResult</span><span class="cm-punctuation">({</span> <span class="cm-string">"nMatched"</span> <span class="cm-operator">:</span> <span class="cm-number">1</span><span class="cm-punctuation">,</span> <span class="cm-string">"nUpserted"</span> <span class="cm-operator">:</span> <span class="cm-number">0</span><span class="cm-punctuation">,</span> <span class="cm-string">"nModified"</span> <span class="cm-operator">:</span> <span class="cm-number">1</span> <span class="cm-punctuation">})</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-identifier">db</span><span class="cm-punctuation">.</span><span class="cm-identifier">books</span><span class="cm-punctuation">.</span><span class="cm-identifier">find</span><span class="cm-punctuation">()</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">{</span> <span class="cm-string">"_id"</span> <span class="cm-operator">:</span> <span class="cm-identifier">ObjectId</span><span class="cm-punctuation">(</span><span class="cm-string">"6621d0385a0c900261df4c87"</span><span class="cm-punctuation">),</span> <span class="cm-string">"name"</span> <span class="cm-operator">:</span> <span class="cm-string">"钢铁是怎样炼成的2"</span><span class="cm-punctuation">,</span> <span class="cm-string">"id"</span> <span class="cm-operator">:</span> <span class="cm-number">1</span><span class="cm-punctuation">,</span> <span class="cm-string">"number"</span> <span class="cm-operator">:</span> <span class="cm-number">30</span> <span class="cm-punctuation">}</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">{</span> <span class="cm-string">"_id"</span> <span class="cm-operator">:</span> <span class="cm-identifier">ObjectId</span><span class="cm-punctuation">(</span><span class="cm-string">"6621d4c15a0c900261df4c88"</span><span class="cm-punctuation">),</span> <span class="cm-string">"name"</span> <span class="cm-operator">:</span> <span class="cm-string">"简爱2"</span> <span class="cm-punctuation">}</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">{</span> <span class="cm-string">"_id"</span> <span class="cm-operator">:</span> <span class="cm-identifier">ObjectId</span><span class="cm-punctuation">(</span><span class="cm-string">"6621d4d95a0c900261df4c89"</span><span class="cm-punctuation">),</span> <span class="cm-string">"name"</span> <span class="cm-operator">:</span> <span class="cm-string">"傲慢与偏见"</span><span class="cm-punctuation">,</span> <span class="cm-string">"id"</span> <span class="cm-operator">:</span> <span class="cm-number">3</span><span class="cm-punctuation">,</span> <span class="cm-string">"number"</span> <span class="cm-operator">:</span> <span class="cm-number">22</span> <span class="cm-punctuation">}</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 184px;"></div><div class="CodeMirror-gutters" style="display: none; height: 184px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cmd"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cmd"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-identifier">db</span><span class="cm-punctuation">.</span><span class="cm-identifier">books</span><span class="cm-punctuation">.</span><span class="cm-identifier">remove</span><span class="cm-punctuation">({</span><span class="cm-identifier">id</span><span class="cm-operator">:</span><span class="cm-number">3</span><span class="cm-punctuation">})</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">WriteResult</span><span class="cm-punctuation">({</span> <span class="cm-string">"nRemoved"</span> <span class="cm-operator">:</span> <span class="cm-number">1</span> <span class="cm-punctuation">})</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-identifier">db</span><span class="cm-punctuation">.</span><span class="cm-identifier">books</span><span class="cm-punctuation">.</span><span class="cm-identifier">find</span><span class="cm-punctuation">()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">{</span> <span class="cm-string">"_id"</span> <span class="cm-operator">:</span> <span class="cm-identifier">ObjectId</span><span class="cm-punctuation">(</span><span class="cm-string">"6621d0385a0c900261df4c87"</span><span class="cm-punctuation">),</span> <span class="cm-string">"name"</span> <span class="cm-operator">:</span> <span class="cm-string">"钢铁是怎样炼成的2"</span><span class="cm-punctuation">,</span> <span class="cm-string">"id"</span> <span class="cm-operator">:</span> <span class="cm-number">1</span><span class="cm-punctuation">,</span> <span class="cm-string">"number"</span> <span class="cm-operator">:</span> <span class="cm-number">30</span> <span class="cm-punctuation">}</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">{</span> <span class="cm-string">"_id"</span> <span class="cm-operator">:</span> <span class="cm-identifier">ObjectId</span><span class="cm-punctuation">(</span><span class="cm-string">"6621d4c15a0c900261df4c88"</span><span class="cm-punctuation">),</span> <span class="cm-string">"name"</span> <span class="cm-operator">:</span> <span class="cm-string">"简爱2"</span> <span class="cm-punctuation">}</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 138px;"></div><div class="CodeMirror-gutters" style="display: none; height: 138px;"></div></div></div></pre></li></ol><h3 id='104-mongoose-简介'><span>10.4 Mongoose 简介</span></h3><ul><li><p><span>Mongoose 是一个</span><strong><span>对象文档模型库</span></strong><span>，是 npm 中的一个包，可以通过 </span><code>npm install mongoose</code><span> 下载使用</span></p></li><li><p><span>Mongoose 方便我们</span><strong><span>使用代码操作 MongoDB 数据库</span></strong><span>，</span><a href='https://mongoosejs.net/'><span>点击跳转官网</span></a></p></li></ul><h3 id='105-mongoose-连接数据库'><span>10.5 Mongoose 连接数据库</span></h3><p><a href='./CODES/MONGODBData/45-mongoose-连接数据库.js'><span>连接数据库</span></a><span>主要包含以下步骤</span></p><ul><li><p><span>导入 mongoose </span><code>require(&#39;mongoose&#39;)</code></p></li><li><p><span>连接数据库 </span><code>mongoose.connect(&#39;mongodb://127.0.0.1:27017/testdb&#39;)</code></p></li><li><p><span>设置连接回调</span></p><ul><li><p><span>成功回调 </span><code>mongoose.connection.once(&#39;open&#39;, callback)</code></p></li><li><p><span>失败回调 </span><code>mongoose.connection.on(&#39;error&#39;, callback)</code></p></li><li><p><span>关闭回调 </span><code>mongoose.connection.on(&#39;close&#39;, callback)</code></p></li></ul></li></ul><h3 id='106-mongoose-创建新文档'><span>10.6 Mongoose 创建新文档</span></h3><p><span>连接数据库后，我们通常在 </span><code>mongoose.connection.once(&#39;open&#39;, callback)</code><span> 的回调函数中</span><a href='./CODES/MONGODBData/46-mongoose-创建新文档.js'><span>创建新文档</span></a><span>，主要包含以下步骤</span></p><ul><li><p><span>创建文档结构对象 </span><code>new mongoose.Schema(obj)</code></p></li><li><p><span>创建文档模型对象 </span><code>mongoose.model(&#39;集合的单数名称&#39;, 文档结构对象)</code></p></li><li><p><span>使用文档模型对象创建新文档 </span><code>model.create(obj).then(data =&gt; {}).catch(err =&gt; {})</code></p></li></ul><h3 id='107-字段类型和字段值验证'><span>10.7 字段类型和字段值验证</span></h3><p><span>我们在创建一个文档对象前，必须要创建文档结构对象，用于约束文档对象的属性和属性值（属性又称字段，属性值又称字段值），例如</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="javascript"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="javascript"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">new</span> <span class="cm-variable">mongoose</span>.<span class="cm-property">Schema</span>({</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-property">name</span>: <span class="cm-variable">String</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-property">author</span>: <span class="cm-variable">String</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-property">price</span>: <span class="cm-variable">Number</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">});</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="display: none; height: 115px;"></div></div></div></pre><p><span>创建了一个文档结构对象，要求文档对象有三个字段，并对每个字段的取值类型做出了限制。</span></p><p><span>此外，还有其他可取的字段值，而且每个字段的值也可以是一个对象，约束字段值类型的同时，对字段进行其他限制。</span></p><ul><li><p><span>字段值类型</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>字段值类型</span></th><th style='text-align:center;' ><span>含义</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>String</span></td><td style='text-align:center;' ><span>字符串</span></td></tr><tr><td style='text-align:center;' ><span>Number</span></td><td style='text-align:center;' ><span>数字</span></td></tr><tr><td style='text-align:center;' ><span>Boolean</span></td><td style='text-align:center;' ><span>布尔值</span></td></tr><tr><td style='text-align:center;' ><span>Array</span></td><td style='text-align:center;' ><span>数组，也可以使用 []  来标识</span></td></tr><tr><td style='text-align:center;' ><span>Date</span></td><td style='text-align:center;' ><span>日期</span></td></tr><tr><td style='text-align:center;' ><span>Buffer</span></td><td style='text-align:center;' ><span>Buffer 对象</span></td></tr><tr><td style='text-align:center;' ><span>mongoose.Schema.Types.Mixed</span></td><td style='text-align:center;' ><span>任意类型</span></td></tr><tr><td style='text-align:center;' ><span>mongoose.Schema.Types.ObjectId</span></td><td style='text-align:center;' ><span>对象 ID，一般用于存储其他文档对象的外键，联合查询使用</span></td></tr><tr><td style='text-align:center;' ><span>mongoose.Schema.Types.Decimal128</span></td><td style='text-align:center;' ><span>高精度数字</span></td></tr></tbody></table></figure></li><li><p><span>字段值验证：此时字段取值为一个对象，这里对这个对象可选属性及属性值进行介绍</span></p><ul><li><p><span>type 表示字段值类型，取值为上述字段值类型</span></p></li><li><p><span>require 表示是否为必填项，取值 true / false</span></p></li><li><p><span>default 表示默认值，取值任意；如果创建文档对象时没指定对应字段的值，则使用默认值</span></p></li><li><p><span>enum 表示枚举值，取值必须是一个数组；创建文档对象时对应字段的值必须是枚举数组中的一个值</span></p></li><li><p><span>unique 表示是否是唯一值，取值 true / false；必须重建集合后 unique 才有效果</span></p></li></ul></li></ul><h3 id='108-mongoose-增删改查'><span>10.8 Mongoose 增删改查</span></h3><p><span>我们可以使用</span><strong><span>文档模型对象</span></strong><span>实现对</span><a href='./CODES/MONGODBData/47-mongoose-增删改查.js'><span>文档对象的增删改查</span></a><span>等操作，具体语法如下</span></p><ul><li><p><span>增</span></p><ul><li><p><span>添加一个文档 </span><code>model.create(文档对象).then(data =&gt; {}).catch(err =&gt; {})</code></p></li><li><p><span>添加多个文档 </span><code>model.insertMany([文档对象1, 文档对象2, ..., 文档对象m]).then(data =&gt; {}).catch(err =&gt; {})</code></p></li></ul></li><li><p><span>删</span></p><ul><li><p><span>删除一个文档 </span><code>model.deleteOne(条件对象).then(info =&gt; {}).catch(err =&gt; {})</code></p></li><li><p><span>删除多个文档 </span><code>model.deleteMany(条件对象).then(info =&gt; {}).catch(err =&gt; {})</code></p></li></ul></li><li><p><span>改</span></p><ul><li><p><span>更新一个文档 </span><code>model.updateOne(条件对象, 要更新的字段及其取值对象).then(info =&gt; {}).catch(err =&gt; {})</code></p></li><li><p><span>更新多个文档 </span><code>model.updateMany(条件对象, 要更新的字段及其取值对象).then(info =&gt; {}).catch(err =&gt; {})</code></p></li></ul></li><li><p><span>查</span></p><ul><li><p><span>查询一条数据</span></p><ul><li><p><code>model.findOne(条件对象).then(data =&gt; {}).catch(err =&gt; {})</code></p></li><li><p><code>model.findById(&#39;文档对象的 id&#39;).then(data =&gt; {}).catch(err =&gt; {})</code></p></li></ul></li><li><p><span>查询多条数据</span></p><ul><li><p><code>model.find().then(data =&gt; {}).catch(err =&gt; {})</code></p></li><li><p><code>model.find(条件对象).then(data =&gt; {}).catch(err =&gt; {})</code></p></li></ul></li></ul></li></ul><h3 id='109-mongoose-条件对象语法'><span>10.9 Mongoose 条件对象语法</span></h3><p><span>在对文档对象进行删改查时，我们需要使用</span><a href='./CODES/MONGODBData/48-mongoose-条件对象.js'><span>条件对象匹配文档对象</span></a><span>，除了</span><strong><span>字段取值相等</span></strong><span>匹配外，还有比较匹配、逻辑匹配、正则匹配，语法如下</span></p><ul><li><p><span>比较匹配 </span><code>{字段名: {比较运算符: 数值}}</code></p></li><li><p><span>逻辑匹配 </span><code>{逻辑运算符: [条件对象1, 条件对象2, ..., 条件对象n]}</code></p></li><li><p><span>正则匹配 </span><code>{字段名: 正则表达式}</code></p></li></ul><h3 id='1010-mongoose-个性化读取'><span>10.10 Mongoose 个性化读取</span></h3><p><span>在对文档模型进行读取时，我们还可以进行</span><a href='./CODES/MONGODBData/49-mongoose-个性化读取.js'><span>个性化读取操作</span></a><span>，如字段筛选、数据排序、内容截取等，语法如下</span></p><ul><li><p><span>字段筛选 </span><code>model.find().select({字段1: 0/1, 字段2: 0/1, ...,.字段n: 0/1}).exec().then(data =&gt; {}).catch(err =&gt; {})</code></p></li><li><p><span>数据排序 </span><code>model.find().sort({字段名: 1/-1}).exec().then(data =&gt; {}).catch(err =&gt; {})</code></p></li><li><p><span>内容截取 </span><code>model.find().skip(num1).limit(num2).exec().then(data =&gt; {}).catch(err =&gt; {})</code></p></li></ul><h3 id='1011-mongoose-代码模块化'><span>10.11 Mongoose 代码模块化</span></h3><p><span>Mongoose 的模块化就是将原始的 js 文件根据其各部分功能拆分到多个 js 文件中，并通过 </span><code>module.exports</code><span> 的方式向外暴露，提高代码的可维护性，如连接数据库的参数可以编写到一个配置文件中；不同的文档模型对象可以归类为一个模型文件夹中；数据库连接的基本框架也可以抽离出来；在 index.js 中仅仅编写关于数据库相关的操作代码</span></p><p><a href='./CODES/MONGODBData/50-mongoose-模块化-原始.js'><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="24ex" height="2.579ex" role="img" focusable="false" viewBox="0 -900 10608 1140" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.543ex;"><defs></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mstyle" transform="scale(1.2)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">未</text></g><g data-mml-node="mtext" transform="translate(884,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">模</text></g><g data-mml-node="mtext" transform="translate(1768,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">块</text></g><g data-mml-node="mtext" transform="translate(2652,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">化</text></g><g data-mml-node="mtext" transform="translate(3536,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">时</text></g><g data-mml-node="mtext" transform="translate(4420,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">的</text></g><g data-mml-node="mtext" transform="translate(5304,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">代</text></g><g data-mml-node="mtext" transform="translate(6188,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">码</text></g><g data-mml-node="mtext" transform="translate(7072,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">组</text></g><g data-mml-node="mtext" transform="translate(7956,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">织</text></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle mathsize="1.2em"><mrow data-mjx-texclass="ORD"><mtext>未</mtext><mtext>模</mtext><mtext>块</mtext><mtext>化</mtext><mtext>时</mtext><mtext>的</mtext><mtext>代</mtext><mtext>码</mtext><mtext>组</mtext><mtext>织</mtext></mrow></mstyle></math></mjx-assistive-mml></mjx-container><script type="math/tex">\large{未模块化时的代码组织}</script></a></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="js"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">mongoose</span> <span class="cm-operator">=</span> <span class="cm-variable">require</span>(<span class="cm-string">'mongoose'</span>);</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mongoose</span>.<span class="cm-property">connect</span>(<span class="cm-string">'mongodb://127.0.0.1:27017/bilibili'</span>); </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mongoose</span>.<span class="cm-property">connection</span>.<span class="cm-property">once</span>(<span class="cm-string">'open'</span>, () <span class="cm-operator">=&gt;</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">// 创建文档结构对象</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">// 创建文档模型对象</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">// 使用文档模型对象对数据库进行操作，如增删改查等</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mongoose</span>.<span class="cm-property">connection</span>.<span class="cm-property">on</span>(<span class="cm-string">'error'</span>, () <span class="cm-operator">=&gt;</span> {});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mongoose</span>.<span class="cm-property">connection</span>.<span class="cm-property">on</span>(<span class="cm-string">'close'</span>, () <span class="cm-operator">=&gt;</span> {});</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 207px;"></div><div class="CodeMirror-gutters" style="display: none; height: 207px;"></div></div></div></pre><p><a href='./CODES/MONGODBData/50-mongoose-模块化/'><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="19.2ex" height="2.579ex" role="img" focusable="false" viewBox="0 -900 8486.4 1140" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.543ex;"><defs></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mstyle" transform="scale(1.2)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">模</text></g><g data-mml-node="mtext" transform="translate(884,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">块</text></g><g data-mml-node="mtext" transform="translate(1768,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">化</text></g><g data-mml-node="mtext" transform="translate(2652,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">后</text></g><g data-mml-node="mtext" transform="translate(3536,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">代</text></g><g data-mml-node="mtext" transform="translate(4420,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">码</text></g><g data-mml-node="mtext" transform="translate(5304,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">组</text></g><g data-mml-node="mtext" transform="translate(6188,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">织</text></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mstyle mathsize="1.2em"><mrow data-mjx-texclass="ORD"><mtext>模</mtext><mtext>块</mtext><mtext>化</mtext><mtext>后</mtext><mtext>代</mtext><mtext>码</mtext><mtext>组</mtext><mtext>织</mtext></mrow></mstyle></math></mjx-assistive-mml></mjx-container><script type="math/tex">\large{模块化后代码组织}</script></a></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="js"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// dir: /index.js</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">db</span> <span class="cm-operator">=</span> <span class="cm-variable">require</span>(<span class="cm-string">'./db/db.js'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">文档模型对象</span> <span class="cm-operator">=</span> <span class="cm-variable">require</span>(<span class="cm-string">'./models/文档模型对象.js'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">db</span>(() <span class="cm-operator">=&gt;</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-string">'mongoose-mongodb 连接成功'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// 使用文档模型对象对数据库进行操作，如增删改查等</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 184px;"></div><div class="CodeMirror-gutters" style="display: none; height: 184px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="js" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// dir: /db/db.js</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">mongoose</span> <span class="cm-operator">=</span> <span class="cm-variable">require</span>(<span class="cm-string">'mongoose'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">config</span> <span class="cm-operator">=</span> <span class="cm-variable">require</span>(<span class="cm-string">'../config/config.json'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">module</span>.<span class="cm-property">exports</span> <span class="cm-operator">=</span> <span class="cm-keyword">function</span> (<span class="cm-def">success</span>, <span class="cm-def">error</span> <span class="cm-operator">=</span> () <span class="cm-operator">=&gt;</span> <span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-string">'mongoose-mongodb 连接失败'</span>)) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">let</span> { <span class="cm-def">DBHOST</span>, <span class="cm-def">DBPORT</span>, <span class="cm-def">DBNAME</span> } <span class="cm-operator">=</span> <span class="cm-variable">config</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">mongoose</span>.<span class="cm-property">connect</span>(<span class="cm-string-2">`mongodb://${</span><span class="cm-variable-2">DBHOST</span><span class="cm-string-2">}:${</span><span class="cm-variable-2">DBPORT</span><span class="cm-string-2">}/${</span><span class="cm-variable-2">DBNAME</span><span class="cm-string-2">}`</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">mongoose</span>.<span class="cm-property">connection</span>.<span class="cm-property">once</span>(<span class="cm-string">'open'</span>, () <span class="cm-operator">=&gt;</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-2">success</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">mongoose</span>.<span class="cm-property">connection</span>.<span class="cm-property">on</span>(<span class="cm-string">'error'</span>, () <span class="cm-operator">=&gt;</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-2">error</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">mongoose</span>.<span class="cm-property">connection</span>.<span class="cm-property">on</span>(<span class="cm-string">'close'</span>, () <span class="cm-operator">=&gt;</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">console</span>.<span class="cm-property">log</span>(<span class="cm-string">'mongoose-mongodb 连接关闭'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  })</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 461px;"></div><div class="CodeMirror-gutters" style="display: none; height: 461px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="js"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// dir: /config/config.json</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"DBHOST"</span>: <span class="cm-string">"主机名或域名"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"DBPORT"</span>: <span class="cm-string">"端口"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">"DBNAME"</span>: <span class="cm-string">"数据库名"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 138px;"></div><div class="CodeMirror-gutters" style="display: none; height: 138px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="js"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="js"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51562px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// dir: /models/文档模型对象.js</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">mongoose</span> <span class="cm-operator">=</span> <span class="cm-variable">require</span>(<span class="cm-string">'mongoose'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">let</span> <span class="cm-def">文档结构对象</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">mongoose</span>.<span class="cm-property">Schema</span>({</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-property">字段</span>: <span class="cm-variable">字段值类型</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">......</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">let</span> <span class="cm-variable">文档模型对象</span> <span class="cm-operator">=</span> <span class="cm-variable">mongoose</span>.<span class="cm-variable">model</span>(<span class="cm-string">'集合名'</span>, <span class="cm-variable">文档结构对象</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">module</span>.<span class="cm-property">exports</span> <span class="cm-operator">=</span> <span class="cm-variable">文档模型对象</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 253px;"></div><div class="CodeMirror-gutters" style="display: none; height: 253px;"></div></div></div></pre><h3 id='1012-mongodb-图形化管理工具'><span>10.12 MongoDB 图形化管理工具</span></h3><p><span>图形化工具，如 </span><a href='https://github.com/Studio3T/robomongo/releases'><span>Robo 3T</span></a><span>（免费）、</span><a href='https://www.navicat.com.cn/products#navicat'><span>Navicat</span></a><span>（付费） 与 mongoose、mongo 类似，用于与 MongoDB 进行交互</span></p><h2 id='11-api-接口'><span>11. API 接口</span></h2><h3 id='111-接口的简介'><span>11.1 接口的简介</span></h3><ol start='' ><li><p><span>什么是接口？</span></p><ul><li><p><span>接口是</span><strong><span>前后端通信</span></strong><span>的桥梁，可以将一个接口理解为服务中的一个路由规则，</span><strong><span>根据请求响应结果</span></strong></p></li><li><p><span>接口为英文为 API（Application Program Interface），有时也称为 </span><strong><span>API 接口</span></strong></p></li><li><p><span>这里的接口指的是</span><strong><span>数据接口</span></strong><span>，与编程语言中的接口语法不同</span></p></li><li><p><span>接口大多由后端工程师开发，由前端工程师调用</span></p></li></ul></li><li><p><span>接口的组成：</span><strong><span>请求方法、接口地址、请求参数、响应结果</span></strong></p></li><li><p><span>举例：身份证查询接口</span></p><ul><li><p><span>请求方法：get/post</span></p></li><li><p><span>接口地址：</span><a href='https://api.asilu.com/idcard/' target='_blank' class='url'>https://api.asilu.com/idcard/</a></p></li><li><p><span>请求参数：id</span><span>	</span><span>string 必填 身份证号码</span></p></li><li><p><span>响应结果：json</span></p><ul><li><p><span>addr string 籍贯</span></p></li><li><p><span>date string 出生年月</span></p></li><li><p><span>sex string 性别</span></p></li></ul></li><li><p><span>请求举例：</span><a href='https://api.asilu.com/idcard/?id=152502199405148245' target='_blank' class='url'>https://api.asilu.com/idcard/?id=152502199405148245</a></p></li></ul></li></ol><h3 id='112-restful-api'><span>11.2 RESTful API</span></h3><ol start='' ><li><p><span>什么是 RESTful API？</span></p><ul><li><p><span>RESTful API 是一种特殊风格的接口，其要求</span></p><ul><li><p><span>接口地址（URL）的路径表示资源</span></p></li><li><p><span>资源操作必须与 </span><strong><span>HTTP 请求方法</span></strong><span>对应，如 POST 表示新增资源、GET 表示获取资源、DELETE 表示删除资源等</span></p></li><li><p><span>资源操作结果必须与 </span><strong><span>HTTP 响应状态码</span></strong><span>对应</span></p></li></ul></li><li><p><span>RESTful API 规则举例如下</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>操作</span></th><th style='text-align:center;' ><span>请求类型</span></th><th style='text-align:center;' ><span>URL</span></th><th style='text-align:center;' ><span>返回</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>新增歌曲</span></td><td style='text-align:center;' ><span>POST</span></td><td style='text-align:center;' ><span>/song</span></td><td style='text-align:center;' ><span>返回新生成的歌曲信息</span></td></tr><tr><td style='text-align:center;' ><span>删除歌曲</span></td><td style='text-align:center;' ><span>DELETE</span></td><td style='text-align:center;' ><span>/song/10</span></td><td style='text-align:center;' ><span>返回一个空文档</span></td></tr><tr><td style='text-align:center;' ><span>修改歌曲</span></td><td style='text-align:center;' ><span>PUT</span></td><td style='text-align:center;' ><span>/song/10</span></td><td style='text-align:center;' ><span>返回更新后的歌曲信息</span></td></tr><tr><td style='text-align:center;' ><span>修改歌曲</span></td><td style='text-align:center;' ><span>PATCH</span></td><td style='text-align:center;' ><span>/song/10</span></td><td style='text-align:center;' ><span>返回更新后的歌曲信息</span></td></tr><tr><td style='text-align:center;' ><span>获取所有歌曲</span></td><td style='text-align:center;' ><span>GET</span></td><td style='text-align:center;' ><span>/song</span></td><td style='text-align:center;' ><span>返回歌曲列表数组</span></td></tr><tr><td style='text-align:center;' ><span>获取单个歌曲</span></td><td style='text-align:center;' ><span>GET</span></td><td style='text-align:center;' ><span>/song/10</span></td><td style='text-align:center;' ><span>返回单个歌曲信息</span></td></tr></tbody></table></figure></li></ul></li><li><p><span>RESTful API 服务的搭建 —— json-server 包</span></p><ul><li><p><span>介绍：</span><a href='https://github.com/typicode/json-server'><span>json-server</span></a><span> 是一个 JS 编写的工具包，可以快速搭建 RESTful API 服务</span></p></li><li><p><span>安装：</span><code>npm i -g json-server</code></p></li><li><p><span>使用教程</span></p><ul><li><p><span>第一步：创建 json 文件，编写基本结构 { 资源名: [资源对象1, 资源对象2, ..., 资源对象n] }</span></p></li><li><p><span>第二步：以 json 文件所在文件夹为工作目录，执行命令 </span><code>json-server --watch json文件名</code><span>，启动服务，默认监听端口为 3000</span></p></li><li><p><span>第三步：使用接口测试工具（如 </span><a href='https://www.apipost.cn/'><span>apipost</span></a><span>、</span><a href='https://www.apifox.cn/'><span>apifox</span></a><span>、</span><a href='https://www.postman.com/'><span>postman</span></a><span>），测试 RESTful API</span></p></li></ul></li></ul></li></ol><h2 id='12-会话控制'><span>12. 会话控制</span></h2><h3 id='121-会话控制简介'><span>12.1 会话控制简介</span></h3><ol start='' ><li><p><span>什么是会话控制？</span></p><ul><li><p><span>会话可以理解为浏览器与服务器之间的交互，会话控制就是对会话进行控制</span></p></li><li><p><span>HTTP 是一种</span><strong><span>无状态的协议</span></strong><span>，即没有办法区分多次请求是否来自于同一个客户端，因而无法区分用户，会话控制技术就是用来解决该问题的，借此我们可以在服务端中识别区分不同的用户发出的请求</span></p></li></ul></li><li><p><span>会话控制技术</span></p><ul><li><p><code>cookie</code></p></li><li><p><code>session</code></p></li><li><p><code>token</code></p></li></ul></li></ol><h3 id='122-cookie'><span>12.2 cookie</span></h3><ol start='' ><li><p><span>什么是 cookie？</span></p><ul><li><p><span>cookie 是 HTTP </span><strong><span>服务器发送到浏览器</span></strong><span>并</span><strong><span>保存在浏览器端</span></strong><span>的</span><strong><span>一小块数据</span></strong></p></li><li><p><span>cookie 是</span><strong><span>按照域名划分保存</span></strong><span>的</span></p></li><li><p><span>cookie 可以看作是一系列的键值对数据</span></p></li></ul></li><li><p><span>cookie 的运行流程</span></p><ul><li><p><span>cookie 的产生：用户填写账号密码登录某个网站，</span><strong><span>服务器校验通过后下放 cookie 给浏览器</span></strong></p></li><li><p><span>cookie 的使用：有了 cookie 之后，浏览器向服务器发送请求时，会</span><strong><span>自动将当前域名下的可用 cookie 设置在请求头中发送给服务器</span></strong><span>（这个请求头的名字叫做 cookie，因此也可以将 cookie 理解为一个 HTTP 的请求头）</span></p></li></ul></li><li><p><span>浏览器对 cookie 的操作</span></p><ul><li><p><span>禁用所有 cookie：设置 =&gt; 隐私与安全 =&gt; 第三方 cookie</span></p></li><li><p><span>删除 cookie：设置 =&gt; 隐私与安全 =&gt; 第三方 cookie</span></p></li><li><p><span>查看 cookie：开发者工具 =&gt; application 页面查看</span></p></li></ul></li><li><p><a href='./CODES/EXPRESSData/51-cookie-简单操作.js'><span>express 中对 cookie 的操作</span></a><span>（增删改查） —— </span><code>cookie-parser</code></p></li></ol><h3 id='123-session'><span>12.3 session</span></h3><ol start='' ><li><p><span>什么是 session？</span></p><ul><li><p><span>session 是保存在</span><strong><span>服务器端</span></strong><span>的</span><strong><span>一块数据</span></strong><span>，表示当前访问用户的相关信息</span></p></li><li><p><span>session 可以用于</span><strong><span>识别用户身份</span></strong><span>，快速获取当前用户的相关信息</span></p></li></ul></li><li><p><span>session 的运行流程</span></p><ul><li><p><span>session 的产生：用户填写账号密码登录某个网站，</span><strong><span>服务器校验通过后创建 session 信息</span></strong><span>，然后将 </span><strong><span>session_id 通过 cookie 返回给浏览器</span></strong></p></li><li><p><span>session 的使用：有了 cookie 之后，浏览器向服务器发送请求时，服务器</span><strong><span>通过 cookie 中的 session_id 确定用户的身份</span></strong></p></li></ul></li><li><p><a href='./CODES/EXPRESSData/52-session-简单操作.js'><span>express 中对 session 的操作</span></a><span>（增删改查） —— </span><code>express-session</code><span>、</span><code>connect-mongo</code></p></li><li><p><span>cookie Vs. session</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:center;' ><span>区别</span></th><th style='text-align:center;' ><span>cookie</span></th><th style='text-align:center;' ><span>session</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>存放位置</span></td><td style='text-align:center;' ><span>浏览器端</span></td><td style='text-align:center;' ><span>服务器端</span></td></tr><tr><td style='text-align:center;' ><span>安全性</span></td><td style='text-align:center;' ><span>以明文存放在浏览器端，安全性较低</span></td><td style='text-align:center;' ><span>安全性</span><strong><span>相对较好</span></strong></td></tr><tr><td style='text-align:center;' ><span>网络传输量</span></td><td style='text-align:center;' ><span>内容过多会增大报文体积，影响传输效率</span></td><td style='text-align:center;' ><span>只通过 cookie 传递 session_id，不影响传输效率</span></td></tr><tr><td style='text-align:center;' ><span>存储限制</span></td><td style='text-align:center;' ><span>单个 cookie 保存数据不超过 4K，单个域名下的 cookie 数量也有限制</span></td><td style='text-align:center;' ><span>无限制</span></td></tr></tbody></table></figure></li></ol><h3 id='124-token'><span>12.4 token</span></h3><ol start='' ><li><p><span>什么是 token？</span></p><ul><li><p><span>token 是</span><strong><span>由服务器端生成并返回给客户端</span></strong><span>的一串</span><strong><span>加密字符串</span></strong></p></li><li><p><span>token 中保存着</span><strong><span>用户信息</span></strong><span>，用于</span><strong><span>识别用户身份</span></strong><span>，实现会话控制</span></p></li><li><p><span>token 多用于移动端 app；cookie、session 多用于网页端</span></p></li></ul></li><li><p><span>token 的运行流程</span></p><ul><li><p><span>token 的产生：用户填写账号密码登录后，</span><strong><span>服务端校验通过后创建 token</span></strong><span>，并将 token 作为</span><strong><span>响应体内容</span></strong><span>返回给客户端</span></p></li><li><p><span>token 的使用：有了 token 以后，后续再向服务器端发送请求时，需要</span><strong><span>手动</span></strong><span>将 token 添加在请求报文中，一般是放在</span><strong><span>请求头</span></strong><span>中</span></p></li></ul></li><li><p><span>token 的特点</span></p><ul><li><p><strong><span>服务端压力更小</span></strong><span>，因为数据都存储在客户端</span></p></li><li><p><strong><span>相对更加安全</span></strong><span>，因为数据被加密，且因为需要手动发送给服务端，可以避免 CSRF（跨站请求伪造）</span></p></li><li><p><strong><span>扩展性更强</span></strong><span>，因为服务器之间可以共享 token，增加服务器节点更加简单</span></p></li></ul></li><li><p><span>什么是 JWT？JWT（JSON Web Token）是一种流行的</span><strong><span>跨域认证解决方案</span></strong><span>，可用于基于 token 的身份验证，其使 token 的生成与校验更加规范</span></p></li><li><p><a href='./CODES/53-token-创建与解析.js'><span>token 的操作</span></a><span>（创建和解析） —— </span><code>jsonwebtoken</code></p></li></ol><h3 id='125-本地域名'><span>12.5 本地域名</span></h3><ol start='' ><li><p><span>什么是本地域名：只能在</span><strong><span>本机使用的域名</span></strong><span>，一般在开发阶段使用</span></p></li><li><p><span>浏览器的域名解析流程：当我们在浏览器中输入域名，浏览器并不知道向哪里发送请求，此时浏览器会</span></p><ul><li><p><span>首先，</span><strong><span>查询本地缓存</span></strong><span>，看是否存在当前域名与对应 ip 的映射，如果存在，则向对应 ip 地址发送请求，否则</span></p></li><li><p><span>然后，</span><strong><span>查询 </span><code>host</code><span> 文件</span></strong><span>，看是否存在当前域名与对应 ip 的映射，如果存在，则向对应 ip 地址发送请求，否则（注：</span><code>host</code><span> 文件的路径为 </span><code>C:\Windows\System32\drivers\etc\HOSTS</code><span>）</span></p></li><li><p><span>最后，</span><strong><span>进行 DNS(Domain Name System) 域名解析</span></strong><span>，浏览器给 DNS 系统发送域名，DNS 系统返回对应的 ip 地址，此时浏览器向对应 ip 地址发送请求（注：可以通过 </span><code>ipconfig /all</code><span> 查看本机的 DNS 服务器）</span></p></li></ul></li><li><p><span>示例：当我们在本地 </span><code>host</code><span> 文件中添加了 </span><code>127.0.0.1     www.baidu.com</code><span>，我们在浏览器中输入 </span><code>www.baidu.com</code><span> 时，浏览器实际会向本机 </span><code>127.0.0.1</code><span> 发送请求（注意：需要在无痕模式下使用，避免浏览器缓存的影响；需要关闭 VPN，因为代理会修改 DNS）</span></p></li></ol><h2 id='13-项目上线'><span>13. 项目上线</span></h2><p><a href='https://www.bilibili.com/video/BV1gM411W7ex?p=193'><span>项目上线的流程</span></a><span>为：将代码上传到仓库 =&gt; 购买云服务器，并安装相关软件 =&gt; 云服务器上克隆仓库中的代码，启动代码服务 =&gt; 购买域名并备案解析 =&gt; 配置 HTTPS 证书</span></p><p><a href='#nodejs'><span>跳转至顶部</span></a></p></div></div>
</body>
</html>