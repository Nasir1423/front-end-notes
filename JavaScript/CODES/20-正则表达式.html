<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>正则表达式</title>
</head>

<body>
    <script>
        /* 
            1. 正则表达式 Regular Expression
                - 是什么？正则表达式是针对字符串定义的一个规则
                - 有何用？
                    - 检查字符串是否符合某种规则：test 方法
                    - 从字符串中提取出符合某种规则的内容：exec 方法
                - JavaScript 中的正则表达式是一个对象
            
            2. 正则表达式的创建
                - 方式一 构造函数 let reg = new RegExp(pattern, flags)
                - 方式二 字面量 let reg = /pattern/flags
                - 说明：pattern 表示正则表达式；flags 表示匹配模式（i 表示忽略大小写，g 表示全局匹配）
            
            3. pattern 参数的语法
                - a 字符串中是否存在 a
                - ab 字符串中是否存在 ab
                -------------------------
                - | 表示或
                - a|b 字符串中是否存在 a 或 b
                -------------------------
                - [] 表示或（字符集）
                - [a-z] 字符串中是否存在任意小写字母
                - [A-Z] 字符串中是否存在任意大写字母
                - [a-zA-Z] 字符串中是否存在任意字母
                - [0-9] 字符串中是否存在任意数字 
                --------------------------
                - [^] 表示除了
                - [^x] 字符串中是否存在除了 x 以外内容
                - [^a-z] 字符串中是否存在除了小写字母以外的字符
                --------------------------
                - . 表示除了空白符外的任意字符
                --------------------------
                - \ 在正则表达式中可以作反义字符使用
                --------------------------
                - \w 字符串中是否存在任意单词，等价于 [A-Za-z0-9_]
                - \W 字符串中是否存在单词以外的字符，等价于 [^A-Za-z0-9_]
                - \d 字符串中是否存在任意数字，等价于 [0-9]
                - \D 字符串中是否存在数字以外的字符，等价于 [^0-9]
                - \s 字符串中是否存在空白字符
                - \S 字符串中是否存在空白字符以外的字符
                - \b 单词边界
                - \B 除了单词边界
                ---------------------------
                - ^a 字符串是否以 a 开头
                - b$ 字符串是否以 b 结尾
                - ^a$ 完全匹配字符串 a，此时字符串必须是 a 才符合规则
                - ^abc$ 完全匹配字符串 abc，此时字符串必须是 abc 才符合规则
                ---------------------------
                - {m} 表示正好 m 个
                - a{3} 字符串中是否正好存在 3 个连续的字符 a
                - ^a{3}$ 字符串中是否正好是 aaa
                - ^(ab){3}$ 字符串是否正好是 ababab（括号可以对字符进行分组）
                - ^[a-z]{3}$ 字符串是否正好是三个小写字母
                ----------------------------
                - {m,} 表示至少 m 个
                - ^[a-z]{1,}$ 字符串是否正好是一个小写字母
                ----------------------------
                - {m, n} 表示 m 到 n 个
                - ^[a-z]{1,3}$ 字符串是否正好是 1 到 3 个小写字母
                ----------------------------
                - + 表示一个以上，相当于 {1,}
                - ^ba+$ 字符串是否是以 b 开头，1 个以上的 a 结尾
                ----------------------------
                - * 表示任意数量
                - ^ba*$ 字符串是否是以 b 开头，任意个以上的 a 结尾
                ----------------------------
                - ? 表示 0 到 1 个，相当于 {0, 1}
                - ^ba?$ 字符串是否是 b 或 ba（以 b 开头，0 或 1 个 a 结尾）


            4. 正则表达式之检查字符串是否符合规则 reg.test(str)

            5. 正则表达式之从字符串中提取符合规则的内容 reg.exec(str)
                - 默认情况下，只能通过这种方式从字符串中提取一个符合规则的内容；设置 flags 为 g，表示全局匹配，此时可以提取所有符
                合规则的内容
                - 可以在 pattern 参数中，对规则进行分组，则 reg.exec(str) 不仅会返回符合正则表达式的字符串，还会返回符合分组规则
                的字符串
                - reg.exec(str) 的每次调用可以获取一个字符串中符合规则的子串，如果要获取所有子串，不仅要设置 flags 为 g，还要多
                次调用，直至方法返回 null
        */

        let str = "abcsdsfaxcadcsaoc"

        // 使用正则表达式，从 str 中提取符合 axc 格式的子串
        let reg = /a[a-z]c/ig;

        let matchRes = reg.exec(str);

        while (matchRes) {
            console.log(matchRes);
            matchRes = reg.exec(str);
        }
        // [ 'abc', index: 0, input: 'abcsdsfaxcadcsaoc', groups: undefined ]
        // [ 'axc', index: 7, input: 'abcsdsfaxcadcsaoc', groups: undefined ]
        // [ 'adc', index: 10, input: 'abcsdsfaxcadcsaoc', groups: undefined ]
        // [ 'aoc', index: 14, input: 'abcsdsfaxcadcsaoc', groups: undefined ]

        // 使用正则表达式，从 str 中提取符合 axc 格式的子串
        // 与 reg 不同，reg2 的正则表达式对规则进行了分组，因此每次匹配的结果不仅仅会有符合正则表达式规则的字符串，还有符合分组内规则的字符串
        let reg2 = /a(([a-z])c)/ig;

        let matchRes2 = reg2.exec(str);

        while (matchRes2) {
            console.log(matchRes2);
            matchRes2 = reg2.exec(str);
        }
        // ['abc', 'bc', 'b', index: 0, input: 'abcsdsfaxcadcsaoc', groups: undefined ]
        // ['axc', 'xc', 'x', index: 7, input: 'abcsdsfaxcadcsaoc', groups: undefined ]
        // ['adc', 'dc', 'd', index: 10, input: 'abcsdsfaxcadcsaoc', groups: undefined ]
        // ['aoc', 'oc', 'o', index: 14, input: 'abcsdsfaxcadcsaoc', groups: undefined ]

        /* 
            练习：提取 dajsdh13715678903jasdlakdkjg13457890657djashdjka13811678908sdadadasd 中的手机号

            手机号码规则：1 开头，之后一个数字 3 到 9 之间，之后的九个数字任意取值
        */

        // 提取手机号码
        const phoneStr = "dajsdh13715678903jasdlakdkjg13457890657djashdjka13811678908sdadadasd";

        let reg3 = /1[3-9]\d{9}/g;

        let phoneRes = reg3.exec(phoneStr);

        while (phoneRes) {
            console.log(phoneRes[0]);
            phoneRes = reg3.exec(phoneStr)

        }

        // 提取手机号码的同时，提取前边 3 位和后边 4 位，中间四位加密
        reg3 = /(1[3-9]\d)\d{4}(\d{4})/g;

        while (phoneRes = reg3.exec(phoneStr)) {
            console.log(phoneRes[1] + "****" + phoneRes[2]);
        }

        console.log(reg3.test(13457890657)); // true
    </script>

</body>

</html>